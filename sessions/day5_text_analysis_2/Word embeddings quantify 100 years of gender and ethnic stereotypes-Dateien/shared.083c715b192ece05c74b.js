!function(){var t,n={31985:function(e,t,n){var a,i;a=[n(65781),n(83866),n(21563),n(89730),n(18829),n(58030)],void 0===(i=function(e,t,n,a,i,o){}.apply(t,a))||(e.exports=i)},25174:function(e,t,n){var a,i;n(89554),n(26699),n(21249),n(32023),n(54747),a=[t,n(31924),n(88450),n(60588)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.initCampaigns=t.getDisplayedCampaigns=void 0,n=o(n),a=o(a),i=o(i);t.initCampaigns=function(){var e,t=n.default.customConfig.campaigns||{};EREADER.googleAdsExisted||(EREADER.googleAdsExisted=!$.isEmptyObject(t)&&t.includes(a.default.campaign.constants.GOOGLE_ADS_MARKER)),$.isEmptyObject(t)||(e=JSON.parse(t));var i,o=[];for(var r in e)if(e.hasOwnProperty(r)&&((i=e[r])&&!$.isEmptyObject(i)&&i.html&&i.html.length>0)){var s={campaign:{mode:r,html:e[r].html,code:e[r].code,uri:e[r].uri,googleAd:e[r].html.includes(a.default.campaign.constants.GOOGLE_ADS_MARKER)}};o.push(s)}n.default.customConfig.campaigns=o};function r(e,t){return e.campaign.mode=t,e}t.getDisplayedCampaigns=function(){if(n.default.customConfig.inDocAdsEnabled&&(!n.default.customConfig.suspendAdsInSinglePagePdfs||1!==i.default.getTotal())){var e=n.default.customConfig.campaigns,t=[],o=e.length;return e.forEach((function(n){if(1===o)n.campaign.mode===a.default.campaign.constants.MODE.DYNAMIC&&(n=r(n,a.default.campaign.constants.MODE.FIXED_TOP));else if(2===o)n.campaign.mode===a.default.campaign.constants.MODE.DYNAMIC&&(i=e,s=a.default.campaign.constants.MODE.FIXED_TOP,i.forEach((function(e){if(e.campaign.mode===s)return!0})),1)&&(n=r(n,a.default.campaign.constants.MODE.FIXED_TOP));else if(n.campaign.mode===a.default.campaign.constants.MODE.DYNAMIC)return;var i,s;t.push(n)})),t.map((function(e){return{position:e.campaign.mode,uri:e.campaign.uri}}))}}}.apply(t,a))||(e.exports=i)},40239:function(e,t,n){var a,i;n(82526),n(41817),n(32165),n(57327),n(26699),n(66992),n(21249),n(3843),n(83710),n(41539),n(88674),n(17727),n(32023),n(78783),n(33948),a=[t,n(31924),n(65723),n(30922),n(46103),n(30086),n(3264),n(70371),n(17991),n(25174),n(40086),n(81152),n(88450)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=g(n),a=g(a),i=g(i),o=g(o),r=g(r),s=g(s),l=g(l),d=g(d),f=g(f),c=g(c),p=g(p);var v=void 0,h=function(){var e,t=n.default.customConfig.readingProgress.serverReadingProgress;$.isEmptyObject(t)||(e=JSON.parse(t)),e&&"success"===e.status?n.default.customConfig.readingProgress.location=e.location:(LIT.Reader.LogEnabled&&console.log("Failure to retrieve progress successfully"),n.default.customConfig.readingProgress.location={}),_()},_=function(){s.default.readerUI.init(),LIT.Reader.LogEnabled&&console.log("MODULE CONFIG:"),LIT.Reader.LogEnabled&&console.log(n.default);var e,t=o.default.getProgressStorageKey(),r=a.default.getMultipleSync([n.default.customConfig.readerSettingsLocalStorageKey,t]);for(var f in r[n.default.customConfig.readerSettingsLocalStorageKey]?r[n.default.customConfig.readerSettingsLocalStorageKey]=JSON.parse(r[n.default.customConfig.readerSettingsLocalStorageKey]):r[n.default.customConfig.readerSettingsLocalStorageKey]={},i.default.getDefaultSettings())i.default.getDefaultSettings().hasOwnProperty(f)&&(r[n.default.customConfig.readerSettingsLocalStorageKey].hasOwnProperty(f)&&void 0!==r[n.default.customConfig.readerSettingsLocalStorageKey][f]||(r[n.default.customConfig.readerSettingsLocalStorageKey][f]=i.default.getDefaultSettings()[f]));if(a.default.put(n.default.customConfig.readerSettingsLocalStorageKey,r[n.default.customConfig.readerSettingsLocalStorageKey]),r[t]){var g=JSON.parse(r[t]);g=JSON.parse(g),e=g}var h=n.default.customConfig.readingProgress;o.default.shouldOverrideLocalProgress(n.default.customConfig.readingProgress,g)?e=JSON.parse(h.location):o.default.syncProgress(g),e=e&&e.location?e.location:e;var _,b=v.goto,E=!!v.goto;if(E)try{JSON.parse(b)}catch(e){E=!1}E&&v.goto||(b=void 0),s.default.events.control(),i.default.initSettings(),r[n.default.customConfig.readerSettingsLocalStorageKey]&&(_="object"!==m(r[n.default.customConfig.readerSettingsLocalStorageKey])?JSON.parse(r[n.default.customConfig.readerSettingsLocalStorageKey]):r[n.default.customConfig.readerSettingsLocalStorageKey]);var y=EREADER.utils.isLargeDesktop()?64:32;function A(){var e=function(){var e=n.default.customConfig.campaigns,t=[];return e.map((function(e){t.push(e)})),t}();e=e.filter((function(e){return!e.campaign.html.includes(p.default.campaign.constants.GOOGLE_ADS_MARKER)})),n.default.customConfig.campaigns=e}function R(){d.default.contentActions.loadEbook(_,v.ebook,e,b).then((function(e){l.default.trigger(l.default.eventTypes.START,{customProperties:{eventTime:Date.now()}}),s.default.readerUI.onLoadEbook()})),c.default.cloneDataFromOldReader()}_=_||i.default.getDefaultSettings(),EREADER.utils.setIfPropertyNotPresent(_,"columnGap",y),EREADER.utils.setIfPropertyNotPresent(_,"columnMaxWidth",680),EREADER.utils.setIfPropertyNotPresent(_,"columnMinWidth",230),i.default.updateReader(_),window.CACHED_SETTINGS=_,s.default.readerUI.afterSettingsInit(),n.default.customConfig.inDocAdsEnabled&&(0,u.initCampaigns)(),n.default.customConfig.inDocAdsEnabled&&EREADER.googleAdsExisted?fetch("https://securepubads.g.doubleclick.net/pagead/ppub_config?ippd=127.0.0.1%3A8080").then((function(){EREADER.adBlockerFound=!1})).catch((function(){A(),EREADER.adBlockerFound=!0})).finally((function(){R()})):R()},b={loadUI:function(e){r.default.init(o.default),v=e;var t=a.default.getSync(n.default.customConfig.readerSettingsLocalStorageKey);function i(){if(EREADER.utils.isMobile()||EREADER.utils.isTablet()){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")}else document.documentElement.style.removeProperty("--vh")}Keyboard.applySettings(t),$(window).on("resize",i),i(),Keyboard.scope("reader"),s.default.readerUI.loadPrivate(),h(),f.default.init()},tooltipSelector:function(){return"#app-navbar *:not(iframe):not([data-no-tooltip])[title]"}};t.default=b}.apply(t,a))||(e.exports=i)},30364:function(e,t,n){var a,i;n(26699),n(24812),n(69070),n(74916),n(32023),n(64765),n(73210),a=[n(75190),n(30037)],void 0===(i=function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}e=n(e),t=n(t);var a={};(function(){var e=this,t=function(n){try{return n.initKeyboardEvent("keyup",!1,!1,e,"+",3,!0,!1,!0,!1,!1),"+"==(n.keyIdentifier||n.key)&&3==(n.keyLocation||n.location)&&(n.ctrlKey?n.altKey?1:3:n.shiftKey?2:4)||9}catch(e){t=0}}(document.createEvent("KeyboardEvent")),n={char:"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,locale:"",detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0},a=Function.prototype.call.bind(Object.prototype.hasOwnProperty),i=Object.defineProperty||function(e,t,n){"value"in n&&(e[t]=n.value)};e.crossBrowser_initKeyboardEvent=function(o,r){var s;s=t?document.createEvent("KeyboardEvent"):document.createEvent("Event");var l,d={};for(l in n)a(n,l)&&(d[l]=(a(r,l)&&r||n)[l]);var u=d.ctrlKey,f=d.shiftKey,c=d.altKey,p=d.metaKey,g=d.altGraphKey,m=t>3?((u?"Control":"")+(f?" Shift":"")+(c?" Alt":"")+(p?" Meta":"")+(g?" AltGraph":"")).trim():null,v=d.key+"",h=d.char+"",_=d.location,b=d.keyCode||(d.keyCode=v&&v.charCodeAt(0)||0),E=d.charCode||(d.charCode=h&&h.charCodeAt(0)||0),y=d.bubbles,A=d.cancelable,R=d.repeat,w=d.locale,T=e;for(l in d.which||(d.which=d.keyCode),"initKeyEvent"in s?s.initKeyEvent(o,y,A,T,u,c,f,p,b,E):t&&"initKeyboardEvent"in s?1==t?s.initKeyboardEvent(o,y,A,T,v,_,u,f,c,p,g):2==t?s.initKeyboardEvent(o,y,A,T,u,c,f,p,b,E):3==t?s.initKeyboardEvent(o,y,A,T,v,_,u,c,f,p,g):4==t?s.initKeyboardEvent(o,y,A,T,v,_,m,R,w):s.initKeyboardEvent(o,y,A,T,h,v,_,m,R,w):s.initEvent(o,y,A),n)if(a(n,l)&&s[l]!=d[l])try{delete s[l],i(s,l,{writable:!0,value:d[l]})}catch(e){}return s}}).call(window);var i={comparePressedKey:function(e,t){var n={Backspace:8,Tab:9,Enter:13,Escape:27,Esc:27,ArrowLeft:37,Left:37,ArrowUp:38,Up:38,ArrowRight:39,Right:39,ArrowDown:40,Down:40,Delete:46,Del:46},a=!1;return $.each(t,(function(t,i){var o=i,r=isNaN(o);if(void 0!==e.key)r?e.key.length>1&&(a=o.includes(e.key)):a=isNaN(e.key)?n[e.key]===o:e.key===o;else if(void 0!==e.keyIdentifier)r?(e.keyIdentifier.length>1&&(a=o.includes(e.keyIdentifier)),a=o===e.keyIdentifier):a=isNaN(e.keyIdentifier)?n[e.keyIdentifier]===o:e.keyIdentifier===o;else if(void 0!==e.keyCode)if(r){var s=!1;$.each(n,(function(t,n){if(o===t&&e.keyCode===n)return s=!0,!1})),a=s}else a=e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||e.keyCode===o;if(a)return!1})),a},resetToDefaults:function(){for(var e in i.defaultOptions)i.defaultOptions.hasOwnProperty(e)&&"string"==typeof i.defaultOptions[e]&&(i[e]=i.defaultOptions[e])},resetAccessKeys:function(){var e=function(e){if(!e||!e.length)return"";var t=e[e.length-1];return/^[a-z0-9]+$/i.test(t)?t:""};for(var t in i.accesskeys={},i)if(i.hasOwnProperty(t)){var n=i[t];"string"==typeof n&&(i.accesskeys[t]=e(n))}},applySettings:function(e){if(this.resetToDefaults(),e&&e.keyboard)for(var t in i)i.hasOwnProperty(t)&&"string"==typeof i[t]&&"string"==typeof e.keyboard[t]&&(i[t]=e.keyboard[t]);this.resetAccessKeys()},dispatch:function(e,t){if(!t.cancelBubble&&!t.defaultPrevented&&(void 0===t.returnValue||t.returnValue)){var n=t.srcElement||t.target;if(n)for(var a=n;a;){var i=a.nodeName;if("input"===i||"textarea"===i)return;if(a.getAttribute){var o=a.getAttribute("contenteditable");if("true"===o||"contenteditable"===o)return}if(a.classList&&a.classList.contains("keyboard-input"))return;a=a.parentNode}var r=crossBrowser_initKeyboardEvent(t.type,{bubbles:!0,cancelable:!1,keyCode:t.keyCode,charCode:t.charCode,which:t.which,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,char:t.char?t.char:String.fromCharCode(t.charCode),key:t.key?t.key:t.keyCode});e.dispatchEvent(r)}},scope:function(e){e||alert("!SCOPE ACTIVATE!"),t.default.setScope(e)},on:function(e,n,i){e||console.error("!KEYS!"),a.hasOwnProperty(n)||(a[n]=[]),a[n].push(e),t.default.unbind(e,n),(0,t.default)(e,n,(function(e){EREADER.utils.isMaterialViewerOpen()||$(".tip-container").length>0||($(document.body).addClass("keyboard"),i(e))}))},off:function(e){if(e||alert("!SCOPE OFF!"),a.hasOwnProperty(e))for(var n in a[e])t.default.unbind(n,e)},i18n:{ToggleRightPanel:e.default.settings,PagePrevious:e.default.i18n_page_previous,PageNext:e.default.i18n_page_next,PagePreviousAlt:e.default.i18n_page_previous+" (access key)",PageNextAlt:e.default.i18n_page_next+" (access key)",NodePrevious:e.default.paging_left+" (access key)",NodeNext:e.default.paging_right+" (access key)",Boookmark:e.default.bookmark,Paging:e.default.paging,FullScreenToggle:e.default.enter_fullscreen+" / "+e.default.exit_fullscreen,ZoomScreenToggle:e.default.zoom_width+" / "+e.default.zoom_height,ZoomOut:e.default.zoomout,ZoomIn:e.default.zoomin,SwitchToLibrary:e.default.view_library,ShareList:e.default.share_list,SaveOffline:e.default.save_offline,DownloadList:e.default.download,ShowNarrator:e.default.narrator,ShowSearch:e.default.search,FullSite:e.default.fullSite,Cite:e.default.cite,MediaOverlaysRateIncrease:e.default.i18n_audio_rate_increase,MediaOverlaysRateDecrease:e.default.i18n_audio_rate_decrease,MediaOverlaysPlayPause:e.default.i18n_audio_play+" / "+e.default.i18n_audio_pause,MediaOverlaysPrevious:e.default.i18n_audio_previous,MediaOverlaysNext:e.default.i18n_audio_next,MediaOverlayTouchToPlayToggle:e.default.i18n_audio_touch_toggle,BackgroundAudioPlayPause:e.default.i18n_audio_play_background+" / "+e.default.i18n_audio_pause_background},defaultOptions:{},accesskeys:{},ToggleRightPanel:"o",readingOptions:"r",scrollUp:"up",scrollDown:"down",PagePrevious:"left",PageNext:"right",NodePrevious:"a",NodeNext:"d",ToggleLeftPanel:"i",Boookmark:"b",Paging:"p",FullScreenToggle:"u",ZoomScreenToggle:"h",ZoomOut:"z",ZoomIn:"x",SwitchToLibrary:"e",ShareList:"j",SaveOffline:"k",DownloadList:"g",ShowNarrator:"n",ShowSearch:"s",FullSite:"v",Cite:"c",SwitchFormat:"f",MediaOverlaysRateIncrease:"9",MediaOverlaysRateDecrease:"8",MediaOverlaysPlayPause:"1",MediaOverlaysPrevious:"2",MediaOverlaysNext:"3",MediaOverlayTouchToPlayToggle:"4",BackgroundAudioPlayPause:"5"};try{for(var o in i.defaultOptions={},i)i.hasOwnProperty(o)&&"string"==typeof i[o]&&(i.defaultOptions[o]=i[o]);i.resetAccessKeys()}catch(e){console.error(e)}window.Keyboard=i}.apply(t,a))||(e.exports=i)},64355:function(e,t,n){var a,i;n(66992),n(41539),n(78783),n(33948),n(60285),a=[n(4002),n(26729),n(54998),n(30364),n(43734),n(48126),n(51117),n(91535),n(69560),n(20235),n(35457),n(20666)],void 0===(i=function(e,t,n,a,i,o,r,s,l,d,u,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}if(t=c(t),n=c(n),t.default.prototype.trigger=t.default.prototype.emit,window.EventEmitter=t.default,window.URI=n.default,"URL"in window==!1){if("webkitURL"in window==!1)throw Error("Browser does not support window.URL");window.URL=window.webkitURL}}.apply(t,a))||(e.exports=i)},30922:function(e,t,n){var a,i,o=n(41999);n(57327),n(69826),n(82772),n(9653),n(29253),n(32564),a=[t,n(31924),n(65723),n(88450),n(17991),n(74584)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var d;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var u=$(".settings-dialog"),f=$(".preview-text"),c=function(e){"justify"===e.justifyText?$(i.default.checklayout_info.reading_area).addClass("justified").removeClass("justified-auto"):"auto"===e.justifyText?$(i.default.checklayout_info.reading_area).addClass("justified-auto").removeClass("justified"):$(i.default.checklayout_info.reading_area).removeClass("justified justified-auto"),e.hyphenate?$(i.default.checklayout_info.reading_area).addClass("hyphenated"):$(i.default.checklayout_info.reading_area).removeClass("hyphenated"),r.default.displayActions.updateDisplaySettings(e),s.default.check()},p=o.debounce(c,300);function g(){d={fontSize:100,syntheticSpread:n.default.customConfig.displayOptions.displayFormat,scroll:n.default.customConfig.displayOptions.displayMode,columnGap:EREADER.utils.isLargeDesktop()?64:32,columnMaxWidth:680,columnMinWidth:230,justifyText:"default",hyphenate:!1}}function m(e){for(var t=!0,n=["fontSize","justifyText","hyphenate"],a=0;a<n.length;a++){var i=n[a];if(d.hasOwnProperty(i)&&e.hasOwnProperty(i)&&d[i]!==e[i]){t=!1;break}}var o=$(".options-return-defaults");t?o.removeClass("show"):o.addClass("show")}var v={initSettings:function(){g(),u=$(".settings-dialog"),f=$(".preview-text");var e=$("#font-size-input"),t=u.find(".font-btn");$("#readingOptionsBtn").one("click.settings",(function(e){$(e.target).closest("#settings-dialog").length||y()})),r.default.displayActions.initDisplaySettings();var o=$("#scroll-doc-radio"),s=$("#flow-vertical"),l=$("#flow-horizontal"),v=$("#columns-single"),h=$("#columns-facing"),_=$("#columns-default"),b=$('.settings-dialog input[name="justify"]'),E=$("#hyphenate-checkbox");u.find("input").on("change",(function(t){var u={fontSize:Number(e.val()),syntheticSpread:d.syntheticSpread,scroll:d.scroll};a.default.get(n.default.customConfig.readerSettingsLocalStorageKey,(function(e){e&&(u.syntheticSpread=e.syntheticSpread,u.scroll=e.scroll)})),o.prop("checked")?(u.scroll="scroll-doc",$('input[name="display-format"]').prop("disabled",!0)):s.prop("checked")?(u.scroll="scroll-continuous",$('input[name="display-format"]').prop("disabled",!0)):l.prop("checked")&&(u.scroll="auto",$('input[name="display-format"]').prop("disabled",!1)),h.prop("checked")?($(i.default.checklayout_info.reading_area).addClass(i.default.checklayout_info.facing),u.syntheticSpread="double"):v.prop("checked")?u.syntheticSpread="single":_.prop("checked")&&(u.syntheticSpread="auto");var f=b.filter(":checked").val();u.justifyText=-1!==["default","auto","justify"].indexOf(f)?f:"default",u.hyphenate=E.prop("checked"),$(i.default.checklayout_info.reading_area).hasClass(i.default.checklayout_info.fixed)&&(u.fontSize=100,u.justifyText="default",u.hyphenate=!1),r.default.displayActions.saveDisplaySettings(t),m(u),p(u),a.default.get(n.default.customConfig.readerSettingsLocalStorageKey,(function(e){for(var t in e||(e={}),u)u.hasOwnProperty(t)&&(e[t]=u[t]);a.default.put(n.default.customConfig.readerSettingsLocalStorageKey,e),setTimeout((function(){Keyboard.applySettings(e)}),100)}))})),$(".options-return-defaults").on("click",(function(){a.default.get(n.default.customConfig.readerSettingsLocalStorageKey,(function(e){e||(e={}),e.fontSize=d.fontSize,e.justifyText=d.justifyText,e.hyphenate=d.hyphenate,t.prop("disabled",!1),c(e),a.default.put(n.default.customConfig.readerSettingsLocalStorageKey,e,(function(){y()}))}))}));t.on("click",(function(){var n,a,i;n=$(this),a=Number(e.val()),i=n.hasClass("plus")?a+10:a-10,t.prop("disabled",!1),i>=200&&t.filter(".plus").prop("disabled",!0),i<=50&&t.filter(".minus").prop("disabled",!0),e.val(i).trigger("change")}));var y=function(){a.default.get(n.default.customConfig.readerSettingsLocalStorageKey,(function(n){for(var a in n=n||d,d)!d.hasOwnProperty(a)||n.hasOwnProperty(a)||n[a]||(n[a]=d[a]);m(n),e.val(n.fontSize),Number(e.val())>=200&&t.filter(".plus").prop("disabled",!0),Number(e.val())<=50&&t.filter(".minus").prop("disabled",!0),"double"===n.syntheticSpread?h.prop("checked",!0):"single"===n.syntheticSpread?v.prop("checked",!0):_.prop("checked",!0),"scroll-continuous"===n.scroll?(s.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!0)):"scroll-doc"===n.scroll?(o.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!0)):(l.prop("checked",!0),$('input[name="display-format"]').prop("disabled",!1)),n.justifyText=-1!==["default","auto","justify"].indexOf(n.justifyText)?n.justifyText:"default","default"!==n.justifyText?b.filter('[value="'+n.justifyText+'"]').prop("checked",!0):b.prop("checked",!1),E.prop("checked",n.hyphenate),$(i.default.checklayout_info.reading_area).hasClass("isFixed")&&(n.fontSize=100),f.css({fontSize:n.fontSize/100+"em"});var p=r.default.displayActions.getDisplaySettingsData(n,CACHED_SETTINGS);u.addClass(p.classes),p.changed&&c(n),CACHED_SETTINGS=n}))};document.addEventListener("visibilitychange",(function(){document.visibilityState}))},updateReader:c,getDefaultSettings:function(){return d||g(),d}};t.default=v}.apply(t,a))||(e.exports=i)},58030:function(t,n,a){var i,o;a(32564),i=[a(64355),a(40239),a(17991),a(81983),a(31924)],void 0===(o=function(t,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n=r(n),a=r(a),i=r(i),o=r(o),i.default.initEreaderMetaData().then((function(){o.default.customConfig.restrictContent&&"file:"===window.location.protocol.toLowerCase()&&$("html").remove(),a.default.init().then((function(){$(document.body).on("click",(function(){$(document.body).removeClass("keyboard")})),$(document).on("keyup",(function(e){$(document.body).addClass("keyboard")})),$(document).on("keyup",(function(e){9===e.keyCode&&$(document.activeElement).trigger("mouseover")})),$(document.body).tooltip({selector:n.default.tooltipSelector(),trigger:"hover",placement:function(e,t){var n="auto";return"left-page-btn"==t.id?n="right":"right-page-btn"==t.id?n="left":t.dataset.tooltipPosition&&(n=t.dataset.tooltipPosition),n},container:"body"}).on("show.bs.tooltip",(function(e){if("ontouchstart"in document.documentElement)e.preventDefault();else{$(n.default.tooltipSelector()).not(e.target).tooltip("hide");var t=e.target;setTimeout((function(){$(t).tooltip("hide")}),8e3)}}));var e=EREADER.utils.getURLQueryParams();e.ebook=EREADER.utils.getEbookUrl(e.ebook),n.default.loadUI(e)})).catch((function(e){console.error(e)}))})).catch((function(t){console.error(e)}))}.apply(n,i))||(t.exports=o)},66327:function(e,t,n){var a,i;n(57327),n(69826),n(89554),n(26699),n(47941),n(74916),n(32023),n(15306),n(64765),n(54747),a=[t,n(75190),n(31924),n(17475),n(64142),n(15553),n(82180),n(60588),n(88450),n(93274),n(48217),n(41930),n(53986),n(35668),n(3071),n(34329),n(9979),n(30145),n(29775),n(7754),n(38834),n(77995),n(47419),n(27003),n(30326),n(15378),n(82343),n(56533),n(56194),n(30331),n(38156),n(72798),n(70408),n(27493),n(21555),n(20270),n(18767),n(86997),n(43663),n(14375),n(58150),n(74584),n(17991),n(30086)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v,h,_,b,E,y,A,R,w,T,C,S,D,P,O,M,k,L,I,x,N,F,U,B,j,V,H,K,z){"use strict";function W(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=W(n),a=W(a),i=W(i),o=W(o),r=W(r),s=W(s),l=W(l),d=W(d),u=W(u),f=W(f),c=W(c),p=W(p),g=W(g),m=W(m),v=W(v),h=W(h),_=W(_),b=W(b),E=W(E),y=W(y),A=W(A),R=W(R),w=W(w),T=W(T),C=W(C),S=W(S),D=W(D),P=W(P),O=W(O),M=W(M),k=W(k),L=W(L),I=W(I),x=W(x),N=W(N),F=W(F),U=W(U),B=W(B),j=W(j),V=W(V),H=W(H),K=W(K),z=W(z);var G,q,Y,Z,J,X,Q=[],ee=[],te=[],ne=a.default.customConfig,ae=ne.profileConfig,ie=ne.switchFormats&&ne.switchFormats.available&&Object.keys(ne.switchFormats.available).length>1,oe=["download","share","print","saveOffline","user"],re=["download","share","print","formats","logo","website","saveOffline","help","narrator","user"],se=["formats","pagination","bookmark","readingOptions"],le=["website","logo"],de=["material","info","links","notes"],ue=["details","outline","materials","annotation","linking"],fe=["details","outline","materials",ne.isScitrusHelpGuideEnabled&&!ne.scitrusDecommissionMessageConfig.show?"annotation":"","linking","readingOptions","share",ie?"formats":"","saveOffline"].filter((function(e){return""!==e}));if(ae){!function(){var e="epub"!==ne.format;Q.push("bookmark"),ae.downloadSuppressed&&Q.push("download"),ae.switchFormatsSuppressed&&Q.push("formats"),!ne.helpEnabled&&Q.push("help"),ne.tabsSuppressionConfig.tocSuppressed&&Q.push("outline"),(!ne.epubActions.narrator||e)&&Q.push("narrator");ne.nodeNavigationDisabled&&!e&&Q.push("pagination"),ae.printSuppressed&&Q.push("print"),ae.offlineSuppressed&&Q.push("saveOffline");ae.accessSharingSuppressed&&Q.push("share"),ne.userSuppressed&&Q.push("user"),ae.siteLinkOutSuppressed&&Q.push("website"),!e&&Q.push("zoom"),ae.materialsSuppressed&&Q.push("materials"),ae.linksSuppressed&&Q.push("linking"),ae.notesSuppressed&&Q.push("annotation")}();var ce=function(e){e.shortCode.includes("pdf")?e.isPdf=!0:e.isEpub=!0};!function(){var e=ne.epubActions.download.files;for(var t in e)e[t].available&&(ce(e[t]),ee.push(e[t]))}();ne.doiMappingConfig.enabled&&function(){var e=ne.epubActions.download.doiMappingDownloadFiles;for(var t in e){var n=e[t].fileList,a=e[t].title;for(var i in n)n.hasOwnProperty(i)&&n[i].available&&(ce(n[i]),n[i].doi=t,n[i].title=a,te.push(n[i]))}}();var pe,ge=ne.sharedAccessConfig.isShared,me=u.default.accessPermissionConfig(),ve=ge?"group":"group_add",he=ge?"dropdown-list medium wide":"dropdown-list medium wider";G='<div class="d-inline-flex clipboard share-access-navbar">'+(0,f.default)({id:"shareTrigger",classList:"shareAccessUrl btn--light",title:n.default.share_list+" ["+Keyboard.accesskeys.ShareList+"]",ariaLabel:"share access",content:'<span class="icon material-icons">'+ve+"</span>",extraContent:'<div class="d-none"><button class="shareAccessUrlClip">Copy Access</button></div>'})+"</div>",(ge||me.isNoAccess)&&(pe=ge?(0,I.default)({strings:n.default,sharedViewData:r.default.data()}):(0,x.default)({strings:n.default,a:s.default.data(),data:{title:n.default.shared_access,message:n.default.shareAccess_message,accessUrl:me.accessUrl,isButtonVisible:me.isButtonVisible,isFreeToRead:me.freeToRead}}),G=(0,c.default)({classList:"clipboard",trigger:{ariaLabel:"Share access",icon:'<span class="icon material-icons">'+ve+"</span>",id:"shareTrigger",title:n.default.shared_access+" ["+Keyboard.accesskeys.ShareList+"]"},content:{classList:he,content:pe}})),q=[{name:"bookmark",template:'<div class="d-inline-flex grouped">'+(0,f.default)({class:"icon-bookmark",title:n.default.bookmark+" ["+Keyboard.Boookmark+"]",ariaLabel:n.default.bookmark,content:'<span class="icon material-icons">bookmark_border</span>\n        <span class="icon material-icons hide">bookmark</span>'})+"</div>"},{name:"download",template:(0,c.default)({classList:"navbar-download not_resolved_yet",dataPersist:"true",trigger:{ariaLabel:"Download",classList:"btn--cta_roundedColored",icon:'<span class="icon material-icons">get_app</span>',title:n.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom"},content:{classList:"dropdown-list medium",content:(0,P.default)({files:ee,doiMappingFiles:te,showSectionTitles:te.length>0,title:n.default.download,strings:n.default,internalConfig:i.default,extraClasses:me.isNoAccess?"access-tip__container":""})}}),templateMore:(0,m.default)({classList:"download_list",content:(0,U.default)({files:ee,doiMappingFiles:te,showSectionTitles:te.length>0,strings:n.default,internalConfig:i.default})})},{name:"formats",template:T.default,templateMore:j.default},{name:"help",templateMore:V.default},{name:"narrator",template:(0,M.default)({strings:n.default,keyboard:Keyboard}),templateMore:(0,m.default)({classList:"narrator",content:(0,f.default)({classList:"rawerMenu--trigger list-button checkbox",content:'<span class="icon material-icons">record_voice_over</span><span class="tab-text">Narration Controls</span>'})})},{name:"readingOptions",template:(0,c.default)({classList:"grouped reading_options settings-dialog reading-options-navbar",trigger:{ariaLabel:"Select node",icon:'<span class="icon material-icons reflow">format_size</span><span class="icon reader-reading-options fxl"></span>',id:"readingOptionsBtn",hasPopup:"true",title:n.default.help_reading_options+" ["+Keyboard.accesskeys.readingOptions+"]"},content:{classList:"dropdown-list",content:(0,S.default)({isReadingFlowEnabled:ne.isReadingFlowEnabled})}})},{name:"pagination",template:(0,c.default)({classList:"paging grouped",trigger:{ariaLabel:"Select node",classList:"",icon:'<span class="d-none d-md-inline-block pagination_button_text"></span><span class="cpage"></span><span class="separator">/</span><span class="allpages"></span><span class="animated_arrow_down"></span>',title:n.default.paging_reflow+" ["+Keyboard.accesskeys.Paging+"]"},content:{classList:"dropdown-list medium",content:(0,C.default)({internalConfig:i.default})}})},{name:"print",template:'<div class="d-inline-flex print print-navbar">'+(0,f.default)({title:n.default.printing_label,ariaLabel:n.default.printing_label,content:'<span class="icon material-icons">print</span>'})+"</div>",templateMore:(0,m.default)({classList:me.isNoAccess?"print access-tip__container":"print",content:(0,f.default)({classList:"drawerMenu--trigger list-button",title:n.default.printing_label,ariaLabel:n.default.printing_label,content:'<span class="icon material-icons">print</span><span class="tab-text">'+n.default.printing_label+"</span>"})})},{name:"saveOffline",template:(0,c.default)({classList:"save-offline-navbar",trigger:{id:"save-offline-button",ariaLabel:"Save for offline",classList:"navbarButton",icon:'<span class="icon idle reader-offline_pin"></span>',haspopup:"true",title:n.default.save_for_offline},content:{classList:"dropdown-list wide",content:(0,g.default)({content:(0,k.default)({strings:n.default,customConfig:ne})})}}),templateMore:(0,k.default)({showSeparator:!0,strings:n.default,customConfig:ne,extraClasses:me.isNoAccess?"access-tip__container":""})},{name:"search",template:(0,c.default)({classList:a.default.customConfig.doiMappingConfig.enabled?"search search--permission":"search",dataPersist:"true",trigger:{ariaLabel:"Search document",classList:"search-trigger",icon:'<span class="icon material-icons">search</span>',title:n.default.search+" ["+Keyboard.ShowSearch+"]"},content:{content:(0,L.default)({strings:n.default,searchToggle:a.default.customConfig.doiMappingConfig.enabled,isOffline:z.default.isOffline()})}})},{name:"share",template:G,templateMore:(0,m.default)({classList:"clipboard",content:(0,B.default)({strings:n.default,isShared:ne.sharedAccessConfig.isShared})})},{name:"user",template:(0,c.default)({classList:"user-navbar",trigger:{ariaLabel:"User info",classList:"btn--cta_rounded"+(ne.user.isLoggedIn?"":" loggedout"),icon:ne.user.isLoggedIn?"<span>"+ne.user.avatarName+"</span>":'<span class="icon material-icons">account_circle</span>',id:"user_button",haspopup:"true",title:"User actions"},content:{classList:"dropdown-list medium user_id",content:(0,N.default)({user:ne.user}),id:"user-panel"}}),templateMore:(0,m.default)({classList:"user_id"+(ne.user.isLoggedIn?" logged":""),content:(0,N.default)({user:ne.user})})},{name:"logo",template:(0,p.default)({ariaLabel:"Home Page",classlist:"logo btn btn--light",href:"/",target:"_blank",containerClassList:"hide-sm",tooltip:ne.bannerConfig.bannerText?ne.bannerConfig.bannerText:n.default.home_page})},{name:"zoom",template:(0,F.default)({strings:n.default,keyboard:Keyboard})}],Y=[{name:"material",template:"material"},{name:"info",template:"info"},{name:"links",template:"links"},{name:"notes",template:"notes"}];var _e={id:o.default.tabs.notes+"Desktop",title:n.default.notes_title,ariaLabel:"Toggle "+n.default.notes_title+" panel",tooltip:"right",target:"#"+o.default.tabs.notes};ne.isScitrusHelpGuideEnabled?(_e.icon={class:"reader-scitrus_icon",paths:'<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span><span class="path5"></span><span class="path6"></span>'},_e.class="btn--scitrus",_e.svgIcon='<svg width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12.5c-.8.4-1.9.3-3-.3a8.4 8.4 0 00-8.3 0H5c-1 .6-1.7 1.5-1.7 2.4 0 1 .6 1.8 1.7 2.4l4.2 2.5 4.2-2.5c2.4-1.3 4-3.8 4.2-6.7v-.1-.1-.2-.1c0 1.2-.4 2.2-1.2 2.7z" fill="url(#paint0_linear)"/><path d="M13.6 2.5L9.3 0V5a8.4 8.4 0 004.2 7.2v.1c1.1.6 2.2.7 3 .3.8-.5 1.2-1.5 1.2-2.7 0-3.1-1.6-5.8-4-7.3z" fill="url(#paint1_linear)"/><path d="M5.1 17c-1-.6-1.7-1.4-1.7-2.4S4 12.8 5 12.2A8.5 8.5 0 009.4 5V0L5 2.5A8.4 8.4 0 005 17.1z" fill="url(#paint2_linear)"/><defs><linearGradient id="paint0_linear" x1="3.4" y1="14.6" x2="17.7" y2="14.6" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient><linearGradient id="paint1_linear" x1="18.2" y1="10" x2="7.2" y2="3.7" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient><linearGradient id="paint2_linear" x1="9.9" y1=".3" x2="1.4" y2="14.9" gradientUnits="userSpaceOnUse"><stop stop-color="#737380"/><stop offset="1" stop-color="#737380" stop-opacity="0"/></linearGradient></defs></svg>'):_e.icon={class:"reader-notes"},Z=[{name:"details",trigger:{id:o.default.tabs.info+"Desktop",title:n.default.info_title,ariaLabel:"Toggle "+n.default.info_title+" panel",tooltip:"right",target:"#"+o.default.tabs.info,icon:{class:"material-icons",text:"info"}}},{name:"outline",trigger:{id:o.default.tabs.toc+"Desktop",title:n.default.outline_title,ariaLabel:"Toggle "+n.default.outline_title+" panel",tooltip:"right",target:"#"+o.default.tabs.toc,icon:{class:"material-icons",text:"list"}}},{name:"materials",trigger:{id:o.default.tabs.data+"Desktop",title:n.default.data_title,ariaLabel:"Toggle "+n.default.data_title+" panel",tooltip:"right",target:"#"+o.default.tabs.data,icon:{class:"reader-material-folder"}}},{name:"annotation",trigger:_e},{name:"linking",trigger:{id:o.default.tabs.links+"Desktop",title:n.default.links_title,ariaLabel:"Toggle "+n.default.links_title+" panel",tooltip:"right",target:"#"+o.default.tabs.links,icon:{class:"material-icons rotate-135",text:"link"}}}],J=[{name:"details",text:n.default.help_details,template:(0,h.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-44},target:{element:"#infoDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#infoDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"outline",text:n.default.help_outline,template:(0,A.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-86},target:{element:"#chaptersDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#chaptersDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"materials",text:n.default.help_materials,template:(0,E.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-128},target:{element:"#filesDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:24},panel:{x:336,y:0},target:{element:"#figures",parentElement:"#leftPanelmobile",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"annotation",text:n.default.help_annotation,template:(0,v.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-170},target:{element:"#notesDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:88},panel:{x:336,y:76},target:{element:"#notesDesktop",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"linking",text:n.default.help_link,template:(0,b.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-128},target:{element:"#linksDesktop",trigger:!0}},tablet:{arrow:{position:"right",x:316,y:24},panel:{x:336,y:-248},target:{element:"#references",parentElement:"#leftPanelmobile",trigger:!0}}},tipTarget:"#reader-left-panel"},{name:"readingOptions",text:n.default.help_reading_options,template:(0,R.default)({strings:n.default}),device:{desktop:{arrow:{position:"right",x:138,y:114},panel:{x:158,y:57},target:{element:"#readingOptionsBtn",trigger:!0}},tablet:{arrow:{position:"left",x:-135,y:116},panel:{x:-415,y:57},target:{element:"#readingOptionsBtn",trigger:!0}}},tipTarget:"#readingOptionsBtn"},{name:"share",text:n.default.help_sharing,template:(0,w.default)({strings:n.default}),device:{desktop:{arrow:{position:"top",x:0,y:36},panel:{x:-155,y:56},target:{element:"#shareTrigger",trigger:!1}},tablet:{arrow:{position:"top",x:0,y:36},panel:{x:-155,y:56},target:{element:"#shareTrigger",trigger:!1}}},tipTarget:"#shareTrigger"},{name:"formats",text:n.default.help_formats,template:(0,_.default)({strings:n.default}),device:{desktop:{arrow:{position:"top",x:14,y:37},panel:{x:-124,y:57},target:{element:"#formatsTrigger",trigger:!1}},tablet:{arrow:{position:"top",x:16,y:40},panel:{x:-110,y:60},target:{element:"#formatsTrigger",trigger:!1}}},tipTarget:".navbar-switch-formats"},{name:"saveOffline",text:n.default.help_offline,template:(0,y.default)({strings:n.default}),device:{desktop:{arrow:{position:"left",x:-234,y:148},panel:{x:-514,y:60},target:{element:"#settings_button",trigger:!0}},tablet:{arrow:{position:"left",x:-20,y:12},panel:{x:-300,y:-72},target:{element:".offlineSeparator",parentElement:"#settings_button",trigger:!0}}},tipTarget:"#settings_button"}],X={text:n.default.help_scitrus,content:n.default.help_scitrus_desc,device:{desktop:{arrow:{position:"right",x:25,y:0},panel:{x:45,y:-170},target:{element:"#notesDesktop"}}},target:"#reader-left-panel"}}var be=function(e,t,n){e.length>0&&t.length>0&&t.forEach((function(t){var a=e.attr(t);void 0!==a&&e.attr(t,a.replace(/node/g,n))}))},Ee=function(){for(var e=$(d.default.download_info.doiMapping_download_options),t=e.find("a"),n=0;n<t.length;n++){var a=$(t[n]),i=a.data("doi");K.default.contentActions.doiMappingModeActions.hasAccessByDoi(i)||a.parent().remove()}var o=$(d.default.download_info.base_download_options);(o.siblings(".list_title").text("Download"),$(d.default.download_info.mobile_view_download_id).find(".tab-text").text("Download"),0===o.find("a").length&&e.siblings(".list-section__title").remove(),e.find("a").length>0)&&$(d.default.download_info.download_class).find(".dropdown-content.dropdown-list").removeClass("medium").addClass("wider")},ye={returnSuppressedArray:function(){return Q},returnActionList:function(){return q},returnActionOrder:function(){return{center:se,left:le,right:oe,more:re}},returnTabList:function(){return Y},returnTabOrder:function(){return de},returnButtonList:function(){return Z},returnButtonOrder:function(){return ue},returnTipList:function(){return J},returnTipOrder:function(){return fe},returnOneTimeItem:function(){return X},returnMoreMenu:function(e){return{name:"more",template:(0,c.default)({trigger:{ariaLabel:"view more options",classList:"rpanel_toggle",id:"settings_button",icon:'<span class="icon material-icons">more_horiz</span>',hasPopup:"true",title:n.default.more+" ["+Keyboard.ToggleRightPanel+"]",tooltip:"bottom"},content:{ariaLabel:n.default.rpanel,classList:"dropdown-list wide",content:(0,g.default)({content:(0,O.default)({items:e})}),id:"reader-right-panel"}})}},returnLeftMenu:function(){return{name:"menu",template:(0,D.default)({strings:n.default,keyboard:Keyboard})}},afterPublicationLoad:function(){K.default.displayActions.columnsEnabled()||$(d.default.navbar_info.readingOptions).find(".option-columns").remove();var e=$(".reading_options").find(d.default.dropdown_info.content);if(H.default.isPDF()?e.addClass("slim"):e.addClass("medium"),!a.default.customConfig.nodeNavigationDisabled||H.default.isPDF()){var t=$(d.default.paging_info.paging_class),n=t.find(d.default.dropdown_info.trigger),i=t.find(d.default.dropdown_info.content),o=l.default.getHtmlData();n.attr({title:o.title}),n.addClass(o.classes),n.find(".pagination_button_text").html(o.text),i.find('input[name="page-select"]').attr("type",o.inputType);var r=n.attr("aria-label");n.attr("aria-label",r.replace("node",o.text.toLowerCase()));var s=o.text.toLowerCase();be(n,["aria-label"],s);var u=$(d.default.paging_info.pageSelector);u.find(".list_title").text("go to "+s),be(u.find("div"),["aria-label"],s),be(u.find("input"),["aria-label"],s),be(u.find("button"),["title","data-alt-title"],s),o.displayInfoRow||$(d.default.paging_info.infoRow).parent().remove(),l.default.getTotal()<2&&$(d.default.paging_info.paging_class).remove()}te.length>0&&Ee(),H.default.check()},doiMappingModeUpdates:function(){te.length>0&&Ee()}};t.default=ye}.apply(t,a))||(e.exports=i)},82180:function(e,t,n){var a,i;a=[t,n(75190),n(31924),n(88450),n(40529),n(41402)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={$element:null,isShowBanner:!1,type:null,config:null,id:i.default.access_banner.id,init:function(){l.settings(),l.isShowBanner&&(l.$element=$(i.default.access_banner.id),l.create(),l.controller())},settings:function(){var e=a.default.customConfig.freeToReadConfig;e.isFreeToRead&&e.isBannerEnabled&&(l.isShowBanner=!0,l.type="free to read",l.config=e)},controller:function(){$(document).on("click",l.id+" .close",(function(){l.destroy($(this))}))},create:function(){if(l.config.isBannerEnabled){var e=(0,o.default)(l.data());r.default.appendBanner($(e))}},data:function(){if("free to read"===l.type)return{id:i.default.access_banner.id.substr(1),classes:"popup_container backgroundNotice top",config:l.config,strings:n.default,isFTR:!0}},destroy:function(e){e.closest(".popup_container").slideUp("normal",(function(){e.closest(l.id).remove()})),$(window).off("resize.AccessBanner")}},d=l;t.default=d}.apply(t,a))||(e.exports=i)},94980:function(e,t,n){var a,i;n(69826),n(47941),n(91058),n(74916),n(15306),n(32564),a=[t,n(75190),n(88450),n(31924),n(32465),n(77803),n(4646),n(84222),n(64142),n(17991),n(41402)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=c(n),a=c(a),i=c(i),o=c(o),r=c(r),s=c(s),l=c(l),d=c(d),u=c(u),f=c(f);var p={timerAlertElement:null,clockIconElement:null,container:null,state:{mode:a.default.rental_preview.modes.DISABLED,remainingTimeEndPoint:"",popupMessage:"",alertHidden:!0,closedByUser:!1},timer:null,timers:{},init:function(){var e=void 0,t=i.default.customConfig.doiMappingConfig.enabled;if(t){if(!u.default.contentActions.doiMappingModeActions.isInitialized())return;e=u.default.contentActions.doiMappingModeActions.getTimeLimitedDoiConfig()}if(this._setMode(e),this.isEnabled()){if(this.container=document.querySelector("#app-container"),t)for(var n=0;n<e.length;n++)this.timers[e[n].doi]=new o.default(e[n].doi);else this.timers[i.default.customConfig.doi]=new o.default(i.default.customConfig.doi);if(this.appendTimerAlertHTML(EREADER.utils.isOffline(),e),t)for(var a=0;a<e.length;a++){var r=this.timers[e[a].doi];this.start(r,e[a])}else this.start(this.timers[Object.keys(this.timers)[0]])}},start:function(e,t){var n=this,a=i.default.customConfig.epubActions.time,o=EREADER.utils.isOffline();void 0!==t&&(a=parseInt(t.time)),e.updateTime(a),this.getActualRemainingTime((function(t){e.updateTime(parseInt(t))}),t),o?this.openAlert():e.startTimer((function(e){n.handleTimerTick(e),n.hasExpired(e)&&(n.createExpiredPopup(t),i.default.customConfig.epubActions.rental&&void 0===t?n.reloadPage(4e3):n.redirectToSite(4e3,t))}))},getTimerAlertData:function(e,t){var n,o=void 0!==t,r={id:a.default.rental_preview.timer_element_id.substr(1),text:this.state.popupMessage,isOffline:e,doiMappingMode:o},s=[];if(o)for(var l=0;l<t.length;l++)n=this.timers[t[l].doi],s.push({doi:t[l].doi,timeString:n.getFormattedTime(),timeStringDigital:n.getFormattedTime(a.default.timer.fromats.DIGITAL)});else n=this.timers[Object.keys(this.timers)[0]],s.push({doi:i.default.customConfig.doi,timeString:n.getFormattedTime(),timeStringDigital:n.getFormattedTime(a.default.timer.fromats.DIGITAL)});return r.timers=s,r},appendTimerAlertHTML:function(e,t){if(this.container&&!this.timerAlertElement){this.state.alertHidden=!0;var n=(0,l.default)(this.getTimerAlertData(e,t));f.default.appendBanner(n),this.timerAlertElement=this.container.querySelector(a.default.rental_preview.timer_element_id),this.clockIconElement=this.timerAlertElement.querySelectorAll(".icon"),this.addCloseAlertEventListener(),$(".outlineTrigger").on("click",(function(){return $(".l-panel--button-container").find('button[data-trigger="#'+d.default.tabs.toc+'"]').trigger("click"),!1}))}},addCloseAlertEventListener:function(){if(this.timerAlertElement){var e=this;this.timerAlertElement.querySelector(".close").addEventListener("click",(function(){e.state.alertHidden=!0,e.state.closedByUser=!0,e.timerAlertElement.classList.add("closed")}))}},openAlert:function(){this.timerAlertElement&&(this.state.alertHidden=!1,this.timerAlertElement.classList.remove("closed"))},showClockIcon:function(){$(this.clockIconElement).removeClass("hidden")},createExpiredPopup:function(e){var t={hasIcon:"true",icon:"hourglass_empty",title:void 0!==e?n.default.viewMode_rental_DoiMappingMode_expired_title:n.default.viewMode_expired_title,description:n.default.viewMode_expired_text},a=(0,s.default)({settings:t});r.default.customPopup({closeBtn:!1,escBtn:!1,overlayClick:!1,customClasses:"rental"},a)},reloadPage:function(e){window.setTimeout((function(){window.location.reload()}),e)},redirectToSite:function(e,t){var n=i.default.customConfig.siteUrl;void 0!==t&&(n=n.replace(/\/doi\/.*/g,"/doi/".concat(t.doi))),window.setTimeout((function(){window.location.replace(n)}),e)},handleTimerTick:function(e){if(this.timerAlertElement){this.shouldHideAlertElement(e)||!this.state.alertHidden||this.state.closedByUser||(this.openAlert(),this.showClockIcon());var t=this.timerAlertElement.querySelector("#timeLeft");null!=t&&(t.textContent=e.getFormattedTime());var n=this.timerAlertElement.querySelector("#"+CSS.escape("timer_"+e.key));null!==n&&(n.querySelector("#timeLeftDigital").textContent=e.getFormattedTime(a.default.timer.fromats.DIGITAL))}},getActualRemainingTime:function(e,t){var n=this.state.remainingTimeEndPoint;void 0!==t&&(n=t.accessDurationUrl),$.ajax({url:n,dataType:"json",success:function(t){e(t.remainingDuration)},error:function(){e(0)}})},shouldHideAlertElement:function(e){return e.currentTime.D>=2},toTransparent:function(){this.isEnabled()&&this.timerAlertElement.classList.add("transparent")},toOpaque:function(){this.isEnabled()&&this.timerAlertElement.classList.remove("transparent")},isEnabled:function(){return this.state.mode!==a.default.rental_preview.modes.DISABLED},hasExpired:function(e){return e.hasCompleted()},_setMode:function(e){var t=i.default.customConfig;t.doiMappingConfig.enabled?void 0!==e&&e.length>0?(this.state.mode=a.default.rental_preview.modes.RENTAL,this.state.popupMessage=n.default.viewMode_rental_DoiMappingMode):this.state.mode=a.default.rental_preview.modes.DISABLED:t.epubActions.preview?(this.state.mode=a.default.rental_preview.modes.PREVIEW,this.state.remainingTimeEndPoint=t.previewUrl,this.state.popupMessage=n.default.viewMode_preview):t.epubActions.rental&&(this.state.mode=a.default.rental_preview.modes.RENTAL,this.state.remainingTimeEndPoint=t.accessDurationUrl,this.state.popupMessage=n.default.viewMode_rental)},updateTimerTemplate:function(e){if(this.timerAlertElement&&void 0!==e){var t=this.timerAlertElement.querySelector("#"+CSS.escape("timer_"+e));null!==t?($(".multi-digital-timer").addClass("hide"),$(t).removeClass("hide")):$(".multi-digital-timer").addClass("hide")}}};t.default=p}.apply(t,a))||(e.exports=i)},32465:function(e,t,n){var a,i;n(83710),n(41539),n(91058),n(74916),n(39714),n(83112),n(23123),n(32564),a=[t,n(88450)],void 0===(i=function(e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=(a=n)&&a.__esModule?a:{default:a};var i=function(e){this.key=e,this.currentTime={D:0,H:0,M:0,S:0},this.duration=0,this.updateTime=function(e){"string"==typeof e?(this.currentTime=this.timeStringToTimeObject(e),this.duration=this.timeObjectToMs(this.currentTime)):"number"==typeof e?(this.currentTime=this.msToTimeObject(e),this.duration=e):"number"==typeof e.D&&"number"==typeof e.H&&"number"==typeof e.M&&"number"==typeof e.S&&(this.currentTime.D=e.D,this.currentTime.H=e.H,this.currentTime.M=e.M,this.currentTime.S=e.S,this.duration=this.timeObjectToMs(this.currentTime))},this.getFormattedTime=function(e){var t;return e===n.default.timer.fromats.DIGITAL?this.currentTime.D<1&&this.currentTime.H<1?this.currentTime.M+1+" min":this.currentTime.D<2?(t=1===this.currentTime.D?this.currentTime.H+24:this.currentTime.H).toString().padStart(2,"0")+":"+this.currentTime.M.toString().padStart(2,"0"):this.getExpirationDate():this.currentTime.D<1&&this.currentTime.H<1&&this.currentTime.M<1?"1 minute":this.currentTime.D<1&&this.currentTime.H<1?this.currentTime.M+1+" minutes":this.currentTime.D<2?((t=1===this.currentTime.D?this.currentTime.H+24:this.currentTime.H)>0?t+"h ":"")+this.currentTime.M+"m ":void 0},this.startTimer=function(e){var t=this,n=setInterval((function(){e(t),t.duration=t.duration-1e3,t.duration<0&&clearInterval(n);t.updateTime(t.duration)}),1e3)},this.hasCompleted=function(){return this.currentTime.D<=0&&this.currentTime.H<=0&&this.currentTime.M<=0&&this.currentTime.S<=0},this.timeStringToTimeObject=function(e){var t=e.split(":");return{D:Math.floor(parseInt(t[0])/24),H:parseInt(t[0]),M:parseInt(t[1]),S:parseInt(t[2])}},this.msToTimeObject=function(e){var t=Math.floor(e%6e4/1e3),n=Math.floor(e%36e5/6e4);return{H:Math.floor(e%864e5/36e5),M:n,S:t,D:Math.floor(e/864e5)}},this.timeObjectToMs=function(e){return 1e3*(e.S+60*e.M+3600*e.H+86400*e.D)},this.getExpirationDate=function(){var e=new Date,t=this.currentTime.D;e.setDate(e.getDate()+t);var n=e.getDate();return"Exp. "+e.toLocaleString("en-GB",{month:"short"})+" "+n+", "+e.getFullYear()}};t.default=i}.apply(t,a))||(e.exports=i)},62140:function(e,t,n){var a,i,o=n(41999);n(3843),n(83710),n(32564),a=[t,n(88450),n(75190),n(70371),n(77803),n(30086),n(35457),n(31924),n(17475),n(4646),n(93274)],void 0===(i=function(e,n,a,i,r,s,l,d,u,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=p(n),a=p(a),i=p(i),r=p(r),s=p(s),l=p(l),d=p(d),u=p(u),f=p(f),c=p(c);var g=d.default.customConfig.alertPopupMsg,m="authorized",v="unauthorized",h="POST",_=d.default.customConfig,b={isCopying:!1,COPY_BTN:"#copy-to-clipboard",setup:function(){if($("body").on("click",".shareAccessUrl",o.debounce((function(){s.default.isOffline()?r.default.toast("OFFLINE","share access"):d.default.customConfig.readOnlyMode?r.default.toast("READ_ONLY_MODE","Share Access","",""):b.access()}),2e3,{leading:!0,trailing:!1})),l.default.isSupported()){var e=new l.default("#copy-to-clipboard",{text:function(e){return e.getAttribute("data-clipboard-text")}});return EREADER.utils.ltTablet()&&$(n.default.right_panel_info.close_btn).trigger("click"),e.on("success",(function(){r.default.toast("SUCCESS","","",a.default.sharedAccess_copied)})),e.on("error",(function(){r.default.toast("SORRY")})),e}},destroy:function(e){void 0!==e&&e.destroy()},copy:function(e,t,n,a){b.isCopying=!0,void 0!==a&&a(),b.createSharePopup(n.title,n.label,t)},showTermMessage:function(){var e='<p class="subTitle">'+o.template(a.default.terms_and_conditions_label)({url:d.default.customConfig.termsAndConditionsUrl})+(d.default.customConfig.sharedAccessConfig.shareSponsorLink?"<br/>"+o.template(a.default.learn_more_label)({url:d.default.customConfig.sharedAccessConfig.shareSponsorLink}):"")+"</p>",t={customClasses:"termsPopup",primaryBtn:!0,primaryBtnClasses:"js__close acceptTerms",primaryBtnText:a.default.generic_agree,secondaryBtn:!0,secondaryBtnText:"CANCEL"},n={hasIcon:"true",icon:"group_add",messageType:"info",title:a.default.sharedAccess_title,description:e},i=(0,f.default)({settings:n});r.default.customPopup(t,i),$(".acceptTerms").on("click",(function(e){u.default.access_terms_accepted=!0,b.tryShareAccess()}))},createSharePopup:function(e,t,n){var a='<label class="subTitle" for="share-url-input-id">'+t+"</label>",i=document.createElement("div");i.setAttribute("id","clipboard-input"),i.className="clipboard-input";var o=document.createElement("div");o.setAttribute("id","share-url-input-cont");var s=document.createElement("input");EREADER.utils.setAttributes(s,{id:"share-url-input-id",type:"text",value:n,readonly:"readonly"}),o.appendChild(s);var d=document.createElement("div");EREADER.utils.setAttributes(d,{id:"copy-to-clipboard","data-clipboard-text":n,role:"button"}),d.textContent="COPY",i.appendChild(o),l.default.isSupported&&(i.appendChild(d),i.className="clipboard-input supported"),d.addEventListener("click",(function(){b.isCopying=!1}));var u={hasIcon:"true",icon:"group_add",messageType:"info",title:e,description:a+i.outerHTML},c=(0,f.default)({settings:u});r.default.customPopup({customClasses:"shareLink"},c),setTimeout((function(){$("#share-url-input-id").focus().select()}),500)},access:function(){var e=c.default.accessPermissionConfig();e.isNoAccess?r.default.toast("FREE_ACCESS","share access to","","",e):_.epubActions.shareAccess?b.checkAuthorizedSharing((function(e,t){t.error?r.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,g.SHARING_TEMPORARY_ERROR):e.authorized?($(n.default.menudrawer_info.offline_btn).removeClass(n.default.menudrawer_info.permissionDisabled),d.default.customConfig.sharedAccessConfig.alwaysDisplaySharingTermsPopup||!u.default.access_terms_accepted?b.showTermMessage():b.tryShareAccess()):!1===e.authorized&&("Permission Depleted"===e.errorType?(r.default.toast("PERMISSIONS_DEPLETED","access sharing","Access to this publication cannot be shared"),$(n.default.menudrawer_info.offline_btn).addClass(n.default.menudrawer_info.permissionDisabled)):"Sharing Unauthorized"===e.errorType?(r.default.toast("USER_UNAUTHORIZED","shared",void 0,g.SHARING_UNAUTHORIZED),$(n.default.menudrawer_info.offline_btn).addClass(n.default.menudrawer_info.permissionDisabled)):"Sharing Unavailable"===e.errorType?r.default.toast("SHARING_UNAVAILABLE",void 0,void 0,g.SHARING_UNAVAILABLE):r.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,g.SHARING_TEMPORARY_ERROR))})):r.default.toast("SHARING_DISABLED",void 0,void 0,g.SHARING_DISABLED)},tryShareAccess:function(){b.getJsonFromServer((function(e,t){!e.error&&e.authorized?(b.copy("#copy-to-clipboard",t.shareUrl,{title:a.default.sharedAccess_title,label:a.default.sharedAccess_label,success:a.default.sharedAccess_copied}),i.default.trigger(i.default.eventTypes.SHARE,{customProperties:{eventTime:Date.now(),shareType:"P2P",shareURL:t.shareUrl}})):r.default.toast("TEMPORARY_ERROR","Share access link generation",void 0,g.SHARING_TEMPORARY_ERROR)}))},getJsonFromServer:function(e){$.ajax({url:E.getShareAccessUrl(),method:h,async:!1,success:function(t){t.status===m?e({authorized:!0},t):t.status===v&&e({authorized:!1},t)},error:function(t){e({error:!0},t)}})},checkAuthorizedSharing:function(e){$.ajax({url:E.getAuthorizedSharingAccessUrl(),method:h,async:!1,success:function(t){e(t,{error:!1})},error:function(t){e(t,{error:!0})}})},checkShareAuthorization:function(){d.default.customConfig.epubActions.shareAccess&&b.checkAuthorizedSharing((function(e,t){t.error||("Permission Depleted"===e.errorType?u.default.authorized_sharing_available=!0:u.default.authorized_sharing_available=e.authorized&&!s.default.isOffline())}))}};var E={getShareAccessUrl:function(){var e=d.default.customConfig.shareAccessUrl,t=d.default.customConfig.doi,n=d.default.customConfig.format;return void 0===e||0===e.length?"":e+"?doi="+encodeURIComponent(t)+"&format="+n+"&shareType=P2P"},getAuthorizedSharingAccessUrl:function(){var e=d.default.customConfig.authorizeSharing,t=d.default.customConfig.doi,n=d.default.customConfig.format;return void 0===e||0===e.length?"":e+"?doi="+encodeURIComponent(t)+"&format="+n+"&shareType=P2P"}},y=b;t.default=y}.apply(t,a))||(e.exports=i)},15553:function(e,t,n){var a,i;n(69826),n(32564),a=[t,n(75190),n(31924),n(77803),n(88450),n(57659),n(4646),n(41402)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=d(n),a=d(a),i=d(i),o=d(o),r=d(r),s=d(s),l=d(l);var u=a.default.customConfig.sharedAccessConfig;function f(e){e||setTimeout((function(){$("body").attr("data-alert-open",!0)}),10)}var c={$element:null,$overlay:null,init:function(e){u.isShared&&(c.$overlay=$(".shared_overlay-btn"),c.testForErrors()||0!==$(o.default.shared_access_view_info.id).length||function(){if(a.default.customConfig.sharedAccessConfig.isShareBannerEnabled){var e=(0,r.default)(c.data());l.default.appendBanner($(e)),f(EREADER.utils.isMobile())}}(),c.$element=c.getTopMessage(),c.controller())},controller:function(){c.$element.find(".btn").on("click",(function(e){$(this).blur()})),$(window).on("resize.sharedView",(function(e){var t=EREADER.utils.isMobile();t||c.$element.css("display",""),f(t)})),c.$element.on("click",".close",(function(){c.destroy()})),$("#app-navbar").on("click",".sharedAccess_mobileTrigger",(function(){!function(){var e=c.data(),t='<p class="subTitle">'+e.strings.sharedAccess_view_title+"</p>";e.isMediaShareType&&""!==e.config.shareMediaMessage?t+="<small>"+e.config.shareMediaMessage+"</small>":e.isP2PShareType&&""!==e.config.shareSponsorMessage&&(t+="<small>"+e.config.shareSponsorMessage+"</small>");var a={hasIcon:"true",icon:"group",messageType:"info",title:n.default.shared_access,description:t},o=(0,s.default)({settings:a}),r={customClasses:"sharedAccessMessage",secondaryBtn:!0};""!==e.config.shareSponsorLink&&(r.primaryBtn=!0,r.primaryBtnText=n.default.learn_more,r.primaryBtnElement="a",r.primaryBtnHref=e.config.shareSponsorLink),i.default.customPopup(r,o)}()}))},getTopMessage:function(){return $(o.default.shared_access_view_info.id)},data:function(){return{id:o.default.shared_access_view_info.id.substr(1),isMediaShareType:"MEDIA"===u.shareType,isP2PShareType:"P2P"===u.shareType,classes:"popup_container backgroundNotice top",config:u,strings:n.default}},testForErrors:function(){return!1},toOpaque:function(){var e=EREADER.utils.isMobile()||EREADER.utils.isTablet();u.isShared&&e&&c.$overlay.removeClass("transparent")},toTransparent:function(){var e=EREADER.utils.isMobile()||EREADER.utils.isTablet();u.isShared&&e&&c.$overlay.addClass("transparent")},destroy:function(){c.$element.slideUp("normal",(function(){c.$element.remove(),c.$overlay.removeClass("d-none")})),$("body").removeAttr("data-alert-open"),$(window).off("resize.sharedView")}},p=c;t.default=p}.apply(t,a))||(e.exports=i)},54262:function(e,t,n){var a,i;n(68309),n(41539),n(88674),a=[t,n(31924),n(30086)],i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={setup:function(){var e=n.default.customConfig.analyticsConfig;a.default.isOffline()||e&&e.enabled&&this.setupProviders(e)},fetchMetis:function(){var e=n.default.customConfig.metisUrl;e&&fetch(e,{mode:"no-cors",referrerPolicy:"unsafe-url"})},setupProviders:function(e){var t=e.providers;if(void 0!==t)for(var n=0;n<t.length;n++){var a=t[n];"hotjar"===a.name&&a.enabled?this.setupHotJar(a):"atm"===a.name&&a.enabled&&r(a)}},setupHotJar:function(e){var t=e.siteId,n=e.version;t&&this.AddHotJarScriptEl(t,n)},AddHotJarScriptEl:function(e,t){var n,a,i,o;n=window,a=document,n.hj=n.hj||function(){(n.hj.q=n.hj.q||[]).push(arguments)},n._hjSettings={hjid:e,hjsv:t},i=a.getElementsByTagName("head")[0],(o=a.createElement("script")).async=1,o.src="https://static.hotjar.com/c/hotjar-"+n._hjSettings.hjid+".js?sv="+n._hjSettings.hjsv,i.appendChild(o)}};function r(e){window.readerAtmEventData&&function(e){var t=window.digitalData?window.digitalData:{};if(t.event=t.event||[],e.eventData&&(e.eventName||window.readerAtmEventName)){var n=e.eventName?e.eventName:window.readerAtmEventName;t.event.push({eventData:e.eventData,eventName:n})}else console.error("Server returned malformed or empty atm event object",e)}(window.readerAtmEventData)}var s=o;t.default=s}.apply(t,a),void 0===i||(e.exports=i)},14923:function(e,t){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){e instanceof Object&&(this.readerEventGlobalVariables=EREADER.EVENTS.GLOBAL_EVENTS,this.type=t,this.readerEventCustomProperties=e.customProperties)};t.default=n}.apply(t,[t]))||(e.exports=n)},70371:function(e,t,n){var a,i;n(92222),n(57327),n(26699),n(85827),n(3843),n(83710),n(9653),n(9494),n(47941),n(91058),n(74916),n(32023),n(23123),n(32564),a=[t,n(31924),n(30086),n(14923),n(65723),n(17991)],void 0===(i=function(e,n,a,i,o,r){"use strict";var s;function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r);var d={eventTypes:{START:"start",END:"end",READ:"read",VIEW_AD:"viewAd",SHARE:"share",DOWNLOAD:"download",PRINT:"print",SAVE_OFFLINE:"saveOffline",START_TOUR:"startTour",TOUR_TIP:"tourTip",OPEN_LEFT_MENU:"openLeftMenu",LINK_USAGE:"linkUsage",MATERIAL_ITEM_ACTION:"materialItemAction"},storageKeys:{readerEventsStorageKey:"readerEvents_"+n.default.customConfig.doi+"_"+n.default.customConfig.format},method:"POST",eventsKey:"readerEvents"},u={eventTypes:d.eventTypes,adImpressionDurationInSeconds:null!==(s=n.default.customConfig.eventsConfig)&&void 0!==s&&s.adImpressionDuration?Number.parseInt(n.default.customConfig.eventsConfig.adImpressionDuration)/1e3:0,trigger:function(e,t){if(n.default.customConfig.eventsConfig.enabled)switch(e){case d.eventTypes.START:u.start(t);break;case d.eventTypes.END:u.end(t);break;case d.eventTypes.READ:u.read(t);break;case d.eventTypes.SHARE:u.share(t);break;case d.eventTypes.DOWNLOAD:u.download(t);break;case d.eventTypes.PRINT:u.print(t);break;case d.eventTypes.SAVE_OFFLINE:u.saveOffline(t);break;case d.eventTypes.START_TOUR:u.startTour(t);break;case d.eventTypes.TOUR_TIP:u.tourTip(t);break;case d.eventTypes.OPEN_LEFT_MENU:u.openLeftMenu(t);break;case d.eventTypes.LINK_USAGE:u.linkUsage(t);break;case d.eventTypes.MATERIAL_ITEM_ACTION:u.materialItemAction(t)}},start:function(e){v(!0),$(window).on("beforeunload",(function(e){m()&&u.trigger(u.eventTypes.END,{customProperties:{eventTime:Date.now()}})})),$(window).on("online",(function(){n.default.customConfig.eventsConfig.enabled&&(m()?EREADER.EVENTS.GLOBAL_EVENTS.isOnline=!0:v(!0))})),$(window).on("offline",(function(){n.default.customConfig.eventsConfig.enabled&&m()&&(EREADER.EVENTS.GLOBAL_EVENTS.isOnline=!1)})),EREADER.EVENTS={STORED_EVENTS:[],READ_ENTRY:{},LEFT_MENU_OPENED_BEFORE:{info:!1,chapters:!1,files:!1,notes:!1,links:!1},GLOBAL_EVENTS:{eReaderEpisodeId:EREADER.utils.generateUID(),episodeType:EREADER.utils.getEpisodeType(),episodeStartingTime:Date.now(),isMobile:EREADER.utils.isMobile(),doi:n.default.customConfig.doi,publicationTitle:n.default.customConfig.title,format:n.default.customConfig.format,isOnline:!a.default.isOffline()}},function(){b();var e=setInterval((function(){EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime?EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime-(new Date).getTime()<0&&(u.trigger(u.eventTypes.END,{customProperties:{eventTime:Date.now()}}),clearInterval(e)):(-100,clearInterval(e))}),1e3)}(),f(e,d.eventTypes.START)},end:function(e){m()&&(g(e,!0),function(e){e.customProperties.episodeDuration=parseInt((Date.now()-EREADER.EVENTS.GLOBAL_EVENTS.episodeStartingTime)/1e3)}(e),f(e,d.eventTypes.END,!0),v(),EREADER.EVENTS={STORED_EVENTS:[],READ_ENTRY:{},LEFT_MENU_OPENED_BEFORE:{info:!1,chapters:!1,files:!1,notes:!1,links:!1},GLOBAL_EVENTS:{}})},read:function(e){c(e,d.eventTypes.READ,!0)},viewAd:function(e){f(e,d.eventTypes.VIEW_AD)},share:function(e){c(e,d.eventTypes.SHARE)},download:function(e){c(e,d.eventTypes.DOWNLOAD)},print:function(e){c(e,d.eventTypes.PRINT)},saveOffline:function(e){c(e,d.eventTypes.SAVE_OFFLINE)},startTour:function(e){c(e,d.eventTypes.START_TOUR)},tourTip:function(e){c(e,d.eventTypes.TOUR_TIP)},openLeftMenu:function(e){var t=e.customProperties.openedMenuItem;EREADER.EVENTS.LEFT_MENU_OPENED_BEFORE[t]||(EREADER.EVENTS.LEFT_MENU_OPENED_BEFORE[t]=!0,c(e,d.eventTypes.OPEN_LEFT_MENU))},linkUsage:function(e){c(e,d.eventTypes.LINK_USAGE)},materialItemAction:function(e){c(e,d.eventTypes.MATERIAL_ITEM_ACTION)}};function f(e,t,a){EREADER.EVENTS.STORED_EVENTS.push(function(e,t){var n=new i.default(e,t);if(!n)return;return n}(e,t)),EREADER.EVENTS.STORED_EVENTS.length!==n.default.customConfig.eventsConfig.allowedNumOfEventsPerReq-2||a||u.trigger(u.eventTypes.END,{customProperties:{eventTime:Date.now()}})}function c(e,t,n){m()?(p(e,t,n),b()):(u.trigger(u.eventTypes.START,{customProperties:{eventTime:Date.now()}}),p(e,t,n))}function p(e,t,n){n?g(e):f(e,t)}function g(e,t){var n=EREADER.EVENTS.READ_ENTRY;$.isEmptyObject(n)?t||(EREADER.EVENTS.READ_ENTRY=e):(n.customProperties.location!==e.customProperties.location||t)&&(n.customProperties.readDuration=parseInt((e.customProperties.eventTime-n.customProperties.eventTime)/1e3),"campaign"===n.customProperties.locationType?function(e){e.customProperties.readDuration>=u.adImpressionDurationInSeconds&&u.viewAd({customProperties:{eventTime:Date.now(),campaignCode:r.default.contentActions.getCampaignCode(e.customProperties.spineIndex)||""}})}(n):f(n,d.eventTypes.READ,t),EREADER.EVENTS.READ_ENTRY={},t||(EREADER.EVENTS.READ_ENTRY=e))}function m(){return void 0!==EREADER.EVENTS.GLOBAL_EVENTS.eReaderEpisodeId&&void 0!==EREADER.EVENTS.GLOBAL_EVENTS.eReaderEpisodeId}function v(e){if(a.default.isOffline())e||function(e,t){o.default.get(t,(function(n){n?o.default.put(t,n.concat(e),$.noop):o.default.put(t,e,$.noop)}))}(EREADER.EVENTS.STORED_EVENTS,d.storageKeys.readerEventsStorageKey);else if(e){var t=function(e){return $.isEmptyObject(e)?{}:e.reduce((function(e,t){var n=t.readerEventGlobalVariables.eReaderEpisodeId;return e[n]||(e[n]=[]),e[n].push(t),e}),{})}(function(e){var t;return o.default.get(e,(function(e){t=e})),t||{}}(d.storageKeys.readerEventsStorageKey));i=d.storageKeys.readerEventsStorageKey,o.default.remove(i);var n=0;$.each(Object.keys(t),(function(e,a){if(n>=50)return!1;h(t[a]),n++}))}else{h(EREADER.EVENTS.STORED_EVENTS)}var i}function h(e){if(function(e){return!$.isEmptyObject(e)&&function(e){for(var t=0,n=0,a=0;a<e.length;a++){var i=e[a];if(i.type===d.eventTypes.START&&n++,i.type===d.eventTypes.END&&t++,n>1||t>1)return!1}return 1===n&&1===t}(e)}(e=function(e){var t=n.default.customConfig.eventsConfig.excludedEvents.split(",");return e.filter((function(e){return!t.includes(e.type)}))}(e)))if(navigator.sendBeacon){var t=function(e){var t=new FormData;return t.append(d.eventsKey,JSON.stringify(e)),navigator.sendBeacon(n.default.customConfig.eventsConfig.readerEventsAnalyticsUrl,t)}(e);t||_(e)}else _(e)}function _(e){var t={};t[d.eventsKey]=JSON.stringify(e),$.ajax({url:n.default.customConfig.eventsConfig.readerEventsAnalyticsUrl,method:d.method,dataType:"json",data:t})}function b(){var e=n.default.customConfig.eventsConfig.episodeRemainingTime;EREADER.EVENTS.GLOBAL_EVENTS.episodeRemainingTime=e?new Date(Date.now()+parseInt(e)).getTime():new Date(Date.now()+3e5).getTime()}var E=u;t.default=E}.apply(t,a))||(e.exports=i)},91710:function(e,t,n){var a,i;n(89554),n(66992),n(3843),n(83710),n(51532),n(41539),n(78783),n(54747),n(33948),a=[t,n(70371),n(31924)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o=new Map;function r(e){n.default.trigger(n.default.eventTypes.LINK_USAGE,{customProperties:{eventTime:Date.now(),linkClicked:e}})}function s(e){r(e.target.getAttribute("ftr-type"))}var l={init:function(){new Map(function(){var e=a.default.customConfig.publicationType,t="";e&&(t="book"===e.toLowerCase()||"chapter"===e.toLowerCase()?"book":"issue");var n=[[".logo","logo"],["#citeButton","cite"],["#seriesLink","series"],["#bookTocLink","book"],["#bookLink","book"],["#chapterAbstractLink","Summary"],["#journalHomeLink","journal"],["#issueTocLink","issue"],["#fullTextLink","article"],["#coverLink",t],[".crossmark-button a","crossmark"],["#reader-toc-body a","outline item"],["#supplementary-tab-pane a","supplement download"],["#media-tab-pane a","media download"],["#figures-tab-pane a","figure download"],["#tables-tab-pane a","table download"]];return a.default.customConfig.getFTRConfig.enabled||(n.push(["#references-tab-pane a","reference"]),n.push(["#citations-tab-pane a","citedBy"]),n.push(["#recommended-tab-pane a","recommended"])),n}()).forEach((function(e,t){!function(e,t){var n=o.get(e);n||(n=function(e){r(t)},o.set(e,n)),$(e).off("click",n),$(e).on("click",n)}(t,e)}))},initRefAndCitEvents:function(){$(".getFTR__item a").off("click",s),$(".getFTR__item a").on("click",s)}};t.default=l}.apply(t,a))||(e.exports=i)},35582:function(e,t,n){var a,i;n(69826),n(68309),a=[t,n(75190),n(31924),n(64142),n(30086),n(88450),n(45380),n(9064),n(57216),n(90029)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}var c,p;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=f(n),a=f(a),i=f(i),o=f(o),r=f(r),s=f(s),l=f(l),d=f(d),u=f(u);var g="../src/images/remarq_logo.png",m="../src/images/hypothesis_logo.png",v={setup:function(){c=$("#"+i.default.panes.notes);var e=a.default.customConfig.annotationsConfig,t=a.default.customConfig.profileConfig.notesSuppressed;if(o.default.isOffline()){c.html((0,s.default)({title:n.default.notes_title,settings:{icon:"wifi",errorType:"offline",text:n.default.notes_offline}})),window.addEventListener("online",(function e(){v.setup(),removeEventListener("online",e)}))}else if(a.default.customConfig.epubActions.preview)c.html((0,s.default)({title:n.default.notes_title,settings:{icon:"fingerprint",errorType:"authorized",text:n.default.notes_not_authorized}}));else if(e&&e.enabled&&!t){var l;if(null!==(l=a.default.customConfig.scitrusDecommissionMessageConfig)&&void 0!==l&&l.show)return c.html((0,d.default)({data:a.default.customConfig.scitrusDecommissionMessageConfig})),$(r.default.left_panel_info.id).addClass("scitrus-visible"),c.addClass("decommission"),void c.parent().css("height","100%");this.setupProviders(e),this.AnnotationsTriggers()}else c.html((0,s.default)({title:n.default.notes_title,settings:{icon:"remove_from_queue",errorType:"display",text:n.default.notes_not_enabled}}))},setupProviders:function(e){var t=e.providers;if(void 0!==t){var a=t.length,i={singleProvider:!1,id:""};1===a&&(i.singleProvider=!0,i.id=t[0].name),c.html((0,l.default)({tabTitle:n.default.notes_title,settings:i}));for(var o=0,r=t.length;o<r;o++){var d=t[o];i={id:d.name,name:d.title},"remarq"===d.name?i.src=g:"hypothesis"===d.name&&(i.src=m),c.find(".drawerMenu").append((0,u.default)({settings:i})),this.processProvider(d,a)}}else c.html((0,s.default)({title:n.default.notes_title,settings:{icon:"remove_from_queue",errorType:"display",text:n.default.notes_error}}))},processProvider:function(e,t){var n=e.name;"remarq"===n?(this.registerRemarqEvents(),1===t&&this.setupRemarq(e)):"hypothesis"===n&&1===t&&this.setupHypothesis(e)},onRemarqSelection:function(){var e,t=a.default.customConfig.annotationsConfig.providers;$.each(t,(function(t,n){if(EREADER.utils.displaySpinner($("#"+n.name+"-api")),"remarq"===n.name)return e=n,!1})),void 0!==e&&this.setupRemarq(e)},onHypothesisSelection:function(){var e,t=a.default.customConfig.annotationsConfig.providers;$.each(t,(function(t,n){if(EREADER.utils.displaySpinner($("#"+n.name+"-api")),"hypothesis"===n.name)return e=n,!1})),void 0!==e&&this.setupHypothesis(e)},setupRemarq:function(e){var t=e.src;if(t){var n=this.getScriptEl(t);e.apiBase&&n.setAttribute("data-api-base",e.apiBase),e.version&&n.setAttribute("data-version",e.version),n.async=!0,this.addScriptDataToPage(n)}},setupHypothesis:function(e){var t=e.src;window.hypothesisConfig=function(){return{onLayoutChange:function(e){LIT.Reader.LogEnabled&&console.log(e)},theme:e.theme,externalContainerSelector:"#hypothesis-api",branding:e.branding}};var n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("id","hypothesis_id"),n.setAttribute("async","true"),document.head.appendChild(n)},addScriptDataToPage:function(e){e&&document.getElementsByTagName("head")[0].appendChild(e)},getScriptEl:function(e){var t=document.createElement("script");return t.src=e,t},injectRemarq:function(){Remarq.inject("#remarq-api")},stopRemarq:function(){Remarq.stop(),p.disconnect()},stopHypothesis:function(){document.head.removeChild(document.getElementById("hypothesis_id"))},registerRemarqEvents:function(){var e=this;$(document).on("Remarq_loaded",(function(t){e.injectRemarq()})),$(document).on("Remarq_injected",(function(e){v.AddScitrusVisibleObserver(),$("#remarq-api iframe").attr("tabindex","-1"),LIT.Reader.LogEnabled&&console.log("Remarq successfully injected and displayed!")}))},AddScitrusVisibleObserver:function(){var e=$(r.default.left_panel_info.id),t=document.getElementById("notes").parentElement;$("body").hasClass(r.default.left_panel_info.panel_class)&&e.toggleClass("scitrus-visible");(p=new MutationObserver((function(t,n){$.each(t,(function(t,n){"attributes"===n.type&&"aria-expanded"===n.attributeName&&e.toggleClass("scitrus-visible")}))}))).observe(t,{attributes:!0})},AnnotationsTriggers:function(){$("#Remarq").click((function(){v.onRemarqSelection()})),$("#change_Remarq").click((function(){v.stopRemarq()})),$("#Hypothesis").click((function(){v.onHypothesisSelection()})),$("#change_Hypothesis").click((function(){v.stopHypothesis()}))}},h=v;t.default=h}.apply(t,a))||(e.exports=i)},41402:function(e,t){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n={appendBanner:function(e){var t;$("#bannerContainer").length<1&&((t=document.createElement("div")).id="bannerContainer",$("#reading-area").prepend(t)),$("#bannerContainer").append($(e))}};t.default=n}.apply(t,[t]))||(e.exports=n)},17475:function(e,t,n){var a,i;a=[t,n(31924)],void 0===(i=function(e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var i={search_notification_shown:!1,access_terms_accepted:!1,authorized_sharing_available:!0,download_available:!1,download_single:!1,download_files_key:"",download_files_size:"",download_files_type:"",isFixedLayout:"epub"!==(n=(a=n)&&a.__esModule?a:{default:a}).default.customConfig.format};t.default=i}.apply(t,a))||(e.exports=i)},64142:function(e,t){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n="tab-pane",a={toc:"chapters",info:"info",data:"files",notes:"notes",links:"links",ref:"references",cit:"citations",recommended:"recommended",fig:"figures",tables:"tables",media:"media",suppl:"supplementary",help:"help"},i={tabs:a,panes:{toc:"reader-toc-body",info:a.info+"-"+n,data:a.data+"-"+n,notes:a.notes+"-"+n,links:a.links+"-"+n,ref:a.ref+"-"+n,cit:a.cit+"-"+n,recommended:a.recommended+"-"+n,fig:a.fig+"-"+n,tables:a.tables+"-"+n,media:a.media+"-"+n,suppl:a.suppl+"-"+n,help:a.help+"-"+n},suffix:n};t.default=i}.apply(t,[t]))||(e.exports=n)},41259:function(e,t,n){var a,i;n(69826),n(26699),n(3843),n(83710),n(47941),n(74916),n(32023),n(15306),n(32564),a=[t,n(31924),n(30086),n(77803),n(88450),n(4646),n(93274),n(75190),n(70371),n(74584),n(25174)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=c(n),a=c(a),i=c(i),o=c(o),r=c(r),s=c(s),l=c(l),d=c(d),u=c(u);var p=n.default.customConfig.alertPopupMsg,g=function(e,t,n){s.default.fetchPermissions({reqType:s.default.PERMISSION_DOWNLOAD},t,n).done((function(t){s.default.canUsePermissions(t).done((function(t){m(e,t)})).fail((function(t){m(e,t.availableUsage),LIT.Reader.LogEnabled&&console.log(t.message)}))})).fail((function(t){e.preventDefault(),_(t)}))},m=function(e,t){var n={position:"toast",preset:"sorry"},a="";if(t===s.default.PERMISSION_NOT_AVAILABLE)i.default.toast("USER_UNAUTHORIZED","downloaded",void 0,p.USER_UNAUTHORIZED),v(e);else{if(t===s.default.UNLIMITED_USAGE)return b(e),!1;if(t>s.default.NO_USAGE){n={customClasses:"downloadPopup",primaryBtn:!0,primaryBtnElement:"a",primaryBtnHref:"#",primaryBtnClasses:"downloadPreview",primaryBtnText:l.default.generic_download,secondaryBtn:!0};var o={hasIcon:"true",icon:"get_app",title:l.default.download_title,description:l.default.download_text.replace("<span>X</span>",t)};a=(0,r.default)({settings:o}),i.default.customPopup(n,a),1===t?v(e):h(e)}else i.default.toast("PERMISSIONS_DEPLETED","download","The publication cannot be downloaded"),v(e)}},v=function(e){$(e.currentTarget).addClass(o.default.menudrawer_info.permissionDisabled)},h=function(e){$(e.currentTarget).removeClass(o.default.menudrawer_info.permissionDisabled)},_=function(e){i.default.toast("TEMPORARY_ERROR","Download"),console.error("Error downloading this document, "+e.message)},b=function(e,t){var n;t&&i.default.closeAlert(),R?(w.singleFile(e),n=E(y.data("download-files-key"),y.data("doi"))):(w.multipleFiles(e),n=E(A.val())),d.default.trigger(d.default.eventTypes.DOWNLOAD,{customProperties:{eventTime:Date.now(),downloadedFormat:n}})};function E(e,t){var a,i=n.default.customConfig.epubActions.download.doiMappingDownloadFiles,o=n.default.customConfig.epubActions.download.files;return i&&i.hasOwnProperty(t)&&i[t].fileList&&i[t].fileList.hasOwnProperty(e)?a=i[t].fileList[e].shortCode:o&&o.hasOwnProperty(e)&&(a=o[e].shortCode),a}var y,A,R=!0,w={checkPermission:g,manageDownload:function(e,t){if(u=!1,f=y=e,c=s.default.accessPermissionConfig(y,"left"),y.data("single-download")&&(f=$(o.default.menudrawer_info.download_list)),a.default.isOffline()&&y.data("single-download")?i.default.toast("OFFLINE",l.default.download_offline):n.default.customConfig.readOnlyMode&&y.data("single-download")?i.default.toast("READ_ONLY_MODE","Download","",""):c.isNoAccess?(EREADER.utils.isMobile()||EREADER.utils.isMobileHeight())&&y.data("single-download")?i.default.toast("FREE_ACCESS","download"," format","",c):i.default.tip("FREE_ACCESS_TIP","download"," format",c):f.hasClass(o.default.menudrawer_info.not_resolved_yet)?i.default.popup("TEMPORARY_ERROR_ALTER","Download publication"):f.hasClass(o.default.menudrawer_info.could_not_resolve)?i.default.popup("SERIOUS_ERROR","Download publication"):f.hasClass(o.default.menudrawer_info.disable_by_default)||f.hasClass(o.default.menudrawer_info.disabled)?i.default.toast("TEMPORARY_ERROR","Download"):u=y.data("single-download"),u){R=y.data("single-download");var r=y.data("doi");if(R){t.preventDefault();var d=e.attr("data-download-files-key");g(t,d,r)}else 0!==(A=$("#download-dialog").find("input[name='download-format']:checked")).length?g(t,A.val(),r):(t.preventDefault(),i.default.customPopup({appendTarget:$(o.default.menudrawer_info.download_list+" .formError"),position:"form",customClasses:"dark",preset:"fail"},l.default.download_no_option_selected))}else t.preventDefault();var u,f,c},singleFile:function(e){var t=y.data("download-files-key");if(void 0!==t&&0!==t.length){var a,o=y.data("doi"),r=n.default.customConfig.epubActions.download.doiMappingDownloadFiles,s=n.default.customConfig.epubActions.download.files;if(r&&r.hasOwnProperty(o)?a=r[o].fileList[t].url:s&&s.hasOwnProperty(t)&&(a=s[t].url),void 0!==a){if(n.default.customConfig.adsInclusionEnabled&&(a=w.appendCampaignsToUrl(a)),EREADER.utils.isIosDevice()||EREADER.utils.isSafari())return window.location.assign(a);setTimeout((function(e){window.open(a)}),0)}else e.preventDefault(),i.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Download error: No URL was found")}else i.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Error opening file. No URL specified.")},multipleFiles:function(e){var t=n.default.customConfig.epubActions.download.files[A.val()];if(t&&t.url){if(n.default.customConfig.adsInclusionEnabled&&(t.url=w.appendCampaignsToUrl(t.url)),EREADER.utils.isIosDevice()||EREADER.utils.isSafari())return window.location.assign(t.url);setTimeout((function(e){window.open(url)}),0)}else e.preventDefault(),i.default.toast("SORRY"),LIT.Reader.LogEnabled&&console.debug("Download error: No URL was found")},initDownloadHandlers:function(){$(document).on("click",".downloadPreview",(function(e){e.preventDefault(),b(e,!0)})),$(document).on("click",".downloadRetry",(function(e){g(e)}))},dropdownHandlers:function(){var e=$(o.default.navbar_info.navbarDownload),t=e.hasClass(o.default.menudrawer_info.permissionDisabled)||e.hasClass(o.default.menudrawer_info.not_resolved_yet)||e.hasClass(o.default.menudrawer_info.could_not_resolve),a=n.default.customConfig.epubActions.download,i=!$.isEmptyObject(a)&&(a.files&&Object.keys(a.files).length>1||a.doiMappingDownloadFiles&&Object.keys(a.doiMappingDownloadFiles).length>1);e.find(".dropdown-trigger").on("dropdown:open",(function(n){!window.READER_OFFLINE&&!t||i||e.hasClass(o.default.menudrawer_info.permissionDisabled)&&(n.preventDefault(),w.checkPermission())}))},appendCampaignsToUrl:function(e){if(u.default.isPDF()){var t=(0,f.getDisplayedCampaigns)();if(t&&t.length>0){var n=e.includes("?")?"&campaigns=":"?campaigns=";e=e+n+encodeURIComponent(JSON.stringify(t))}}return e}};w.initDownloadHandlers();var T=w;t.default=T}.apply(t,a))||(e.exports=i)},53880:function(e,t,n){var a,i;n(92222),n(57327),n(69826),n(89554),n(91038),n(26699),n(66992),n(21249),n(47042),n(2707),n(83710),n(68309),n(51532),n(41539),n(88674),n(39714),n(32023),n(78783),n(29254),n(54747),n(33948),n(32564),a=[t,n(31924),n(75190),n(32033),n(93950),n(4105),n(69414),n(46853),n(80879),n(613),n(41930),n(35668),n(30331),n(96007),n(17991),n(91710),n(30086)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v,h){"use strict";var _,b,E;function y(e){return e&&e.__esModule?e:{default:e}}function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=y(n),a=y(a),i=y(i),o=y(o),r=y(r),s=y(s),l=y(l),d=y(d),u=y(u),f=y(f),c=y(c),p=y(p),g=y(g),m=y(m),v=y(v),h=y(h);var w=n.default.customConfig.getFTRConfig,T={CITATION_ITEMS:null==w||null===(_=w.citationsConfig)||void 0===_?void 0:_.citationsUrl,CITATION_LINKS:null==w?void 0:w.citationLinksUrl,REFERENCES_ITEMS:null==w?void 0:w.referencesUrl,REFERENCES_LINKS:null==w?void 0:w.referencesLinksUrl};function C(e){var t=e.getBoundingClientRect(),n=e.offsetHeight,a=e.offsetWidth;return t.top>=-n&&t.left>=-a&&t.right<=(window.innerWidth||document.documentElement.clientWidth)+a&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)+n}function S(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}var D={itemPageSize:null==w||null===(b=w.citationsConfig)||void 0===b?void 0:b.pageSize,itemPage:0,linksPageSize:null==w?void 0:w.numberOfGetFTRLinks,linksPage:0,count:null==w||null===(E=w.citationsConfig)||void 0===E?void 0:E.citedCount,linksTargetClass:".CbLinks",getItemPage:function(e){return e?e.itemPage:D.itemPage},nextItemPage:function(e){e&&(e.itemPage++,O.updateCitedByDoiFTRMap(e)),D.itemPage++},getLinksPage:function(e){return e?e.linksPage:D.linksPage},nextLinksPage:function(e){e&&(e.linksPage++,O.updateCitedByDoiFTRMap(e)),D.linksPage++},getCount:function(e){return e?e.count:D.count},appendLinks:function(e,t){var n=$('.citedby[data-FTR-id="'.concat(e.id,'"]'));O.useDoiMapping&&(n=$(".links-panel__accordion-body:visible").find('.citedby[data-FTR-id="'.concat(e.id,'"]'))),n.find(".CbLinks").removeClass("getFTR--loading").html(t)},getFTRLinksData:function(e,t,n){if(!n){var a="";return e.doi&&e.url&&(a=e.url),{regularLink:{url:a=a||"#",label:e.label}}}return""},loadMoreItems:function(){var e=0,t=!1,n=!1,a=$("#citations-tab-pane"),i=void 0;if(O.useDoiMapping){var o=(a=$(".links-panel__accordion-body:visible")).parent().data("doi");i=O.citedByDoiFTRMap.get(o)}if(EREADER.utils.isMobile()?$('.submenu-visible [data-panel-mobile="cit"]').length:O.useDoiMapping?$("#citations-tab-pane").hasClass("active")&&a.length:$("#citations-tab-pane").hasClass("active")){var r=D.getLinksPage(i),s=D.getItemPage(i),l=D.getCount(i);e=r;var d=(r+1)*D.linksPageSize,u=(s+1)*D.itemPageSize,f=a.find(".getFTR--loading").not("[in-progress]");if(f.length&&d<u){var c=$(f[0]).parent().prev()[0],p=(EREADER.utils.isMobile()?$("[data-panel-mobile='cit'][data-links-panel-mobile='links-panel']"):$("[data-panel-desktop='cit'] ")).closest(".paddedPane").scrollTop();t=c&&(C(c)||c.offsetTop<p);var g=Math.floor(l/D.linksPageSize)-1;t&&e<=g&&(f.slice(0,D.linksPageSize).each((function(e,t){$(t).attr("in-progress","true")})),D.nextLinksPage(i),i?O.fetchDoiMappingCitedByItems(i,a):O.fetchCitedByLinks())}else if(u<l&&!(D.linksPageSize>=l)){var m=Math.floor(l/D.itemPageSize)-1,v=a.find(".citedby:last-child").not("[in-progress]");v.length&&(v.attr("in-progress","true"),n=C(v[0]),n&&e<=m&&(D.nextItemPage(i),i?O.fetchCitedByLinksForDoiMapping(i,a):O.fetchCitedByItems()))}}}},P={linksPageSize:null==w?void 0:w.numberOfGetFTRLinks,linksPage:0,numOfItems:0,linksTargetClass:".reference-links",getLinksPage:function(e){return e?e.linksPage:P.linksPage},nextLinksPage:function(e){e&&(e.linksPage++,O.updateReferencesByDoiFTRMap(e)),P.linksPage++},getNumOfItems:function(e){return e?e.numOfItems:P.numOfItems},appendLinks:function(e,t){var n=t.replaceAll(",",""),a=$("#".concat(e.id));O.useDoiMapping&&(a=$(".links-panel__accordion-body:visible").find("#".concat(e.id))),a.find(".reference-links").removeClass("getFTR--loading").attr("data-FTR-id",e.id).html(n)},getFTRLinksData:function(e,t,n){var a=e.links,i="";return a.map((function(e){var n="",a="",o=!1;if(e.urlDetails){if(e.urlDetails.imagePath?o=!0:i=e.urlDetails.text,a=e.urlDetails.link?S(e.urlDetails.link):"#",void 0!==(n={openUrlLink:{image:o,imagePath:e.urlDetails.imagePath,url:a,text:i,title:e.urlDetails.title,position:"top"}}))return n}else if(e.url&&(t&&"CROSSREF"!==e.type&&"SYSTEM"!==e.type&&"SYSTEM-D"!==e.type||!t)){if(void 0!==(n={regularLink:{url:S(e.url),label:e.label}}))return n}})).filter((function(e){return void 0!==e}))},loadMoreItems:function(){var e=0,t=0,n=0,a=!1,i=void 0,o=$("#references-tab-pane");if(O.useDoiMapping){var r=(o=$(".links-panel__accordion-body:visible")).parent().data("doi");i=O.referencesByDoiFTRMap.get(r)}if(EREADER.utils.isMobile()?$('.submenu-visible [data-panel-mobile="ref"]').length:O.useDoiMapping?$("#references-tab-pane").hasClass("active")&&o.length:$("#references-tab-pane").hasClass("active")){var s=P.getLinksPage(i),l=P.getNumOfItems(i);e=s,t=P.linksPageSize,n=Math.floor(l/t)-1;var d=o.find(".getFTR--loading").not("[in-progress]");if(d.length){var u=$(d[0]).parent().prev()[0],f=(EREADER.utils.isMobile()?$("[data-panel-mobile='ref'][data-links-panel-mobile='links-panel']"):$("[data-panel-desktop='ref'] ")).closest(".paddedPane").scrollTop();a=u&&(C(u)||u.offsetTop<f),e<=n&&a&&(d.slice(0,t).each((function(e,t){$(t).attr("in-progress","true")})),P.nextLinksPage(i),i?O.fetchReferencesLinksForDoiMapping(i,o):O.fetchReferencesLinks())}}}};var O={useDoiMapping:!1,citedByDoiFTRMap:new Map,referencesByDoiFTRMap:new Map,windowResized:!1,init:function(){O.useDoiMapping=m.default.contentActions.doiMappingModeActions.isInitialized(),this.isGetFTREnabled()&&(O.useDoiMapping||(o.default.init(),EREADER.utils.displaySpinner(o.default.$el),this.fetchReferencesItems()),$(window).on("resize",(function(){O.windowResized=!1})))},isGetFTREnabled:function(){return null==w?void 0:w.enabled},appendReferencesItems:function(e,t){var n=t||o.default.$el.find(".tabbedPane");e.forEach((function(e,t){e.index=t+1})),n.html((0,l.default)({getFTRItems:e,isOffline:h.default.isOffline()})),s.default.scrollingTab(o.default.$el),v.default.init()},appendCitationsItems:function(e,t,n){var a=n||e.find(".tabbedPane"),i=(0,d.default)({getFTRCitationsItems:t}),o=a.find(".citedby-list:last-child");o.length>0?o.after(i):a.html(i),s.default.scrollingTab(e)},appendCitationLinks:function(e){O.appendGeTFTRLinks(e,D)},appendReferencesLinks:function(e){O.appendGeTFTRLinks(e,P)},appendGeTFTRLinks:function(e,t){O.windowResized&&($("ul.getFTR").each((function(e,t){var n=$(t).find(".dropdown-widget");n.find("li.getFTR__item").each((function(e,n){t.append(n)})),n.remove()})),$("ul.getFTR").each((function(e,t){var n=$(t).find("li.getFTR__item");n.length&&O.getFTRDropdownMenu(n)})),O.windowResized=!1);var n,a=O,i=t.linksTargetClass;e.forEach((function(e){if(e.source)n=e.url;else{var o,r=A(null==e?void 0:e.links);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=(null==s?void 0:s.type)||(null==s?void 0:s.source);if("crossref"===(null==l?void 0:l.toLowerCase())&&null!=s&&s.url){n=s.url;break}}}catch(e){r.e(e)}finally{r.f()}}n=S(n);var d=e.entitlement||!w.crossrefEnabled&&e.doi,f=a.getFTRButtonData(e,d,n),c=t.getFTRLinksData(e,d,f),p=(0,u.default)({FTRButtonData:f,links:c});t.appendLinks(e,p);var g=$("".concat(i," li:not(li[widthChecked])"));g.length&&a.getFTRDropdownMenu(g)})),v.default.initRefAndCitEvents()},loadMoreItems:function(e){var t=$("[data-panel-mobile='ref'][data-links-panel-mobile='links-panel'], [data-panel-mobile='cit'][data-links-panel-mobile='links-panel']").parent();e.addEventListener("scroll",(function(){setTimeout((function(){P.loadMoreItems(e),D.loadMoreItems(e)}),1e3)})),t.on("scroll",(function(){setTimeout((function(){P.loadMoreItems(e),D.loadMoreItems(e)}),1e3)}))},getFTRDropdownMenu:function(e){var t=0,n=!1,i=e[0],o=[],r=320;if(EREADER.utils.isMobile()?r=300:(EREADER.utils.isMobileHeight()||EREADER.utils.isTablet())&&(r=220),i.parentElement.style.width="1000px",e.each((function(e,a){t+=a.offsetWidth,a.setAttribute("widthChecked",""),(t>r||n)&&(o.push({title:a.innerText.toLowerCase(),template:a.outerHTML}),a.remove(),n=!0)})),i.parentElement.removeAttribute("style"),n){o=this.sortLinks(o);var s={trigger:{ariaLabel:"view more links",classList:"btn--cta_rounded",icon:'<span class="icon material-icons">more_horiz</span>',hasPopup:"true",title:a.default.more,tooltip:"top"},content:{ariaLabel:"more links",classList:"dropdown-list medium dropdown-links",content:(0,c.default)({content:(0,p.default)({items:o})})}},l=(0,f.default)(s);$(e[0]).parent().find("li:last-child").after(l),$(".dropdown-widget .getFTR__link[data-tooltip-position]").attr("data-tooltip-position","left"),g.default.init()}},sortLinks:function(e){return e.sort((function(e,t){return e.title.toUpperCase()>t.title.toUpperCase()?1:0})),e},getFTRButtonData:function(e,t,a){if(!t)return"";var i=e.entitlement,o="",r="",s=!1,l=!0,d=null==i?void 0:i.tooltip,u=null!=i&&i.URL?null==i?void 0:i.URL:"#",f="btn",c=null!=i&&i.label?i.label:"View",p=null==i?void 0:i.label,g=null==i?void 0:i.type;return void 0===i?(u=a,f="no-access"):"internal"===i.location?"yes"===i.entitled?(o=n.default.getFTR_full_text_version,r="Full text version",s=!0):"no"===i.entitled&&"av"===i.type?(o=n.default.getFTR_alternative_version,r="Alternative version",s=!0):"no"===i.entitled?f="no-access":l=!1:"external"===i.location&&("yes"===i.entitled||"maybe"===i.entitled?(o=n.default.getFTR_full_text_version,r="Full text version",s=!0):"no"===i.entitled&&"av"===i.type?(o=n.default.getFTR_alternative_version,r="Alternative version",s=!0):"no"===i.entitled?f="no-access":l=!1),{type:g,isButtonVisible:l,buttonURL:u,tooltipText:d,position:"top",getFTRButtonIcon:o,getFTRButtonIconAlt:r,isGetFTRIconVisible:s,label:c,classes:f,ariaLabel:p}},fetchItems:function(e,t,n){return new Promise((function(a,o){var r=n||e.$el;EREADER.utils.getData(t).done((function(t){w.useDoiMapping||0!==r.find(".tabbedPane").length||r.html('<div class="tabbedPane"></div>'),t.length?a({$tab:r,json:t}):i.default.handleErrorLoadingData(r,e.emptyString,e.icon,"",e.type)})).fail((function(t){console.error("something went wrong ..."),404===t.status?i.default.handleErrorLoadingData(r,e.emptyString,e.icon,"",e.type):i.default.handleErrorLoadingData(r,e.errorString,"remove_from_queue","","display"),o(t)}))}))},handleReferencesItemsResponse:function(e,t,n,a){O.useDoiMapping?(a.numOfItems=t.length,O.updateReferencesByDoiFTRMap(a)):P.numOfItems=t.length,O.appendReferencesItems(t,n)},fetchFTRLinks:function(e,t,n){EREADER.utils.getData(e).done((function(e){t(e)})).fail((function(e){n()}))},getApiUrl:function(e,t,n){return"".concat(e).concat(e.includes("?")?"&":"?","page=").concat(t,"&pageSize=").concat(n)},fetchReferencesItems:function(){var e=this;return new Promise((function(t,n){e.fetchItems(o.default,T.REFERENCES_ITEMS).then((function(n){e.handleReferencesItemsResponse(n.$tab,n.json),t()})).catch((function(e){n(e)}))}))},fetchDoiMappingReferencesItems:function(e,t){var n=this;return new Promise((function(a,i){n.fetchItems(o.default,e.referencesUrl,t).then((function(i){n.handleReferencesItemsResponse(i.$tab,i.json,t,e),a()})).catch((function(e){i(e)}))}))},fetchReferencesLinks:function(){O.fetchFTRLinks(O.getApiUrl(T.REFERENCES_LINKS,P.linksPage,P.linksPageSize),O.appendReferencesLinks,(function(){O.handleLinksFail(P.linksPage,P.linksPageSize)}))},fetchCitedByItems:function(){var e=O;return new Promise((function(t,n){var a=e.getApiUrl(T.CITATION_ITEMS,D.itemPage,D.itemPageSize);e.fetchItems(r.default,a).then((function(n){e.appendCitationsItems(n.$tab,n.json),t()})).catch((function(e){n(e)}))}))},fetchDoiMappingCitedByItems:function(e,t){var n=O;return new Promise((function(a,i){var o=n.getApiUrl(e.citationsUrl,e.itemPage,D.itemPageSize);n.fetchItems(r.default,o,t).then((function(e){n.appendCitationsItems(e.$tab,e.json,t),a()})).catch((function(e){i(e)}))}))},fetchCitedByLinks:function(){O.fetchFTRLinks(O.getApiUrl(T.CITATION_LINKS,D.linksPage,D.linksPageSize),O.appendCitationLinks,(function(){O.handleLinksFail(D.linksPage,D.linksPageSize)}))},handleLinksFail:function(e,t,n){var a=e*t,i=a+t;(n||$(".paddedPane .tab-content .active")).find("ul.getFTR").slice(a,i).removeClass("getFTR--loading"),console.error("something went wrong getting the links ...")},fetchReferencesForDoiMapping:function(e,t){if(!O.referencesByDoiFTRMap.get(e)){var n=m.default.contentActions.doiMappingModeActions.getGetFTRConfigByDoi(e),a={doi:e,numOfItems:0,referencesUrl:n.referencesUrl,referencesLinksUrl:n.referencesLinksUrl,linksPage:0};O.referencesByDoiFTRMap.set(e,a)}var i=O.referencesByDoiFTRMap.get(e);O.fetchDoiMappingReferencesItems(i,t).then((function(){O.fetchReferencesLinksForDoiMapping(i,t)}))},fetchCitedByForDoiMapping:function(e,t){if(!O.citedByDoiFTRMap.get(e)){var n=m.default.contentActions.doiMappingModeActions.getGetFTRConfigByDoi(e),a={doi:e,citationLinksUrl:n.citationLinksUrl,citationsUrl:n.citationsUrl,citedCount:n.citedCount,itemPage:0,linksPage:0};O.citedByDoiFTRMap.set(e,a)}var i=O.citedByDoiFTRMap.get(e);O.fetchDoiMappingCitedByItems(i,t).then((function(){O.fetchCitedByLinksForDoiMapping(i,t)}))},fetchCitedByLinksForDoiMapping:function(e,t){O.fetchFTRLinks(O.getApiUrl(e.citationLinksUrl,e.linksPage,D.linksPageSize),O.appendCitationLinks,(function(){O.handleLinksFail(e.linksPage,D.linksPageSize,t)}))},fetchReferencesLinksForDoiMapping:function(e,t){O.fetchFTRLinks(O.getApiUrl(e.referencesLinksUrl,e.linksPage,P.linksPageSize),O.appendReferencesLinks,(function(){O.handleLinksFail(e.linksPage,P.linksPageSize,t)}))},updateCitedByDoiFTRMap:function(e){O.citedByDoiFTRMap.set(e.doi,e)},updateReferencesByDoiFTRMap:function(e){O.referencesByDoiFTRMap.set(e.doi,e)}},M=O;t.default=M}.apply(t,a))||(e.exports=i)},3264:function(e,t,n){var a,i,o=n(41999);n(57327),n(69826),n(83710),n(68309),n(41539),n(74916),n(39714),n(15306),n(32564),a=[t,n(75190),n(31924),n(54262),n(17475),n(30086),n(41257),n(43549),n(74584),n(99731),n(77803),n(21835),n(88450),n(38749),n(93274),n(27537),n(28478),n(54998),n(87958),n(17991),n(94980)],void 0===(i=function(e,n,a,i,r,s,l,d,u,f,c,p,g,m,v,h,_,b,E,y,A){"use strict";function R(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=R(n),a=R(a),i=R(i),r=R(r),s=R(s),l=R(l),d=R(d),u=R(u),f=R(f),c=R(c),p=R(p),g=R(g),m=R(m),v=R(v),h=R(h),_=R(_),E=R(E),y=R(y),A=R(A);var w=!1,T=$("body"),C=function(){var e=$(".atyLoader");0!==e.length&&(e.fadeOut().remove(),$("#scrolled-content-frame").removeClass("overflowHidden"),$(".scrollHere").removeClass("scrollHere"),$(".search .results > div").length>0&&f.default.buttons.enable())},S={events:{control:function(){"undefined"!=typeof EREADER&&(S.events.initEreaderFunctions(),S.events.initCustomHandlers(),S.events.contentDocumentLoaded(),S.events.contentDocumentUnLoaded(),S.events.contentDocumentLoadStart(),S.events.paginationChanged(),S.events.readerViewCreated(),S.events.onDropdownClosed())},preventCopying:function(){function e(e){e.stopPropagation(),c.default.toast("OFFLINE","","",n.default.copying_not_allowed),e.preventDefault()}y.default.contentActions.doiMappingModeActions.isInitialized()?v.default.fetchPermissions():$(document).on("copy",(function(t){e(t)})),y.default.contentActions.addContentEventListener("copy",(function(t){if(y.default.contentActions.doiMappingModeActions.isInitialized()){var n=y.default.contentActions.doiMappingModeActions.getCurrentDoi();void 0!==n&&(v.default.checkCopyPermissions(v.default.checkPermissionUsageByDoi(n))||e(t))}else e(t)}))},initEreaderFunctions:function(){$(window).on("copy",(function(e){!function(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("cut")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(t)}}(window.getSelection().toString().replace(/[\n\r]+/g,""))})),s.default.isOffline()?S.events.preventCopying():a.default.customConfig.restrictCopying&&v.default.isCopyingAllowed().then((function(e){e||S.events.preventCopying()})),EREADER.on(E.default.UPDATE_NAVBAR,(function(e){l.default.update()})),EREADER.on(E.default.UPDATE_TIMER_PREVIEW,(function(e){A.default.updateTimerTemplate(e)})),EREADER.on(E.default.CONSUME_PERMISSION,(function(e,t,n,a){v.default.consumePermissions({usageType:t,usageAmount:1,doi:e}).done((function(e){e.success?n():a()})).fail((function(e){a(e)}))})),EREADER.printButtonClicked=!1,EREADER.replaceByEreaderSearch=function(e){!e.ctrlKey&&!e.metaKey||70!==e.keyCode||EREADER.utils.isMaterialViewerOpen()||(document.activeElement.blur(),e.preventDefault(),$(g.default.search_info.search_trigger).trigger("click"))},EREADER.transpileContent=function(){var e=$("[data-panel-desktop]");$("[data-panel-mobile]").each((function(){var t=$(this),n=t.data("vport"),a=t.data("panelMobile"),i=y.default.contentActions.shouldGetFiguresFromContent();if("materials"!==a||!s.default.isOffline()||i){var o=e.filter("[data-panel-desktop='"+a+"']");$(window).width()<=n?o.children().detach().appendTo(t):t.children().detach().appendTo(o)}}))};T.height(),T.width();var e=T.height()+T.width();EREADER.isTouchDeviceKeyboardTriggered=function(){if(EREADER.utils.isTouchDevice()){var t=$(document.activeElement)[0].tagName,n=T.height()+T.width();if("INPUT"===t&&e>n)return!0;if(m.default.isZoomed()&&e===n)return!0}return!1},EREADER.throttledHorizontal=o.debounce(p.default.scroll.horizontal,150);var t=$("#reading-area");y.default.contentActions.addContentEventListener("mousewheel DOMMouseScroll",(function(e){EREADER.throttledHorizontal(e,3)})),t.on("mousewheel DOMMouseScroll",(function(e){EREADER.throttledHorizontal(e,3)})),window.addEventListener("orientationchange",(function(){setTimeout((function(){y.default.displayActions.isPDF()&&m.default.fitWidth()}),1)}))},initCustomHandlers:function(){T.on("focus",".btn, .page-switch-overlay-icon",(function(e){setTimeout((function(){$(this).blur();var e=$("body .tooltip.in");e.length>0&&(e.removeClass("in"),e.one("bsTransitionEnd",(function(){$(this).remove()})))}),500)})),$(document).on("click",(function(e){0===e.clientX&&0===e.clientY||(EREADER.shouldFocusContent=!0)})),$(document).on("keypress",(function(e){13!==e.keyCode&&32!==e.keyCode||(EREADER.shouldFocusContent=!1)}))},contentDocumentLoaded:function(){EREADER.on(E.default.CONTENT_LOADED,(function(){u.default.isZoomButtonsDisplayed()&&m.default.enableZoom(),C(),EREADER.emit(E.default.UPDATE_NAVBAR),d.default.scrollTocIntoView()}))},contentDocumentUnLoaded:function(){EREADER.on(E.default.CONTENT_DOCUMENT_UNLOADED,(function(){C()}))},contentDocumentLoadStart:function(){EREADER.on(E.default.CONTENT_LOAD_START,(function(){0===$(".atyLoader").length&&(s.default.isOffline()||u.default.shouldUseLoader()&&($(g.default.reader_info.reading_area).append((0,_.default)({strings:n.default})),$("#scrolled-content-frame").addClass("overflowHidden"))),EREADER.utils.isTouchDevice()&&!w&&(p.default.touch.addListeners(),w=!0)}))},paginationChanged:function(){EREADER.on(E.default.PAGINATION_CHANGED,(function(){EREADER.emit(E.default.UPDATE_NAVBAR),u.default.toggleDisplayFormat()}))},readerViewCreated:function(){EREADER.on(E.default.READER_VIEW_CREATED,(function(){EREADER.utils.isTouchDevice()&&T.addClass("isTouchDevice"),EREADER.utils.isIosDevice()&&T.addClass("iOS")}))},onDropdownClosed:function(){$(g.default.dropdown_info.trigger).on("dropdown:closed",(function(e){EREADER.utils.scrolledContentFocus()}))}},readerUI:{init:function(){h.default.init()},afterSettingsInit:function(){l.default.init(),i.default.setup()},loadPrivate:function(){!function(){var e=a.default.customConfig.epubActions;if(r.default.isFixedLayout="epub"!==a.default.customConfig.format,void 0!==e){var t=e.download;if(!a.default.customConfig.doiMappingConfig.enabled&&t&&t.files){var n=0,i="";$.each(t.files,(function(e,t){t.available&&(n++,i=e)})),r.default.download_available=0!==n,1===n&&(r.default.download_single=!0,r.default.download_files_key=i,r.default.download_files_size=t.files[i].size,r.default.download_files_type=t.files[i].name,r.default.download_files_url=t.files[i].url)}}}(),l.default.loadPanel(n.default.i18n_toolbar);var e=$(g.default.menudrawer_info.user_panel).find("a");e.length>0&&e.on("click",(function(e){s.default.isOffline()&&(e.preventDefault(),c.default.toast("OFFLINE",$(this).html()))}))},onLoadEbook:function(e){l.default.afterPublicationLoad(),this.updateDocumentTitle(a.default.customConfig.title),EREADER.transpileContent(),EREADER.emit(E.default.PAGINATION_CHANGED)},updateDocumentTitle:function(e){0===document.title.length&&e&&(document.title=e)}}},D=S;t.default=D}.apply(t,a))||(e.exports=i)},27537:function(e,t,n){var a,i;n(47941),a=[t,n(77803),n(30086),n(87958),n(31924),n(93274)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={consoleMessages:{notFound:"There was an error while trying to open this document.",unauthorized:"Access to this content has been lost.",serviceNotAvailable:" There was an error while trying to open this document.",offlineError:"Offline Error",contentNotAvailable:"-9 - This content is no longer available offline.",generalError:"There was an error while trying to open this document."},status_code:{NOT_FOUND:404,UNAUTHORIZED:401,SERVICE_NOT_AVAILABLE:503,CONTENT_NOT_AVAILABLE:-9},events:i.default.FILE_LOAD_ERROR+" "+i.default.DISPLAY_CONTENT_ERROR+" "+i.default.OFFLINE_LOAD_ERROR};function d(e,t){var i="";if(function(e){return e.status===l.status_code.NOT_FOUND}(t))n.default.fullpage("404"),i=l.consoleMessages.notFound;else if(function(e){return e.status===l.status_code.SERVICE_NOT_AVAILABLE}(t))n.default.fullpage("503"),i=l.consoleMessages.unauthorized;else if(function(e){return e.status===l.status_code.UNAUTHORIZED}(t))n.default.fullpage("401",{autoreload:!0}),i=l.consoleMessages.serviceNotAvailable;else if(function(e){return e.status===l.status_code.CONTENT_NOT_AVAILABLE}(t))n.default.fullpage("-9",{goToLibrary:!0}),!0,i=l.consoleMessages.offlineError;else if(EREADER.utils.isOffline())a.default.setFailedRequest(t.failed_request),n.default.toast("OFFLINE","fetch new content"),i=l.consoleMessages.contentNotAvailable;else{var s,d,u=function(){n.default.fullpage("GENERIC")},f=null===(s=o.default.customConfig.epubActions.download)||void 0===s?void 0:s.files,c=o.default.customConfig.format,p=f&&(null===(d=f[c])||void 0===d?void 0:d.url);if(o.default.customConfig.doiMappingConfig.enabled){var g=o.default.customConfig.epubActions.download.doiMappingDownloadFiles,m=o.default.customConfig.doi;if(g&&g.hasOwnProperty(m)&&g[m].fileList){var v=g[m].fileList,h=v[Object.keys(v)[0]];c=h&&(null==h?void 0:h.shortCode)||c,p=h&&(null==h?void 0:h.url)||p}o.default.customConfig.doiMappingConfig.enabled=!1}r.default.fetchPermissions({reqType:r.default.PERMISSION_DOWNLOAD},c).done((function(e){r.default.canUsePermissions(e).done((function(e){var t=e!==r.default.NO_USAGE&&e!==r.default.PERMISSION_NOT_AVAILABLE;if(p&&t){var a='<a target="_blank" href='.concat(p,' class="error-download primary btn--cta__light printPreview">Download</a>');n.default.fullpage("GENERIC_DOWNLOAD",void 0,a)}else u()})).fail((function(){u()}))})).fail((function(){u()})),i=l.consoleMessages.generalError}LIT.Reader.LogEnabled&&console.debug(i,e,t)}var u={init:function(){$(window).one(l.events,d)}};t.default=u}.apply(t,a))||(e.exports=i)},31276:function(e,t,n){var a,i;a=[t,n(88450),n(75190),n(30086),n(77803),n(60588),n(38749)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var d={offline:function(){$(".citation_btn").on("click",(function(e){i.default.isOffline()&&(e.preventDefault(),o.default.toast("OFFLINE",a.default.offlineCitation))})),$(n.default.fullSite_info.fullSite_class).on("click",(function(e){i.default.isOffline()&&(e.preventDefault(),o.default.toast("OFFLINE",a.default.offlineFullSite))}))},keyboard:function(){if($(n.default.menudrawer_info.offline_documents).length>0){Keyboard.on(Keyboard.SwitchToLibrary,"reader",(function(){}))}0!==$(n.default.paging_info.paging_class)&&Keyboard.on(Keyboard.Paging,"reader",(function(){$(n.default.paging_info.paging_class+" "+n.default.dropdown_info.trigger).trigger("click")})),0!==$(".clipboard").length&&Keyboard.on(Keyboard.ShareList,"reader",(function(){$("#shareTrigger").trigger("click")})),0!==$(n.default.narrator_info.narrator_class).length&&Keyboard.on(Keyboard.ShowNarrator,"reader",(function(){$(n.default.narrator_info.narrator_class+" "+n.default.dropdown_info.trigger).trigger("click")})),0!==$(n.default.fullSite_info.fullSite_class).length&&Keyboard.on(Keyboard.FullSite,"reader",(function(){$(n.default.fullSite_info.fullSite_class)[0].click()})),0!==$(n.default.cite_info.cite_class).length&&Keyboard.on(Keyboard.Cite,"reader",(function(){$(n.default.cite_info.cite_class)[0].click()})),0!==$(".navbar-center #formatsTrigger").length&&Keyboard.on(Keyboard.SwitchFormat,"reader",(function(){$(".navbar-center #formatsTrigger")[0].click()})),0!==$(".navbar-center #readingOptionsBtn").length&&Keyboard.on(Keyboard.readingOptions,"reader",(function(){$(".navbar-center #readingOptionsBtn")[0].click()})),$(document).on("keydown",(function(e){"Escape"===e.key&&$(".tooltip").tooltip("hide")})),$._data(document.body,"events").mouseout[0]=function(){},$(document).on("mouseout",".tooltip-inner",(function(){$(".tooltip").tooltip("hide")})),0!==$(n.default.menudrawer_info.offline_library).length&&Keyboard.on(Keyboard.SaveOffline,"reader",(function(){$(n.default.menudrawer_info.offline_library+" "+n.default.dropdown_info.trigger).trigger("click")})),0!==$(n.default.search_info.search_class)&&(Keyboard.on(Keyboard.ShowSearch,"reader",(function(){$(n.default.search_info.search_trigger).trigger("click")})),$(window).on("keydown",(function(e){EREADER.replaceByEreaderSearch(e)}))),EREADER.utils.isTouchDevice()||Keyboard.on(Keyboard.DownloadList,"reader",(function(){$(".navbar-download > button").trigger("click"),$("a.navbar-download").trigger("click")}));var e=$("#leftPanelbtn");e.length&&Keyboard.on(Keyboard.ToggleLeftPanel,"reader",(function(){e.trigger("click")}));var t=$(n.default.right_panel_info.close_btn);t.length&&Keyboard.on(Keyboard.ToggleRightPanel,"reader",(function(){t.trigger("click")})),r.default.initKeyboardEvents(),s.default.initKeyboardEvents()}};t.default=d}.apply(t,a))||(e.exports=i)},21835:function(e,t,n){var a,i,o=n(41999);a=[t,n(74584),n(94980),n(15553),n(60588),n(17991)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function d(){i.default.toTransparent(),a.default.toTransparent()}function u(){i.default.toOpaque(),a.default.toOpaque()}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var f=function(){return d(),r.default.goRight(),!1},c=function(){return u(),r.default.goLeft(),!1},p={clientX:0,clientY:0},g=!1,m=!1,v=!1,h=!1,_=!1,b=-1,E=-1,y=function(e){var t=n.default.isScrolling(),a=e.changedTouches[0].clientY-p.clientY,i=e.changedTouches[0].clientX-p.clientX,o=t?0:40,r={swipedRight:i>o,swipedLeft:i<-1*o,swipedUp:a<-1*o,swipedDown:a>o,horSwipe:!1,verSwipe:!1};return r.swipedRight&&r.swipedUp?Math.abs(i)>Math.abs(a)?r.swipedUp=!1:r.swipedRight=!1:r.swipedLeft&&r.swipedDown&&(Math.abs(i)>Math.abs(a)?r.swipedDown=!1:r.swipedLeft=!1),r.horSwipe=r.swipedLeft||r.swipedRight,r.verSwipe=r.swipedUp||r.swipedDown,r},A=function(e){var t=$(e.target).parents(".table-wrap"),n=!1,a=y(e),i={navigateNext:!1,navigatePrev:!1};t.length&&(t[0].scrollWidth>t[0].clientWidth||t[0].scrollHeight>t[0].clientHeight)&&(n=!0),n?function(e,t,n){var a=e[0].scrollWidth>e[0].clientWidth,i=e[0].scrollHeight>e[0].clientHeight,o=e.scrollLeft()+e.innerWidth()>=e[0].scrollWidth,r=0===e.scrollLeft(),s=e.scrollTop()+e.innerHeight()>=e[0].scrollHeight,l=0===e.scrollTop();m=b+e.innerWidth()>=e[0].scrollWidth,v=0===b,h=E+e.innerHeight()>=e[0].scrollHeight,_=0===E;var d=t.swipedRight&&r&&v||t.swipedDown&&l&&_||t.swipedRight&&!a||t.swipedDown&&!i;t.swipedLeft&&o&&m||t.swipedUp&&s&&h||t.swipedLeft&&!a||t.swipedUp&&!i?n.navigateNext=!0:d&&(n.navigatePrev=!0);b=e.scrollLeft(),E=e.scrollTop()}(t,a,i):a.swipedUp||a.swipedLeft?i.navigateNext=!0:(a.swipedDown||a.swipedRight)&&(i.navigatePrev=!0),i.navigateNext?f():i.navigatePrev&&c()};var R={lastXScroll:0,lastYScroll:0,isHorizontalScroll:function(){var e=$(s.default.displayActions.getBookScrollContainer()).scrollLeft(),t=R.lastXScroll;return R.lastXScroll=e,e!==t},isVerticalScroll:function(){var e=$(s.default.displayActions.getBookScrollContainer()).scrollTop(),t=R.lastYScroll;return R.lastYScroll=e,e!==t},horizontal:function(e){var t=!n.default.isScrolling()&&!s.default.displayActions.fixedShouldScroll(R.isHorizontalScroll(),R.isVerticalScroll()),a=$(e.target).parents(".table-wrap");a.length&&a[0].scrollHeight>a[0].clientHeight&&(t=!1),$("body").hasClass("noteRef_open")&&1===$(e.target).parents(".noteRef").length&&(t=!1);var i=e.originalEvent?e.originalEvent:e,o=(void 0!==i.wheelDelta?i.wheelDelta:-40*i.detail)<0;if(o?d():u(),t){if(!g&&n.default.isBookViewScrollable())return g=!0,!1;if(g=!1,o){if(n.default.isPDF()&&r.default.isLastPage())return;f()}else{if(n.default.isPDF()&&r.default.isFirstPage())return;c()}return s.default.displayActions.fixBookPagePosition(),!1}g=!1}};var w={touch:{addListeners:function(){var e=o.debounce((function(e){e=e.originalEvent,p.clientY=e.touches[0].clientY,p.clientX=e.touches[0].clientX}),50),t=o.debounce((function(e){var t=$("body"),a=t.hasClass("isTouchDevice"),i=t.hasClass("info-visible"),o=t.hasClass("settings-visible"),r=a&&!i&&!o;n.default.isScrolling()?function(e){var t=y(e);t.swipedUp?d():t.swipedDown&&u()}(e.originalEvent):r&&A(e.originalEvent)}),50);s.default.contentActions.addContentEventListener("touchstart.swipe",e),s.default.contentActions.addContentEventListener("touchend.swipe",t),$(document).on("touchstart.swipe",e),$(document).on("touchend.swipe",t)}},scroll:R,toTransparent:d,toOpaque:u,onFullscreenChange:function(e){document.addEventListener("fullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),document.addEventListener("MSFullscreenChange",e,!1),document.addEventListener("webkitfullscreenchange",e,!1)}};t.default=w}.apply(t,a))||(e.exports=i)},17914:function(e,t,n){var a,i,o=n(41999);n(21249),n(3843),n(83710),n(47941),a=[t,n(75190),n(31924),n(66327),n(26188),n(70371),n(28784),n(26977)],void 0===(i=function(e,n,a,i,r,s,l,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=u(n),a=u(a),i=u(i),r=u(r),s=u(s),l=u(l),d=u(d);var f=a.default.customConfig,c=f.profileConfig,p=i.default.returnTipOrder(),g=i.default.returnTipList(),m=i.default.returnSuppressedArray(),v=[],h=[],_=function(e){return r.default.searchInArray(h,e,"name")},b=function(){v=[],h=[],r.default._manageSuppressed(p,v,g,m),r.default._updateObjectList(v,g,h)},E={init:function(){},onLoadPublication:function(e){if(f.helpEnabled&&e){var t=h[_("readingOptions")].device;t.desktop.arrow.x-=68,t.desktop.panel.x-=68,t.tablet.arrow.x+=68,t.tablet.panel.x+=68}},renderMobileWidget:function(){if(f.helpEnabled)return b(),{tips:h}},renderDesktopWidget:function(){f.helpEnabled&&(b(),$("#app-container").after((0,d.default)({strings:n.default,tips:h,FAQLink:E.getFAQLink(a.default.customConfig.faqLinkData)})),function(){var e=Object.keys(f.switchFormats.available).length;if(!c.switchFormatsSuppressed&&e>1){var t=h[_("formats")].device;Object.keys(t).map((function(e){var n=t[e];n.target.element=".navbar-switch-formats",n.arrow.x=n.arrow.x+6,n.panel.x=n.panel.x+6}))}if(!c.linksSuppressed){var n=$(".l-panel--button-container button").length;n<5&&(h[_("linking")].device.desktop.panel.y+=42*(n-2))}if($(".save-offline-navbar").length>0){var a=h[_("saveOffline")].device;Object.keys(a).map((function(e){var t=a[e];t.target.element=".save-offline-navbar .offline",t.target.parentElement=".save-offline-navbar .navbarButton",t.arrow.x=-20,t.arrow.y=24,t.panel.x=-300,t.panel.y=-8})),h[_("saveOffline")].tipTarget=".save-offline-navbar"}}(),$(document).on("click",".startTour",o.debounce((function(){s.default.trigger(s.default.eventTypes.START_TOUR,{customProperties:{eventTime:Date.now()}}),E.closeHelpGuide(),l.default.tour.start(h,void 0)}))),$(document).on("click",".pauseTour, .closeTipGuide",o.debounce((function(){E.closeHelpGuide(),l.default.tour.pause()}))),$(document).on("click",".tourTip",o.debounce((function(){E.closeHelpGuide(),l.default.tour.start(h,$(this).data("tip"))}))),$(document).on("click",".closeHelpGuide",E.closeHelpGuide),$(document).on("click","#helpGuideTrigger",l.default.removeTipElements),$(document).on("click",".helpGuide .toggle-submenu",(function(){var e=42*h.length+75+79;$(this).parents(".drawerMenu").css("height","auto"),$(this).parents(".drawerMenu.submenu-visible").css("height",e+"px")})),$(window).resize((function(){E.closeHelpGuide(),$(".tip-overlay").isVisible()&&l.default.tour.pause()})))},closeHelpGuide:function(){$('#helpGuideTrigger[aria-expanded="true"]').trigger("click")},getFAQLink:function(e){var t={enabled:e.enabled,label:"Check the FAQ",url:e.url,title:""};return e.label&&(t.label=e.label),t.label.length>=26&&(t.title=t.label,t.label=t.label.substring(0,26)+"..."),t}},y=E;t.default=y}.apply(t,a))||(e.exports=i)},54050:function(e,t,n){var a,i,o=n(41999);a=[t,n(31924),n(66327),n(28784),n(76340),n(65723)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var d=n.default.customConfig,u={device:{},settings:{},init:function(){EREADER.utils.isTablet()||EREADER.utils.isMobile()||d.profileConfig.notesSuppressed||!d.annotationsConfig.enabled||!d.isScitrusHelpGuideEnabled||d.scitrusDecommissionMessageConfig.show||s.default.get("isAnnotationTipDisplayedBefore",(function(e){e||(u.create(),u.actions())}))},actions:function(){$(document).on("click",".closeOneTimeTour",o.debounce((function(){u.remove(!0)}))),$(document).on("click",".openLeftPanel",o.debounce((function(){$('[data-trigger="#notes"]').trigger("click")}))),$(document).on("click","#helpGuideTrigger",(function(e){u.remove()})),$(document).on("click",".l-panel--button-container [data-trigger]",(function(e){u.remove("#notes"===$(e.currentTarget).attr("data-trigger"))})),$(window).resize((function(){u.remove()}))},create:function(){var e=a.default.returnOneTimeItem();u.device=e.device.desktop,u.settings={tour:e,target:e.target,arrow:u.device.arrow.position},u.render()},render:function(){var e=$(u.device.target.element);$(u.settings.target||"#app-container").before((0,r.default)(u.settings)),i.default.position(e,u.device.panel,u.device.arrow),$('[data-trigger="#notes"]').addClass("tour-active")},remove:function(e){var t=$(".one-time-tour");0!==t.length&&(t.remove(),$('[data-trigger="#notes"]').removeClass("tour-active"),e&&s.default.put("isAnnotationTipDisplayedBefore",!0))}},f=u;t.default=f}.apply(t,a))||(e.exports=i)},28784:function(e,t,n){var a,i;n(3843),n(83710),n(68309),n(41539),n(88674),n(32564),a=[t,n(75190),n(26188),n(70371),n(91755)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={tour:{start:function(e,t){var i=t||"details",o=a.default.searchInArray(e,i,"name"),r=e.length,l=EREADER.utils.isTablet()?e[o].device.tablet:e[o].device.desktop;s.removeTipElements();var d={strings:n.default,totalTips:r,currentTip:o+1,tip:e[o],arrow:l.arrow.position};o+1<r&&$.extend(!0,d,{nextTip:e[o+1].name}),s.renderTip(d,l)},pause:function(){s.closeOtherTriggeredElements(),s.removeTipElements()}},renderTip:function(e,t){i.default.trigger(i.default.eventTypes.TOUR_TIP,{customProperties:{eventTime:Date.now()}});var n=$(t.target.element),a=$(e.tip.tipTarget||"#app-container"),r=t.target.parentElement?$(t.target.parentElement):$(t.target.element);function l(e){return new Promise((function(t){setTimeout(t,e)}))}s.closeOtherTriggeredElements(r),(t.target.trigger?(r.trigger("click").blur(),n[0].scrollIntoView(!0),l(400)):l(100)).then((function(){a.before((0,o.default)(e)),s.position(n,t.panel,t.arrow)}))},position:function(e,t,n){var a=e.offset(),i=$(".guidedTip"),o=$(".tipArrow");i[0].style.left=a.left+t.x+"px",i[0].style.top=a.top+t.y+"px",o[0].style.left=a.left+n.x+"px",o[0].style.top=a.top+n.y+"px"},closeOtherTriggeredElements:function(e){var t=$("body").hasClass("info-visible");void 0!==e?!e.parents("#reader-left-panel").length&&t&&$("#leftPanelbtn").trigger("click"):t&&$("#leftPanelbtn").trigger("click");$('#readingOptionsBtn[aria-expanded="true"]').trigger("click"),$('#settings_button[aria-expanded="true"]').trigger("click"),$('#save-offline-button[aria-expanded="true"]').trigger("click")},removeTipElements:function(){var e=$(".tip-container");0!==e.length&&e.remove()}},l=s;t.default=l}.apply(t,a))||(e.exports=i)},40086:function(e,t,n){var a,i;n(32564),a=[t,n(87958),n(54050),n(94980),n(30086),n(56647),n(70119),n(46512),n(53880),n(54262),n(31924),n(44242),n(31276),n(3264),n(17991)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m){"use strict";function v(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=v(n),a=v(a),i=v(i),o=v(o),r=v(r),s=v(s),l=v(l),d=v(d),u=v(u),f=v(f),c=v(c),p=v(p),g=v(g),m=v(m);var h={init:function(){EREADER.on(n.default.INITIAL_LOAD_COMPLETED,h.completed),f.default.customConfig.newUXEnabled?c.default.start():(EREADER.on(n.default.LOAD_PROGRESS,h.progress),$("#statusHeading").html("Preparing publication"))},progress:function(e,t){!isNaN(e)&&e&&(t||100!==e||(e=99),$(".coffee")[0].style.transform="translate(0,"+(100-e)+"%)")},completed:function(){EREADER.off(n.default.INITIAL_LOAD_COMPLETED,h.completed),f.default.customConfig.newUXEnabled||(EREADER.off(n.default.LOAD_PROGRESS,h.progress),h.progress(100,!0)),setTimeout((function(){l.default.init(),d.default.init(),a.default.init(),i.default.init(),o.default.initOfflineBanner(),f.default.customConfig.newUXEnabled?c.default.clear():($(".skeleton").removeClass("skeleton"),$(".cup-container .cup").fadeOut(300),$(".cup-container").fadeOut(500,"linear",(function(){this.remove(),$("#statusHeading").html("Publication loaded")}))),r.default.onShow(),s.default.getAllMaterials(),u.default.fetchMetis(),p.default.keyboard(),p.default.offline(),f.default.customConfig.restrictCopying&&m.default.contentActions.doiMappingModeActions.isInitialized()&&g.default.events.preventCopying()}),0)}},_=h;t.default=_}.apply(t,a))||(e.exports=i)},44242:function(e,t,n){var a,i;n(69826),n(69070),a=[t,n(72893),n(31924)],void 0===(i=function(e,n,a){"use strict";var i;function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e){9==e.keyCode&&e.preventDefault()}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=(i=a)&&i.__esModule?i:{default:i};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"start",value:function(){a.default.customConfig.newUXEnabled&&(document.addEventListener("keydown",r),e.showContentLoading(),e.tips.start(),e.removeSkeletons())}},{key:"addScreenOverlay",value:function(){var e=document.createElement("div");e.className="overlay-screen",$("body").append(e)}},{key:"removeScreenOverlay",value:function(){$(".overlay-screen").remove()}},{key:"hidePaging",value:function(){$(".dropdown-widget.paging").addClass("paging-loading"),$(".dropdown-widget.paging").find("button").css("opacity","0")}},{key:"showPaging",value:function(){$(".paging-loading").find("button").css("opacity","1"),$(".paging-loading").removeClass("paging-loading")}},{key:"removeSkeletons",value:function(){e.addScreenOverlay(),e.hidePaging(),$(".skeleton").addClass("loading-ux"),$(".skeleton").removeClass("skeleton")}},{key:"clear",value:function(){document.removeEventListener("keydown",r),e.showPaging(),e.tips.stop(),e.clearContentLoading(),e.removeScreenOverlay()}},{key:"showContentLoading",value:function(){$(".initial-loading .text-container").fadeOut(100),$(".loading-area").slideDown()}},{key:"clearContentLoading",value:function(){var e=$(".initial-loading, .loading-area, .content-loading");e.find(".loading-title, .loading-details, .loaded-message").fadeOut(200),e.fadeOut(400,"linear",(function(){$(this).remove()})),$("#reading-area").animate({opacity:1},200,(function(){$(".loading-ux").removeClass("loading-ux")}))}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}();t.default=s,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(s,"tips",new n.Tips)}.apply(t,a))||(e.exports=i)},72893:function(e,t,n){var a,i;n(57327),n(69826),n(26699),n(24812),n(9653),n(9494),n(69070),n(74916),n(32023),n(23123),n(32564),a=[t,n(75190),n(66327),n(31924)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),t.Tips=void 0,n=o(n),a=o(a),i=o(i);var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"messages",[]),this.pushMessages(),e._counter=this.getTipNumber()}return s(e,[{key:"counter",get:function(){var t=e._counter;return e._counter=this.validateTipNumber(t+1),t}}]),s(e,[{key:"isPdf",value:function(){var e,t=null===(e=i.default.customConfig.format)||void 0===e?void 0:e.toLowerCase();return"pdf"===t||"pdfplus"===t}},{key:"pushMessages",value:function(){i.default.customConfig.epubActions.shareAccess&&e.TIPS_KEYS.push("share_tip"),this.isPdf()?e.TIPS_KEYS.push("readingOptions_tip_pdf"):e.TIPS_KEYS.push("readingOptions_tip_epub");var t=a.default.returnSuppressedArray();e.TIPS_KEYS=e.TIPS_KEYS.filter((function(e,n){return!t.includes(e.split("_tip")[0])}));for(var o=0;o<e.TIPS_KEYS.length;o++)this.messages.push(n.default[e.TIPS_KEYS[o]])}},{key:"start",value:function(){this.showTips(),$(".tips-area").slideDown(),e.tipsInterval=setInterval(this.showTips.bind(this),7e3)}},{key:"stop",value:function(){clearInterval(e.tipsInterval);var t=$(".tips-area");t.find(".tip-title, .tip").fadeOut(200),t.fadeOut(400,"linear",(function(){$(this).remove()}))}},{key:"showTips",value:function(){var e=$(".tips-area .tip"),t=$(".tips-area"),n=document.createElement("p");n.className="tip",n.display="none",n.innerHTML=this.messages[this.counter],e.length?e.fadeOut(500,"swing",(function(){t.append(n),$(n).fadeIn(500,"swing"),e.remove()})):(t.append(n),$(n).fadeIn(500),e.remove())}},{key:"getTipNumber",value:function(){var t=window.localStorage.getItem(e.TIP_NUMBER_KEY);return t=t?Number.parseInt(t):0,t=this.validateTipNumber(t),window.localStorage.setItem(e.TIP_NUMBER_KEY,t+1),t}},{key:"validateTipNumber",value:function(t){return(!t||t>e.TIPS_KEYS.length-1||t<0)&&(t=0),t}}]),e}();t.Tips=d,l(d,"TIP_NUMBER_KEY","tipKey"),l(d,"TIPS_KEYS",["outline_tip","materials_tip","linking_tip","formats_tip","saveOffline_tip","help_tip"]),l(d,"_counter",0)}.apply(t,a))||(e.exports=i)},49565:function(e,t,n){var a,i;n(92222),n(69826),n(9653),n(61874),n(41539),n(88674),n(17727),a=[t,n(31924)],void 0===(i=function(e,n){"use strict";var a;function i(){var e;$(".logo-loading").removeClass("logo-loading"),!EREADER.utils.ltTablet()&&($(".logoContainer").find(".home").not(".d-none").length||(null===(e=$(".logoContainer.hide-sm svg"))||void 0===e?void 0:e.width())<192)&&$(".logoContainer").css("width","fit-content")}function o(){$(".logo .home").removeClass("d-none"),$(".logoContainer").addClass("home-logo")}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=(a=n)&&a.__esModule?a:{default:a};var r={load:function(){var e=$(".logo");e.on("click",(function(){$("#reading-are").click()})),n.default.customConfig.bannerConfig.bannerImagePath?fetch(n.default.customConfig.bannerConfig.bannerImagePath).then((function(e){return e.text()})).then((function(t){var n=(new DOMParser).parseFromString(t,"text/html").querySelector("svg");if(null!==n){var a=function(e){return!isNaN(e)&&e>0},i=$(n),r=Number.parseFloat(i.attr("height")),s=Number.parseFloat(i.attr("width"));a(r)&&a(r)&&(i.attr("viewBox","0 0 ".concat(s," ").concat(r)),i.attr("preserveAspectRatio","xMinYMid"),i.removeAttr("width"),i.removeAttr("height")),e.append(n),e.addClass("site-logo"),$("#logoMobile").removeClass("hide-sm")}else o()})).catch((function(){o()})).finally((function(){i()})):(o(),i())}};t.default=r}.apply(t,a))||(e.exports=i)},7999:function(e,t,n){var a,i;n(69826),n(24812),n(32564),a=[t,n(75190),n(31924),n(88450)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r,s={previousActiveElement:null,openModal:function(){var e;this.previousActiveElement=document.activeElement,$("body > *:not(.popup_wrapper)").each((function(e,t){t.inert=!0})),null===(e=$(".popup_container"))||void 0===e||e.focus()},closeModal:function(){var e;$("body > *:not(.popup_wrapper)").each((function(e,t){t.inert=!1})),null===(e=this.previousActiveElement)||void 0===e||e.focus()}},l=function(){var e=$("#"+u.popupId).closest(".popup_wrapper"),t=$("#"+u.overlay);s.closeModal(),e.remove(),0!==t.length&&t.remove()},d={position:"popup",autoFade:!1,autoReload:!1,waitToFade:4e3,customClasses:"",appendTarget:"",preset:"",hasIcon:!1,icon:"",iconClass:"",closeBtn:!0,closeBtnClass:"close",closeSpeed:"slow",escBtn:!0,primaryBtn:!1,primaryBtnElement:"button",primaryBtnHref:"",primaryBtnClasses:"",primaryBtnText:n.default.generic_gotIt,secondaryBtn:!1,secondaryBtnElement:"button",secondaryBtnClasses:"js__close",secondaryBtnText:n.default.generic_cancel,hasOverlay:!1,overlayClick:!0},u={popupId:i.default.alertpopups_info.alert_id,overlay:i.default.alertpopups_info.overlay_id,contentSection:i.default.alertpopups_info.alert_content,contentText:i.default.alertpopups_info.contentText,buttonSection:i.default.alertpopups_info.alert_buttons,closeBtnClass:i.default.alertpopups_info.close_btn_classes,goTolibrary:i.default.alertpopups_info.goTo_library,libraryUrl:a.default.customConfig.libraryPath},f={},c="",p="",g=function(e){"top"===f.position&&(void 0===e.autoFade&&(f.autoFade=!0),void 0===e.closeBtn&&(f.closeBtn=!1)),"toast"===f.position&&(void 0===e.autoFade&&(f.autoFade=!0,f.autoReload=!1,f.escBtn=!1),f.closeBtn=!1,f.hasOverlay=!1),"form"!==f.position&&"full"!==f.position||(f.escBtn=!1,f.closeBtn=!1,f.hasOverlay=!1),"access-tip"===f.position&&(f.closeBtn=!1),""!==f.icon&&(f.hasIcon=!0),""===f.iconClass&&(f.iconClass="material-icons"),""===f.appendTarget&&(f.appendTarget=$("body"))},m=function(e){var t=e.preset,n=e.icon,a=e.position;f.hasIcon=!0,void 0===n&&("fail"===t&&(f.icon="toast"===a||"form"===a?"cancel":"highlight_off"),"success"===t&&(f.icon="toast"===a||"form"===a?"check_circle":"check_circle_outline"),"info"===t&&(f.icon="toast"===a||"form"===a?"error":"error_outline"),"sorry"===t&&(f.icon="sentiment_very_dissatisfied")),f.customClasses+=" "+t},v=function(){var e="popup_container ";return e+=f.customClasses,e+=" "+f.position},h=function(){var e='<div class="flex-container">';return f.hasIcon&&(e+='<i class="hasIcon icon '+f.iconClass+'">'+f.icon+"</i>"),e+=p?"<div class="+u.contentText+">"+c+p+"</div></div>":"<div class="+u.contentText+">"+c+"</div></div>","<div class="+u.contentSection+">"+e+"</div>"},_=function(){var e="";return f.closeBtn&&(e+='<button class="'+u.closeBtnClass+'">close</button>'),(f.primaryBtn||f.secondaryBtn)&&(e+="<div class="+u.buttonSection+">",f.primaryBtn&&(e+="<"+f.primaryBtnElement,""!==f.primaryBtnHref&&(e+=' href="'+f.primaryBtnHref+'"',e+='target="_blank"'),e+=' class="primary btn--cta__light '+f.primaryBtnClasses+'">'+f.primaryBtnText+"</"+f.primaryBtnElement+">"),f.secondaryBtn&&(e+="<"+f.secondaryBtnElement+' class="secondary btn '+f.secondaryBtnClasses+'">'+f.secondaryBtnText+"</"+f.secondaryBtnElement+">"),e+="</div>"),e},b=function(e){if(clearTimeout(r),f.autoReload)window.setTimeout((function(){window.location.reload(!0)}),f.waitToFade);else if(f.autoFade)r=window.setTimeout((function(){s.closeModal(),E(e)}),f.waitToFade);else{var t=e.find(".js__close");f.overlayClick&&(t=e.find(".js__close, #"+u.overlay)),t.on("click",(function(){s.closeModal(),E(e)}))}$(document).bind("keyup.popup",(function(t){Keyboard.comparePressedKey(t,["Escape"])&&f.escBtn&&(s.closeModal(),E(e))}))},E=function(e){var t;(t=e&&e.length?e:$("#"+u.popupId).closest(".popup_wrapper")).remove(),0!==t.length&&t.fadeToggle(f.closeSpeed,(function(){t.remove(),"undefined"!=typeof EREADER&&EREADER.utils.scrolledContentFocus()}));var n=$("#"+u.overlay);0!==n.length&&"dialog"===t.attr("role")&&n.fadeOut(f.closeSpeed,(function(){n.remove(),"undefined"!=typeof EREADER&&EREADER.utils.scrolledContentFocus()})),"alert"===t.attr("role")&&clearTimeout(r),$(document).unbind("keyup.popup")},y={popup:function(e,t){var n;for(var a in c=e,p=t.button,d)void 0!==t?(f[a]=t[a],void 0===t[a]?f[a]=d[a]:f[a]=t[a]):f[a]=d[a];g(t),""!==f.preset&&m(t);var i=$("#"+u.popupId);if(i.length&&(i.hasClass(t.role)||i.attr("role")===t.role))if("toast"===f.position)s.closeModal(),E();else{if("access-tip"===t.role&&f.appendTarget.find(".popup_wrapper").length)return void l();l()}var o=f.appendTarget;if("popup"===f.position||f.hasOverlay){var r='<div id="'+u.overlay+'"></div>';o.prepend(r)}var y='<div class="popup_wrapper" aria-modal="true" popup-type="'+f.position+'"><div tabindex="0" id="'+u.popupId+'" class="'+v()+'">'+h()+_()+"</div></div>",A=$(y),R=A[0].querySelector(".popupDescription")||A[0].querySelector(".text");if(A.attr("role",t.role),A.attr("aria-label",R.textContent),"toast"===f.position){var w=$(".osano-cm-dialog--position_bottom");if(w.length){var T=w[0].offsetHeight;!w[0].classList.contains("osano-cm-dialog--hidden")&&(A[0].style.bottom="".concat(T,"px"))}}if(null===(n=f.appendTarget.find('[popup-type="toast"]'))||void 0===n||n.remove(),o.prepend(A),A[0].focus(),"popup"===f.position&&s.openModal(),A.find("."+u.buttonSection).length>0&&($("#"+u.popupId).addClass("hasButtons"),"toast"===f.position)){var C=$("#"+u.popupId),S=C.find("."+u.buttonSection),D=C.find(" ."+u.contentSection);S.appendTo(D)}b(A)},removePopup:l};t.default=y}.apply(t,a))||(e.exports=i)},46512:function(e,t,n){var a,i;n(69826),n(83710),a=[t,n(31924),n(82305),n(75190),n(41402)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={init:function(){var e=n.default.customConfig.healthCareDisclaimerConfig;if(e.enabled){var t=(0,a.default)({strings:i.default});o.default.appendBanner($(t));var r=$("#healthcareProfessionalDisclaimer");r.find("#healthCareConfigContent").html(e.message),r.find(".healthcare-disclaimer-alert__btn").on("click",(function(){var e,t;e=r,(t=new Date).setTime(t.getTime()+31536e6),document.cookie="professional-disclaimer=confirm; expires=".concat(t.toUTCString(),"; path=/;"),e.remove()})),$(r).find(".close").on("click",(function(){r.remove()}))}}};t.default=s}.apply(t,a))||(e.exports=i)},77803:function(e,t,n){var a,i;n(74916),n(15306),n(32564),a=[t,n(31924),n(75190),n(7999),n(23026),n(4646),n(21555)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var d={title:{"-9":a.default.fullpage_9_title,401:a.default.fullpage_401_title,404:a.default.fullpage_404_title,503:a.default.fullpage_503_title,GENERIC:a.default.fullpage_generic_title,GENERIC_DOWNLOAD:a.default.fullpage_generic_title,LINK_INVALID:a.default.fullpage_link_invalid_title,LINK_SUSPENDED:a.default.fullpage_link_suspended_title,LINK_TERMINATED:a.default.fullpage_link_terminated_title,OFFLINE_UNAVAILABLE:a.default.fullpage_offline_unavailable,PUBLICATION_NOT_OFFLINE:a.default.fullpage_not_offline,CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"",READ_ONLY_MODE:"",SAVING_OFFLINE_NOT_SECURE:"",OVER_QUOTA:"",PERMISSIONS_DEPLETED:"",SERVER_UNAVAILABLE:"",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"",SORRY:"",SUCCESS:"",TEMPORARY_ERROR:"",UNSUPPORTED:"",USER_UNAUTHORIZED:"",ACCESS_UNAUTHORIZED:a.default.viewMode_expired_title,CONFIRMATION:"<Action>?",TERMS:"<Feature name>",TERMS_NEW_TAB:"<Feature name>",TEMPORARY_ERROR_ALTER:a.default.permissions_retry_title,SERIOUS_ERROR:a.default.permissions_refresh_title,VIEWING_MODE_REVIEW:"",VIEWING_MODE_RENTAL:"",VIEWING_MODE_SHARED:""},text:{"-9":a.default.fullpage_9_text,401:a.default.fullpage_401_text,404:a.default.fullpage_404_text,503:a.default.fullpage_503_text,GENERIC:a.default.fullpage_generic_text,GENERIC_DOWNLOAD:a.default.fullpage_generic_text_download,LINK_INVALID:a.default.fullpage_link_invalid_text,LINK_SUSPENDED:a.default.fullpage_link_suspended_text,LINK_TERMINATED:a.default.fullpage_link_terminated_text,OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"<x> has been canceled.",CONNECTION_ERROR:"<action> was interrupted due to a connection error.",GENERIC_ALTER:"",OFFLINE:a.default.offlineStatus,READ_ONLY_MODE:a.default.read_only_mode,SAVING_OFFLINE_NOT_SECURE:a.default.savingOffline_not_secure,OVER_QUOTA:a.default.savingOffline_over_quota,PERMISSIONS_DEPLETED:"Your <span>X</span> permits have depleted. <span>Y</span>.",SERVER_UNAVAILABLE:a.default.server_unavailable,SERVICE_UNAVAILABLE:a.default.fullpage_503_text,SHARE_PREVIEW:a.default.share_preview,SORRY:a.default.generic_sorry_message,SUCCESS:"<Description of the action that was just performed>",TEMPORARY_ERROR:a.default.temporary_error,UNSUPPORTED:"<span>X</span> is not supported by your browser.",USER_UNAUTHORIZED:"You do not have the required license. The publication cannot be <span>X</span>.",SHARING_DISABLED:"Sharing access to publications is not currently enabled.",FREE_ACCESS:"You do not have permission to <span>X</span> this publication<span>Y</span>. ",FREE_ACCESS_TIP:"You do not have permission to <span>X</span> this publication<span>Y</span>.",SHARING_UNAVAILABLE:"The publication is not available for sharing.",ACCESS_UNAUTHORIZED:a.default.viewMode_expired_text,CONFIRMATION:"<Explanation of the consequences of the action>",TERMS:a.default.terms_and_conditions_label,TERMS_NEW_TAB:a.default.terms_and_conditions_label,TEMPORARY_ERROR_ALTER:a.default.permissions_retry_text,SERIOUS_ERROR:a.default.permissions_refresh_text,VIEWING_MODE_REVIEW:a.default.viewMode_preview,VIEWING_MODE_RENTAL:a.default.viewMode_rental,VIEWING_MODE_SHARED:a.default.sharedAccess_default_sponsor_message},icon:{"-9":"wifi_off",401:"sentiment_very_dissatisfied",404:"face",503:"ev_station",GENERIC:"error_outline",GENERIC_DOWNLOAD:"error_outline",LINK_INVALID:"local_florist",LINK_SUSPENDED:"hourglass_empty",LINK_TERMINATED:"face",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"info",CONNECTION_ERROR:"cancel",GENERIC_ALTER:"",OFFLINE:"info",READ_ONLY_MODE:"info",SAVING_OFFLINE_NOT_SECURE:"info",OVER_QUOTA:"info",PERMISSIONS_DEPLETED:"info",SERVER_UNAVAILABLE:"info",SERVICE_UNAVAILABLE:"info",SHARE_PREVIEW:"info",SORRY:"sentiment_very_dissatisfied",SUCCESS:"check_circle",TEMPORARY_ERROR:"cancel",UNSUPPORTED:"info",USER_UNAUTHORIZED:"info",SHARING_DISABLED:"info",FREE_ACCESS:"",SHARING_UNAVAILABLE:"info",ACCESS_UNAUTHORIZED:"hourglass_empty",CONFIRMATION:"<feature icon> or info",TERMS:"<feature icon>",TERMS_NEW_TAB:"<feature icon>",TEMPORARY_ERROR_ALTER:"info",SERIOUS_ERROR:"info",VIEWING_MODE_REVIEW:"hourglass_empty",VIEWING_MODE_RENTAL:"hourglass_empty",VIEWING_MODE_SHARED:"share"},presentation:{"-9":"full",401:"full",404:"full",503:"full",GENERIC:"full",GENERIC_DOWNLOAD:"full",LINK_INVALID:"full",LINK_SUSPENDED:"full",LINK_TERMINATED:"full",OFFLINE_UNAVAILABLE:"full",PUBLICATION_NOT_OFFLINE:"full",CANCEL:"toast",CONNECTION_ERROR:"toast",GENERIC_ALTER:"toast",OFFLINE:"toast",READ_ONLY_MODE:"toast",SAVING_OFFLINE_NOT_SECURE:"toast",OVER_QUOTA:"toast",PERMISSIONS_DEPLETED:"toast",SERVER_UNAVAILABLE:"toast",SERVICE_UNAVAILABLE:"toast",SHARE_PREVIEW:"toast",SORRY:"toast",SUCCESS:"toast",TEMPORARY_ERROR:"toast",UNSUPPORTED:"toast",USER_UNAUTHORIZED:"toast",SHARING_DISABLED:"toast",FREE_ACCESS:"toast",FREE_ACCESS_TIP:"access-tip",SHARING_UNAVAILABLE:"toast",ACCESS_UNAUTHORIZED:"modal",CONFIRMATION:"modal",TERMS:"modal",TERMS_NEW_TAB:"modal",TEMPORARY_ERROR_ALTER:"modal",SERIOUS_ERROR:"modal",VIEWING_MODE_REVIEW:"top",VIEWING_MODE_RENTAL:"top",VIEWING_MODE_SHARED:"top"},preset:{"-9":"",401:"",404:"",503:"",GENERIC:"",GENERIC_DOWNLOAD:"",LINK_INVALID:"",LINK_SUSPENDED:"",LINK_TERMINATED:"",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"info",READ_ONLY_MODE:"info",SAVING_OFFLINE_NOT_SECURE:"info",OVER_QUOTA:"info",PERMISSIONS_DEPLETED:"info",SERVER_UNAVAILABLE:"fail",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"info",SORRY:"sorry",SUCCESS:"success",TEMPORARY_ERROR:"fail",UNSUPPORTED:"info",SHARING_DISABLED:"info",FREE_ACCESS:"",SHARING_UNAVAILABLE:"info",USER_UNAUTHORIZED:"info",ACCESS_UNAUTHORIZED:"info",CONFIRMATION:"",TERMS:"",TERMS_NEW_TAB:"",TEMPORARY_ERROR_ALTER:"info",SERIOUS_ERROR:"info",VIEWING_MODE_REVIEW:"",VIEWING_MODE_RENTAL:"",VIEWING_MODE_SHARED:""},extra_buttons:{"-9":"",401:"",404:"",503:"",GENERIC:"",GENERIC_DOWNLOAD:"",LINK_INVALID:"Link to homepage",LINK_SUSPENDED:"Link to homepage",LINK_TERMINATED:"",OFFLINE_UNAVAILABLE:"",PUBLICATION_NOT_OFFLINE:"",CANCEL:"",CONNECTION_ERROR:"",GENERIC_ALTER:"",OFFLINE:"",READ_ONLY_MODE:"",SAVING_OFFLINE_NOT_SECURE:"",OVER_QUOTA:"",PERMISSIONS_DEPLETED:"",SERVER_UNAVAILABLE:"",SERVICE_UNAVAILABLE:"",SHARE_PREVIEW:"",SORRY:"",SUCCESS:"",TEMPORARY_ERROR:"",UNSUPPORTED:"",USER_UNAUTHORIZED:"",FREE_ACCESS:"<a href='<span>url</span>' class='text-link'> Get Full Access </a>",ACCESS_UNAUTHORIZED:"(No buttons at all)",CONFIRMATION:"Yes, <download>",TERMS:"I agree, Continue",TERMS_NEW_TAB:"I agree, Continue",TEMPORARY_ERROR_ALTER:"",SERIOUS_ERROR:"",VIEWING_MODE_REVIEW:"Learn more (Optional)",VIEWING_MODE_RENTAL:"Learn more (Optional)",VIEWING_MODE_SHARED:"Learn more (Optional)"},customClasses:{FREE_ACCESS:"toast__light"}},u={popup:function(e,t){var n={primaryBtn:!0,primaryBtnClasses:"js__close",primaryBtnText:a.default.generic_ok},o={hasIcon:""!==d.icon[e],icon:d.icon[e],messageType:d.preset[e],title:d.title[e].replace("<span>X</span>",t),description:d.text[e]},s=(0,r.default)({settings:o});i.default.popup(s,n)},customPopup:function(e,t){e.role="toast"===e.position?"alert":"dialog",i.default.popup(t,e)},toast:function(e,t,n,a,o){var r={position:d.presentation[e],icon:d.icon[e],preset:d.preset[e],customClasses:d.customClasses[e],role:"alert"};o&&o.isButtonVisible&&(r.button=d.extra_buttons[e].replace("<span>url</span>",o.accessUrl));var s=a||d.text[e];s=s.replace("<span>X</span>",t).replace("<span>Y</span>",n),i.default.popup(s,r)},tip:function(e,t,n,o){var r={position:d.presentation[e],appendTarget:$(o.appendTarget).closest(".access-tip__container"),role:"access-tip",button:d.extra_buttons[e]},l={message:d.text[e].replace("<span>X</span>",t).replace("<span>Y</span>",n),accessUrl:o.accessUrl,isFreeToRead:o.freeToRead};o.isButtonVisible&&(l.isButtonVisible=!0);var u='<div class="tipArrow '+o.arrowClasses+'"></div><div class="access-popup">'+(0,s.default)({data:l,strings:a.default})+"</div>";i.default.popup(u,r)},fullpage:function(e,t,a){var r={position:d.presentation[e],autoReload:t&&t.autoreload||!1},s={hasIcon:"true",icon:d.icon[e],title:d.title[e],description:d.text[e].replace("<span>X</span>",a)},l=(0,o.default)({settings:s});i.default.popup(l,r),function(e){e&&e.goToLibrary&&window.setTimeout((function(){window.location.assign(n.default.customConfig.libraryPath)}),4e3),$(".page-error-reload-the-page").off("click").on("click",(function(e){e.preventDefault(),window.location.reload(!0)})),$(".page-error-return-to-site").off("click").on("click",(function(e){e.preventDefault();var t=n.default.customConfig.siteUrl;t&&window.location.assign(t)})),$(".page-error-go-back").off("click").on("click",(function(e){e.preventDefault(),history.back()}))}(t)},closeAlert:function(){i.default.removePopup()}};t.default=u}.apply(t,a))||(e.exports=i)},41257:function(e,t,n){var a,i;n(69826),a=[t,n(66327),n(96007),n(12700),n(4325),n(93274),n(21835),n(88450),n(62541),n(45012),n(21836),n(42481)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}var g,m;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=p(n),a=p(a),i=p(i),o=p(o),r=p(r),s=p(s),l=p(l),d=p(d),u=p(u),f=p(f),c=p(c);var v=function(){$(l.default.navbar_info.id).find("button").not(".figure__image-btn").each((function(){var e=$(this);e.attr("type")||h(e)}))},h=function(e){e.addClass("btn");var t=e.attr("title"),n="";void 0!==t&&(n=t.substring($.inArray("[",t)+1,$.inArray("]",t))),e.is("button")&&e.attr("type","button"),e.attr({tabindex:"0",type:"button"}),n.length>0&&e.attr({accesskey:n}),e.find(".icon").each((function(){$(this).attr("aria-hidden","true")}))},_=function(){v(),$(l.default.navbar_info.id+" "+l.default.navbar_info.hidden).each((function(){var e=$(this);e.addClass("d-none"),e.attr({tabindex:"-1","aria-hidden":"true"})}))},b=function(){EREADER.utils.isFullScreen()?document.body.classList.add(l.default.fullscreen_mode):document.body.classList.remove(l.default.fullscreen_mode)},E=function(){$(l.default.var_container).hasClass(l.default.left_panel_info.panel_class)&&u.default.reset()},y={init:function(){y.repeatedInit(),u.default.init(),d.default.init(),f.default.init(),i.default.init(),s.default.onFullscreenChange(b)},repeatedInit:function(e){f.default.repeatedInit(e),o.default.init(),a.default.init()},loadPanel:function(e){$(l.default.navbar_info.id).empty(),$(l.default.navbar_info.id).attr("aria-label",e),y.renderTemplate(),u.default.loadPanel(),f.default.loadPanel(),_(),r.default.enableControls(),$(window).on("resize.navbar",(function(){if((g=[EREADER.utils.isMobile(),EREADER.utils.isTablet()])[0]===m[0]){if(g[1]===m[1])return;return m=g,void E()}m=g,E(),f.default.renderTemplate(!0),_(),y.repeatedInit(!0),r.default.enableControls(),n.default.doiMappingModeUpdates()}))},afterPublicationLoad:function(){g=[EREADER.utils.isMobile(),EREADER.utils.isTablet()],m=g,u.default.afterPublicationLoad(),f.default.afterPublicationLoad(),n.default.afterPublicationLoad(),v()},update:function(){d.default.update(),u.default.update(),i.default.progress()},renderTemplate:function(){$(l.default.navbar_info.id).empty(),$(l.default.navbar_info.id).append(c.default),u.default.renderTemplate(),d.default.renderTemplate(),f.default.renderTemplate()}},A=y;t.default=A}.apply(t,a))||(e.exports=i)},62541:function(e,t,n){var a,i;n(69826),a=[t,n(66327),n(60588),n(26188),n(88450),n(32536)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l=n.default.returnActionOrder().center,d=n.default.returnActionList(),u=n.default.returnSuppressedArray(),f={init:function(){a.default.init()},update:function(){a.default.updateWidgetDisplay()},renderTemplate:function(){var e=[],t=[];i.default._manageSuppressed(l,e,d,u),i.default._updateObjectList(e,d,t),$(o.default.navbar_info.id).find(o.default.navbar_info.center).replaceWith((0,r.default)({centerPanel:t}))}};t.default=f}.apply(t,a))||(e.exports=i)},45012:function(e,t,n){var a,i;n(69826),a=[t,n(66327),n(70119),n(9069),n(49481),n(56647),n(26188),n(88450),n(12325),n(49565)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=f(n),a=f(a),i=f(i),o=f(o),r=f(r),s=f(s),l=f(l),d=f(d),u=f(u);var c=n.default.returnActionOrder().left,p=n.default.returnActionList(),g=n.default.returnSuppressedArray(),m={init:function(){i.default.initPanel()},loadPanel:function(){i.default.loadPanel()},renderTemplate:function(){var e=[],t=[];s.default._manageSuppressed(c,e,p,g),s.default._updateObjectList(e,p,t),t.unshift(n.default.returnLeftMenu()),$(l.default.navbar_info.id).find(l.default.navbar_info.left).replaceWith((0,d.default)({leftPanel:t}))},afterPublicationLoad:function(){r.default.init(),u.default.load(),o.default.init(),a.default.init()},update:function(){i.default.updatePanel()},reset:function(){i.default.closePanel(!0)}};t.default=m}.apply(t,a))||(e.exports=i)},21836:function(e,t,n){var a,i;n(57327),n(69826),n(40561),n(68309),n(47941),a=[t,n(75190),n(31924),n(17475),n(66327),n(17914),n(69473),n(15553),n(82180),n(43548),n(33068),n(89333),n(41259),n(99731),n(26188),n(88450),n(38749),n(6818),n(73461),n(3071),n(89321),n(58150),n(62140),n(41930),n(21555),n(93274)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v,h,_,b,E,y,A,R,w,T,C){"use strict";function S(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=S(n),a=S(a),i=S(i),o=S(o),r=S(r),s=S(s),l=S(l),d=S(d),u=S(u),f=S(f),c=S(c),p=S(p),g=S(g),m=S(m),v=S(v),h=S(h),_=S(_),b=S(b),E=S(E),y=S(y),A=S(A),R=S(R),w=S(w),T=S(T),C=S(C);var D=a.default.customConfig,P=[],O=[],M=[],k={left:[],center:[],right:[]},L=o.default.returnSuppressedArray(),I=o.default.returnActionList(),x=o.default.returnActionOrder(),N=function(e,t,n){m.default.pushInToArray(k[e],I,m.default.searchInArray(I,n,"name"),t)},F=function(e){var t=m.default.searchInArray(e,"help","name");if(void 0!==t){var i={strings:n.default,FAQLink:r.default.getFAQLink(a.default.customConfig.faqLinkData)};$.extend(!0,i,r.default.renderMobileWidget(L)),e[t].templateMore=(0,A.default)(i)}var s=o.default.returnMoreMenu(e);return 1===O.length&&(s=O[0]),s},U=!1,B={init:function(){s.default.initPanel(),f.default.init(),_.default.init(),c.default.init(),g.default.init(),r.default.init(),p.default.dropdownHandlers()},repeatedInit:function(e){u.default.init(D.switchFormats,D.doi),e&&g.default.repeatedInit(),h.default.init()},loadPanel:function(){R.default.setup(),s.default.loadPanel(),0===$(".helpGuide.onboarding").length&&r.default.renderDesktopWidget(L),D.sharedAccessConfig.isShared&&l.default.init(),D.freeToReadConfig.isFreeToRead&&d.default.init()},afterPublicationLoad:function(){var e=i.default.isFixedLayout;h.default.init(),r.default.onLoadPublication(e)},renderTemplate:function(e){var t,a,o,r,s,l,d;U||(t=I[m.default.searchInArray(I,"download","name")],a=C.default.accessPermissionConfig(),o=(0,b.default)({ariaLabel:"Download "+i.default.download_files_type+"  "+i.default.download_files_size,classlist:"navbar-download not_resolved_yet btn btn--cta_roundedColored",href:i.default.download_files_url,target:"_blank",content:'<span class="icon material-icons">get_app</span>',otherAttributes:"data-single-download="+i.default.download_single+" data-download-files-key="+i.default.download_files_key,title:n.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom",accessKey:Keyboard.accesskeys.DownloadList}),r=(0,w.default)({classList:"navbar-download not_resolved_yet",dataPersist:"false",trigger:{ariaLabel:"Download document",classList:"btn--cta_roundedColored",icon:'<span class="icon material-icons">get_app</span>',title:n.default.download+" ["+Keyboard.accesskeys.DownloadList+"]",tooltip:"bottom"},content:{classList:"dropdown-list medium wider",content:(0,T.default)({strings:n.default,data:{title:n.default.download,message:n.default.download_no_access_message,accessUrl:a.accessUrl,isButtonVisible:a.isButtonVisible,isFreeToRead:a.freeToRead}})}}),s=a.isNoAccess?r:o,i.default.download_single&&(t.template=s,t.templateMore=(0,E.default)({classList:"view_in_website",content:(0,b.default)({ariaLabel:"Download "+i.default.download_files_type+"  "+i.default.download_files_size,classlist:"download drawerMenu--trigger list-button not_resolved_yet",href:i.default.download_files_url,target:"_blank",content:'<span class="icon material-icons">get_app</span><span class="tab-text"> '+n.default.download_button_text+"</span>",otherAttributes:"data-single-download="+i.default.download_single+" data-download-files-key="+i.default.download_files_key})})),U=!0),P=[],O=[],M=[],k={left:[],center:[],right:[]},l=m.default.searchInArray(L,"download")>=0,d=m.default.searchInArray(x.right,"download")>=0,l&&d&&(x.right.splice(0,1,"user"),x.right.pop()),m.default._manageSuppressed(x.right,P,I,L),m.default._manageSuppressed(x.more,O,I,L),m.default._manageSuppressed(["narrator","zoom"],M,I,L),function(){var e=EREADER.utils.isMobile(),t=e?O.length:P.length;if(N("left",M[0]),N("center",void 0,"search"),e)N("right",F(O));else{if(EREADER.utils.isMobileHeight()){var n=O.filter((function(e){return"help"===e.name}))[0];n&&P.splice(P.length-1,0,n)}if(t>3)N("right",P[0]),N("center",P[1]),P.splice(0,2),N("center",F(P));else{var a=P[0];N("download"===a||"user"===a?"right":"center",P[0]),N("center",P[1]),N("center",P[2])}}}();var u="true"===$(".search > .search-trigger").attr("aria-expanded");if(e&&u)for(var f=Object.keys(k),c=0;c<f.length;c++){for(var p=k[f[c]],g=!1,h=0;h<p.length;h++)if(p[h]&&"search"===p[h].name){p[h].template=$(".search")[0].outerHTML,g=!0;break}if(g)break}$(v.default.navbar_info.id).find(v.default.navbar_info.right).replaceWith((0,y.default)({rightPanel:k}));var _=$(".center #user_button span:not(.icon)");_.length>0&&_.text(_[0].innerText[0])},reset:function(){s.default.closePanel(!0),$("body").removeClass("mediaOverlay on")}};t.default=B}.apply(t,a))||(e.exports=i)},17042:function(e,t,n){var a,i;n(41539),n(88674),n(74916),n(23123),a=[t,n(35666),n(31924),n(36968)],i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=o(a);var l=(i=o(i)).default.tables.AVAILABLE_CONTENTS_TABLE;function d(){return(d=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.add(l,{url:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.delete(l,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.get(l,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c,p={url:(c=a.default.customConfig.epubConfig.epubUrl,c.split("?")[0]),doi:window.location.pathname,add:function(){var e=$.Deferred();return function(e,t){return d.apply(this,arguments)}(p.url,p.doi).then((function(){e.resolve()})).catch((function(t){e.reject(t)})),e.promise()},delete:function(){var e=$.Deferred();return function(e){return u.apply(this,arguments)}(p.url).then((function(){e.resolve()})).catch((function(t){e.reject(t)})),e.promise()},get:function(e){var t=$.Deferred();return function(e){return f.apply(this,arguments)}(e).then((function(e){var n=[];e&&(n=e.url?e.url:e),t.resolve(n)})).catch((function(){t.resolve([])})),t.promise()}},g=p;t.default=g}.apply(t,a),void 0===i||(e.exports=i)},55099:function(e,t,n){var a,i;n(26699),n(82772),n(40561),n(41539),n(88674),n(32023),a=[t,n(35666),n(31924),n(36968)],i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=o(a);var l=(i=o(i)).default.tables.FORMATS_TABLE;function d(e,t){return u.apply(this,arguments)}function u(){return(u=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.add(l,{formats:t,doi:n||a.default.customConfig.doi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.delete(l,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.get(l,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p={format:a.default.customConfig.format,doi:a.default.customConfig.doi,addOfflineFormat:function(e,t){var n=e||p.format,a=t||p.doi,i=$.Deferred();return this.getOfflineFormats(a).then((function(e){e.includes(n)?i.resolve():(e.push(n),d(e,t).then((function(){i.resolve()})).catch((function(e){i.reject(e)})))})).catch((function(e){i.reject(e)})),i.promise()},deleteOfflineFormat:function(){var e=$.Deferred();return this.getOfflineFormats(p.doi).then((function(t){if(1===t.length&&t[0]===p.format)(function(e){return f.apply(this,arguments)})(p.doi).then((function(){e.resolve()})).catch((function(t){e.reject(t)}));else{var n=t.indexOf(p.format);n>-1&&t.splice(n,1),d(t).then((function(){e.resolve()})).catch((function(t){e.reject(t)}))}})).catch((function(t){e.reject(t)})),e.promise()},getOfflineFormats:function(e){var t=$.Deferred();return function(e){return c.apply(this,arguments)}(e).then((function(e){var n=[];e&&(n=e.formats?e.formats:e),t.resolve(n)})).catch((function(){t.resolve([])})),t.promise()}},g=p;t.default=g}.apply(t,a),void 0===i||(e.exports=i)},30086:function(e,t,n){var a,i;n(41539),n(88674),a=[t,n(35666),n(17991),n(31924),n(61551),n(75190),n(41402)],i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){d(o,a,i,r,s,"next",e)}function s(e){d(o,a,i,r,s,"throw",e)}r(void 0)}))}}var f,c;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var p={init:function(e){c=e,window.addEventListener("online",g),window.addEventListener("offline",v)},isOffline:function(){return window.READER_OFFLINE},setFailedRequest:function(e){f=e},initOfflineBanner:function(){if(p.isOffline()&&a.default.contentActions.doiMappingModeActions.isInitialized()){var e=(0,o.default)({strings:r.default});s.default.appendBanner($(e));var t=$("#offlineAccess_view");t.on("click",".close",(function(){t.remove()}))}}};function g(){return m.apply(this,arguments)}function m(){return(m=u(regeneratorRuntime.mark((function e(){var t,n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.READER_OFFLINE=!1,$('[data-disable-offline="true"]').removeClass("js__disabled"),a.default.contentActions.offlineStorage.onOnline(),!(t=i.default.customConfig.readingProgress)||!t.syncProgress){e.next=10;break}return e.next=7,c.retrieveProgressFromServer();case 7:n=e.sent,o=c.getLocalProgress(),n&&(c.shouldOverrideLocalProgress(n,o)?(r=JSON.parse(n.location),c.updateLocalProgress(r),a.default.navigationActions.openContentByProgressLocation(r.location)):c.syncProgress(o));case 10:f&&a.default.contentActions.handleFailedRequest(f);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){window.READER_OFFLINE=!0,$('[data-disable-offline="true"]').addClass("js__disabled"),a.default.contentActions.offlineStorage.onOffline()}var h=p;t.default=h}.apply(t,a),void 0===i||(e.exports=i)},66419:function(e,t,n){var a,i;n(66992),n(3843),n(83710),n(41539),n(88674),n(78783),n(33948),n(32564),a=[t,n(75190),n(31924),n(77803),n(88450),n(93274),n(70371),n(4646),n(81152),n(17991)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Math.round(e/(t+2)*100),a=document.querySelector(".progress-ring__circle"),i=2*a.r.baseVal.value*Math.PI;a.style.strokeDasharray=i+" "+i,a.style.strokeDashoffset=i,a.style.strokeDashoffset=i-n/100*i}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=f(n),a=f(a),i=f(i),o=f(o),r=f(r),s=f(s),l=f(l),d=f(d),u=f(u);var p={clicked:function(){var e=$(o.default.menudrawer_info.offline_btn),t=e.data("inDevice");try{if(LIT.Reader.isSecureConnection){if(d.default.isDeleting())return;if(d.default.isRetrieving())d.default.stopRetrieving();else if(t)p.removeForOfflineReading(e);else if(window.READER_OFFLINE)if(t){window.setTimeout((function(){$(window).trigger(Events.FILE_LOAD_ERROR,{message:"ERROR loading File",status:-9,cause:"deleting content while being offline"})}),4500)}else i.default.toast("OFFLINE",n.default.savingOffline_offline);else if(a.default.customConfig.readOnlyMode)i.default.toast("READ_ONLY_MODE","Save Offline","","");else{var s=r.default.accessPermissionConfig(e,"left extra-move");!a.default.customConfig.isOfflineSupportedForBrowser||EREADER.utils.isEdgePrivateMode()?i.default.toast("UNSUPPORTED","Offline reading"):s.isNoAccess?EREADER.utils.isMobile()||EREADER.utils.isMobileHeight()?i.default.toast("FREE_ACCESS","save","","",s):i.default.tip("FREE_ACCESS_TIP","save","",s):$(this).attr("internal-error")?i.default.toast("TEMPORARY_ERROR","Saving offline"):$(this).hasClass(o.default.menudrawer_info.disabled)?i.default.toast("OFFLINE",n.default.savingOffline_offline):e.hasClass(o.default.menudrawer_info.not_resolved_yet)?i.default.popup("TEMPORARY_ERROR_ALTER","Saving offline"):e.hasClass(o.default.menudrawer_info.could_not_resolve)?i.default.popup("SERIOUS_ERROR","Saving offline"):e.hasClass(o.default.menudrawer_info.permissionDisabled)?i.default.toast("USER_UNAUTHORIZED","saved"):r.default.UNLIMITED_PERMISSIONS.OFFLINE||a.default.customConfig.doiMappingConfig.enabled&&r.default.checkPermissionUsage(r.default.PERMISSION_OFFLINE)?p.doSavingOffline(e,r.default.UNLIMITED_USAGE):r.default.fetchPermissions({reqType:r.default.PERMISSION_OFFLINE}).done((function(t){r.default.canUsePermissions(t).done((function(t){p.doSavingOffline(e,t)})).fail((function(t){p.doSavingOffline(e,t.availableUsage),LIT.Reader.LogEnabled&&console.log(t.message)}))})).fail((function(e){i.default.popup("SERIOUS_ERROR","Saving offline"),console.error("Error fetching OFFLINE permission, "+e.message)}))}}else i.default.toast("SAVING_OFFLINE_NOT_SECURE")}catch(e){LIT.Reader.LogEnabled&&console.log("well this isn't good",e)}},reset_status:function(e){e.removeClass("processing success fail add remove blink")},doSavingOffline:function(e,t){if(t===r.default.PERMISSION_NOT_AVAILABLE)i.default.toast("USER_UNAUTHORIZED","saved"),$(o.default.menudrawer_info.offline_btn).addClass(o.default.menudrawer_info.permissionDisabled);else if(t===r.default.NO_USAGE)i.default.toast("PERMISSIONS_DEPLETED","saving","The publication cannot be saved"),$(o.default.menudrawer_info.offline_btn).addClass(o.default.menudrawer_info.permissionDisabled);else if(a.default.customConfig.doiMappingConfig.enabled){var n=[],s=[];r.default.fetchPermissions({reqType:r.default.PERMISSION_OFFLINE},null).done((function(t){$.each(u.default.contentActions.doiMappingModeActions.getDoiMappingItems(),(function(e,t){n.push(r.default.canUsePermissions(r.default.checkPermissionUsageByDoi(t.doi),!0).done((function(e){s.push(t.doi)})).fail((function(e){})))})),Promise.all(n).then((function(){s.length>0?p.keepForOfflineReading(e):i.default.toast("USER_UNAUTHORIZED","saved")})).catch((function(e){i.default.toast("SERVER_UNAVAILABLE"),console.error(e.message)}))})).fail((function(e){console.error(e.message)}))}else a.default.customConfig.usageRightsEnabled&&!a.default.customConfig.doiMappingConfig.enabled?r.default.consumePermissions({usageType:r.default.PERMISSION_OFFLINE,usageAmount:1}).done((function(t){t.success?(p.keepForOfflineReading(e),LIT.Reader.LogEnabled&&console.log("You have "+t.remainingUsages+" usages left.")):i.default.toast("USER_UNAUTHORIZED","saved")})).fail((function(e){i.default.toast("SERVER_UNAVAILABLE"),console.error(e.message)})):p.keepForOfflineReading(e)},keepForOfflineReading:function(e){var t=$(o.default.menudrawer_info.offline_library),a=e.data("inDevice");t.addClass("processing add"),d.default.save().progress((function(e){c(e.childrenSaved,e.totalChildren),LIT.Reader.LogEnabled&&console.log("keeping offline progress "+e.message)})).done((function(){p.reset_status(t),t.addClass("success blink"),e.data("inDevice",!0);var r=u.default.contentActions.offlineStorage.isPartialSaved()?n.default.savingSectionsOffline_add_success:n.default.savingOffline_add_success;a&&(r=n.default.savingOffline_remove_success),i.default.customPopup({position:"toast",preset:"success"},r),$(o.default.menudrawer_info.offline_btn).attr("data-disable-offline",!1)})).fail((function(o){if(o===d.default.CANCEL_RETRIEVAL)a=!a,p.removeForOfflineReading(e,!0,"cancel-retrieval",!0);else if(o===d.default.OUT_OF_MEMORY)i.default.toast("OVER_QUOTA"),a=!a,p.removeForOfflineReading(e,!0);else{p.reset_status(t);var r=n.default.savingOffline_add_error;a&&(r=n.default.savingOffline_remove_error,t.addClass("success")),i.default.customPopup({position:"toast",preset:"fail"},r)}})),s.default.trigger(s.default.eventTypes.SAVE_OFFLINE,{customProperties:{eventTime:Date.now()}})},removeForOfflineReading:function(e,t,r,s){var u=$(o.default.menudrawer_info.offline_library),f=e.data("inDevice");if(u.addClass("processing remove"),s)d.default.remove().progress((function(e){c(e.totalRemaining,e.totalChildren),LIT.Reader.LogEnabled&&console.log("removing offline progress "+e.message)})).done((function(){var s;c(0,100),e.data("inDevice",!1),"cancel-retrieval"===r&&(s=n.default.savingOffline_add_cancel,i.default.customPopup({position:"toast",preset:"info"},n.default.savingOffline_add_cancel)),t||(s=n.default.savingOffline_add_success,f&&(s=n.default.savingOffline_remove_success,window.READER_OFFLINE&&(s=n.default.savingOffline_remove_success_offline)),i.default.customPopup({position:"toast",preset:"success"},s),window.READER_OFFLINE&&setTimeout((function(){window.location.assign(a.default.customConfig.libraryPath)}),4e3)),$(o.default.menudrawer_info.offline_btn).attr("data-disable-offline",!0)})).fail((function(e){p.reset_status(u);var t=n.default.savingOffline_add_error;f&&(t=n.default.savingOffline_remove_error,u.addClass("success")),i.default.customPopup({position:"toast",preset:"fail"},t)})).always((function(){p.reset_status(u)}));else{p.reset_status(u),u.addClass("success");var g=n.default.saving_offline_remove_text;window.READER_OFFLINE&&(g=n.default.saving_offline_remove_text_offline);var m={primaryBtn:!0,primaryBtnClasses:"continueRemoval",primaryBtnText:n.default.saving_offline_remove_button,secondaryBtn:!0},v={hasIcon:"true",icon:"info",messageType:"info",title:n.default.saving_offline_remove_title,description:'<p class="subTitle">'+g+"</p>"},h=(0,l.default)({settings:v});i.default.customPopup(m,h),$(document).one("click",".continueRemoval",(function(n){i.default.closeAlert(),p.reset_status(u),u.addClass("processing"),p.removeForOfflineReading(e,t,r,!0)}))}}},g=p.clicked;t.default=g}.apply(t,a))||(e.exports=i)},81152:function(e,t,n){var a,i;n(41539),n(88674),a=[t,n(35666),n(63483),n(17991),n(76538),n(65723),n(54376),n(55099)],i=function(e,n,a,i,o,r,s,l){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){u(o,a,i,r,s,"next",e)}function s(e){u(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=d(a),i=d(i),o=d(o),r=d(r),s=d(s),l=d(l);var c,p,g,m={NO_SUCH_DATA_ERROR:"cannotLocateData",NO_SUCH_FILE_ERROR:"cannotLocateContentFile",SYSTEM_ERROR:"systemError",CANCEL_RETRIEVAL:"cancelContentRetrieval",OUT_OF_MEMORY:"contentRetrievalOutOfMemory",getMetadata:(g=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.getMetaData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)}),getReferences:(p=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.getReferences();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),remove:function(){var e=$.Deferred();return i.default.contentActions.offlineStorage.remove().progress((function(t){t.totalChildren&&t.hasOwnProperty("totalRemaining")&&e.notify({totalRemaining:t.totalRemaining,totalChildren:t.totalChildren})})).done((function(t){o.default.remove().done((function(){e.resolve(t)})).catch((function(t){e.reject()}))})).fail((function(t){e.reject(t)})),e.promise()},save:function(){var e=$.Deferred();return i.default.contentActions.offlineStorage.save().progress((function(t){t.totalChildren&&t.childrenSaved&&e.notify({childrenSaved:t.childrenSaved,totalChildren:t.totalChildren+Math.round(.1*t.totalChildren)})})).done((function(t){o.default.store().done((function(){e.resolve(t)})).catch((function(t){e.reject()}))})).fail((function(t){e.reject(t)})),e.promise()},isThisAvailableOffline:function(){return i.default.contentActions.offlineStorage.isThisAvailableOffline()},isRetrieving:function(){return i.default.contentActions.offlineStorage.isRetrieving()},isDeleting:function(){return i.default.contentActions.offlineStorage.isDeleting()},stopRetrieving:function(){return i.default.contentActions.offlineStorage.stop()},cloneDataFromOldReader:(c=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.default.get("isOfflineDataCloned",function(){var e=f(regeneratorRuntime.mark((function e(t){var n,o,d,u,f,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=25;break}return e.next=3,i.default.contentActions.offlineStorage.getOldData();case 3:if(!(n=e.sent)||!n.length){e.next=25;break}o=0;case 6:if(!(o<n.length)){e.next=24;break}return d=n[o],u=d.doi,f=d.format,c={sourceFormat:f,title:d.title,rootUrl:d.rootUrl,doi:u},e.next=13,s.default.addWithMetadata(c);case 13:if($.isEmptyObject(d.metadata)){e.next=16;break}return e.next=16,a.default.storeWithMetadata(d.metadata,u);case 16:if($.isEmptyObject(d.references)){e.next=19;break}return e.next=19,a.default.storeWithReferences(d.references,u);case 19:return e.next=21,l.default.addOfflineFormat(f,u);case 21:o++,e.next=6;break;case 24:r.default.put("isOfflineDataCloned",!0);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},v=m;t.default=v}.apply(t,a),void 0===i||(e.exports=i)},36968:function(e,t,n){var a,i;n(41539),n(88674),a=[t,n(35666),n(56673)],i=function(e,n,a){"use strict";var i,o;function r(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=(i=a)&&i.__esModule?i:{default:i};var l={METADATA_TABLE:"metadataAttachment",REFERENCES_TABLE:"referencesAttachment",FORMATS_TABLE:"formats",CONTENT_TABLE:"libraryContents",AVAILABLE_CONTENTS_TABLE:"availableContents"},d=[{name:l.METADATA_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"metadata",keyPath:"doi",unique:!0}]},{name:l.REFERENCES_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"references",keyPath:"doi",unique:!0}]},{name:l.FORMATS_TABLE,options:{keyPath:"doi",autoIncrement:!1},indexes:[{name:"formats",keyPath:"doi",unique:!0}]},{name:l.AVAILABLE_CONTENTS_TABLE,options:{keyPath:"url",autoIncrement:!1},indexes:[{name:"contentUrl",keyPath:"url",unique:!0}]},{name:l.CONTENT_TABLE,options:{keyPath:"doi",autoIncrement:!1}}];function u(){o||(o=new a.default("sharedOffline",d))}var f,c,p,g,m={tables:l,add:(g=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,o.addToDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return g.apply(this,arguments)}),get:(p=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,o.getFromDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)}),getAll:(c=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,o.getAllFromDB(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),delete:(f=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,o.removeFromDB(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},v=m;t.default=v}.apply(t,a),void 0===i||(e.exports=i)},76538:function(e,t,n){var a,i;n(66992),n(41539),n(88674),n(78783),n(33948),a=[t,n(63483),n(54376),n(55099),n(17042)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={store:function(){var e=$.Deferred();return Promise.all([n.default.storeMetaData(),n.default.storeReferences(),a.default.add(),i.default.addOfflineFormat(),o.default.add()]).then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()},remove:function(){var e=$.Deferred();return Promise.all([n.default.deleteMetadata(),n.default.deleteReferences(),a.default.remove(),i.default.deleteOfflineFormat(),o.default.delete()]).then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()}};t.default=s}.apply(t,a))||(e.exports=i)},63483:function(e,t,n){var a,i;n(41539),n(88674),a=[t,n(35666),n(31763),n(70639),n(31924),n(36968)],i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){l(o,a,i,r,s,"next",e)}function s(e){l(o,a,i,r,s,"throw",e)}r(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=s(a),i=s(i),o=s(o);var u,f,c,p,g,m,v,h,_=(r=s(r)).default.tables.METADATA_TABLE,b=r.default.tables.REFERENCES_TABLE,E={storeMetaData:(h=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Retriever.retrieve().then(function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add(_,{metadata:t,doi:o.default.customConfig.doi});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)}),storeWithMetadata:(v=d(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add(_,{metadata:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),getMetaData:(m=d(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.get(_,t);case 2:return n="string"==typeof(n=(n=e.sent)?n.metadata:n)?JSON.parse(n):n,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),deleteMetadata:(g=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.delete(_,o.default.customConfig.doi);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)}),storeReferences:(p=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.Retriever.retrieve().then(function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add(b,{references:t,doi:o.default.customConfig.doi});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),storeWithReferences:(c=d(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add(b,{references:t,doi:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)}),getReferences:(f=d(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.get(b,o.default.customConfig.doi);case 2:return t="string"==typeof(t=(t=e.sent)?t.references:t)?JSON.parse(t):t,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)}),deleteReferences:(u=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.delete(b,o.default.customConfig.doi);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},y=E;t.default=y}.apply(t,a),void 0===i||(e.exports=i)},31763:function(e,t,n){var a,i;a=[t,n(72995),n(5274),n(28013),n(31924)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s={retrieve:function(){var e=$.Deferred();return new n.default.Retriever(n.default.RETRIEVAL_TYPES.JSON).retrieve(o.default.customConfig.metadataUrl).then((function(e){var t=e.data;return t.groupInfo?$.when(t,a.default.inlineDocument(t.groupInfo.abstract),a.default.inlineDocument(t.groupInfo.metadata)):$.when(t,"","")})).then((function(e,t,n){return e.groupInfo&&(t&&(e.groupInfo.abstract=t),n&&(e.groupInfo.metadata=n)),e.itemInfo?$.when(e,a.default.inlineDocument(e.itemInfo.abstract),a.default.inlineDocument(e.itemInfo.metadata)):$.when(e,"","")})).then((function(t,n,a){t.itemInfo&&(n&&(t.itemInfo.abstract=n),a&&(t.itemInfo.metadata=a)),e.resolve(t)})).fail((function(t){e.resolve({msg:"Error getting metadata",error:!0})})),e.promise()}},l={PLACEHOLDER:"<div>Metadata currently unavailable offline</div>",NAME:i.default.attachments.metadataKey,Retriever:s};t.default=l}.apply(t,a))||(e.exports=i)},70639:function(e,t,n){var a,i;a=[t,n(72995),n(5274),n(28013),n(31924),n(53880)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={retrieve:function(){var e=$.Deferred(),t=new n.default.Retriever(n.default.RETRIEVAL_TYPES.JSON),i=r.default.isGetFTREnabled()?o.default.customConfig.getFTRConfig.referencesUrl:o.default.customConfig.referencesUrl;return t.retrieve(i).then((function(e){var t=e.data;return t.references?$.when(t,a.default.inlineDocument(t.references)):$.when(t,"")})).then((function(t,n){t.references&&n&&(t.references=n),e.resolve(t)})).fail((function(){e.resolve({msg:"References are not available for this publication.",error:!0})})),e.promise()}},d={PLACEHOLDER:"<div>References currently unavailable offline</div>",NAME:i.default.attachments.referenceKey,Retriever:l};t.default=d}.apply(t,a))||(e.exports=i)},28013:function(e,t){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;t.default={attachments:{metadataKey:"metadata",referenceKey:"references",relatedKey:"related",citationsKey:"citations",filesKey:"files"}}}.apply(t,[t]))||(e.exports=n)},60588:function(e,t,n){var a,i;a=[t,n(88450),n(96007),n(86370),n(17991),n(75190),n(84926),n(49138),n(74584),n(9928)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}var c,p,g,m,v;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=f(n),a=f(a),i=f(i),o=f(o),r=f(r),s=f(s),l=f(l),d=f(d),u=f(u);var h="#left-page-btn",_="#right-page-btn",b={initKeyboardEvents:function(){Keyboard.on(Keyboard.PagePrevious,"reader",(function(e){e.preventDefault(),m.attr("disabled")||o.default.navigationActions.leftArrowKey()})),Keyboard.on(Keyboard.PageNext,"reader",(function(){v.attr("disabled")&&!o.default.navigationActions.canGoRight()||o.default.navigationActions.rightArrowKey()})),Keyboard.on(Keyboard.scrollUp,"reader",(function(){m.attr("disabled")&&!o.default.navigationActions.canGoLeft()||o.default.navigationActions.upArrowKey()})),Keyboard.on(Keyboard.scrollDown,"reader",(function(){v.attr("disabled")||o.default.navigationActions.downArrowKey()})),Keyboard.on(Keyboard.NodePrevious,"reader",(function(){o.default.navigationActions.leftArrowKey()})),Keyboard.on(Keyboard.NodeNext,"reader",(function(){o.default.navigationActions.rightArrowKey()}))},init:function(){u.default.init(),$(h).unbind("click"),$(_).unbind("click"),o.default.displayActions.shouldAddBookButtons()&&$("#app-container").append((0,l.default)({strings:r.default}));var e=$("#reader-book-page-btns");e.empty();var t=o.default.contentActions.tocActions.isRTL();e.append((0,s.default)({strings:r.default,keyboard:Keyboard,pageProgressionDirectionIsRTL:t})),$(h).on("click",(function(){b.goLeft()})),$(_).on("click",(function(){b.goRight()})),$(n.default.paging_info.first).on("click",(function(e){o.default.navigationActions.goToStartPage()})),$(n.default.paging_info.last).on("click",(function(e){o.default.navigationActions.goToEndPage()})),$(n.default.paging_info.nodeTraverseNext+n.default.paging_info.nodeTraverse).on("click",(function(e){b.nextPage()})),$(n.default.paging_info.nodeTraversePrevious+n.default.paging_info.nodeTraverse).on("click",(function(e){b.previousPage()})),$(n.default.paging_info.select).on("click",(function(e){b.goToSpecific()})),$(n.default.paging_info.page_input).on("keypress",(function(e){13===e.which&&b.goToSpecific()})),$(n.default.paging_info.page_input).on("input.paging",(function(e){var t=$(this),n=t[0].value;if(""===n||o.default.navigationActions.isValidPageNumber(n))t.removeClass("error"),t.siblings(".errors").empty();else if(!t.hasClass("error")){t.addClass("error");var a=b.getHtmlData().errorMessage;t.siblings(".errors").append((0,i.default)({msg:a}))}}))},initWidgetDisplay:function(){c=$(n.default.paging_info.current_page),p=$(n.default.paging_info.all_pages),g=$(n.default.paging_info.page_input),m=$(n.default.paging_info.nodeTraverse+n.default.paging_info.nodeTraversePrevious),v=$(n.default.paging_info.nodeTraverse+n.default.paging_info.nodeTraverseNext)},updateWidgetDisplay:function(){void 0===c&&(o.default.navigationActions.init(),this.initWidgetDisplay());var e=b.getCurrent();if(!(e<1)){c.text(e);var t=b.getTotal();p.text(t),g.attr("max",t),b.hidePreviousButton(e)?m.attr("disabled","disabled"):m.removeAttr("disabled"),b.hideNextButton(e)?v.attr("disabled","disabled"):v.removeAttr("disabled"),d.default.isScrolling()||(b.hideBookNextButton()?$(_).hide():$(_).show(),b.hideBookPreviousButton()?$(h).hide():$(h).show())}},hidePreviousButton:function(e){return o.default.navigationActions.isFirstPage(e)},hideNextButton:function(e){return o.default.navigationActions.isLastPage(e)},hideBookPreviousButton:function(){return o.default.navigationActions.isBookFirstPage()},hideBookNextButton:function(){return o.default.navigationActions.isBookLastPage()},getCurrent:function(){return o.default.navigationActions.getCurrent()},getTotal:function(){return o.default.navigationActions.getTotal()},getHtmlData:function(){return o.default.navigationActions.getHtmlData()},goToSpecific:function(){var e,t=$(n.default.paging_info.page_input);t.length&&(e=t.val()),o.default.navigationActions.isValidPageNumber(e)?(o.default.navigationActions.goToPage(e),a.default.reset()):t.focus()},goRight:function(){d.default.isPDF()?this.nextPage():o.default.navigationActions.rightArrowKey()},goLeft:function(){d.default.isPDF()?this.previousPage():o.default.navigationActions.leftArrowKey()},openContentUsingUrl:function(e){o.default.navigationActions.openContentUsingUrl(e)},isLastPage:function(){return o.default.navigationActions.isLastPage(b.getCurrent())},isFirstPage:function(){return o.default.navigationActions.isFirstPage(b.getCurrent())},nextPage:function(){o.default.navigationActions.nextPage()},previousPage:function(){o.default.navigationActions.previousPage()}},E=b;t.default=E}.apply(t,a))||(e.exports=i)},9069:function(e,t,n){var a,i,o=n(41999);n(69826),a=[t,n(75190),n(31924),n(35582),n(64142),n(66327),n(26188),n(74584),n(88450),n(38749),n(43549),n(96007),n(4325),n(69414),n(52486),n(73447),n(87958),n(17991),n(75466)],void 0===(i=function(e,n,a,i,r,s,l,d,u,f,c,p,g,m,v,h,_,b,E){"use strict";function y(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=y(n),a=y(a),i=y(i),r=y(r),s=y(s),l=y(l),d=y(d),u=y(u),f=y(f),c=y(c),p=y(p),g=y(g),m=y(m),v=y(v),h=y(h),_=y(_),b=y(b),E=y(E);var A,R=!1,w=u.default.left_panel_info.panel_class,T=u.default.left_panel_info.id,C=u.default.left_panel_info.close_btn,S=$("body"),D=!1,P=!1,O=!1,M=1,k=1,L=1,I=1,x=function(e){var t="with-transparency",n=$(C);e?n.addClass(t):n.removeClass(t)},N=function(e,t,n){if(!EREADER.isTouchDeviceKeyboardTriggered()){var a=S.hasClass("info-visible"),i=f.default.getPreset(),o=$("#app-container"),r=$("#reader-left-panel"),s=o.width()-r.width();if(d.default.isPDF()){if("user"===i){if(I=$(A).height(),k=$(A).width(),f.default.getPageWidth()>k||P){var l=k/M*(I/L);f.default.customScale(l),L=I,M=k,P=!1,O=!0}}else"fit-width"===i?f.default.fitWidth():"fit-height"===i&&f.default.fitHeight();d.default.isScrolling()&&e&&D&&(f.default.fixPositionNeeded()&&EREADER.utils.fixPositionAfterResizing(t,e),D=!1)}b.default.displayActions.zoomActions.resizeReadingArea(a,s,n)}},F=function(e){var t=EREADER.utils.isMobile(),n={},a=b.default.navigationActions.getCurrentPageElement();a&&(n.offsetTop=a[0].offsetTop,n.relativeOffsetTop=$(A)[0].scrollTop-n.offsetTop,D=!0),$(C).toggleClass("expanded").find(".icon").toggleClass("flip-horizontal");var i=S.hasClass(w);i?(x(!0),$(".l-panel--button-container [data-trigger]").removeClass("active"),g.default.resetStates(T),EREADER.utils.isMobile()&&m.default.statesReset(),S.removeClass(w),EREADER.utils.isIosDevice()&&EREADER.utils.forceStyleRecalculation($("#app-container")),$(T).find(u.default.tabs_info.tabpanel).attr("tabindex","-1"),EREADER.utils.scrolledContentFocus(),EREADER.utils.isIosDevice()&&EREADER.utils.isMobile()&&$(u.default.reader_info.scrolled_content_frame).css("overflow","auto"),R=!1,P=O):(x(!1),function(e){p.default.reset(void 0,!0),EREADER.utils.ltTablet()&&U(!0),S.addClass(w),$(T).find(u.default.tabs_info.tabpanel).attr("tabindex","0"),c.default.updateToc(),EREADER.utils.isIosDevice()&&EREADER.utils.isMobile()&&$(u.default.reader_info.scrolled_content_frame).css("overflow","hidden"),EREADER.utils.gtTablet()&&e&&$('[data-trigger="#info"]').trigger("click")}(e),R=!0),O=!1,t||N(a,n,i)},U=function(e){e&&(m.default.statesReset(),p.default.reset()),S.hasClass(w)&&F(!0)},B={closePanel:U,initPanel:function(){A=b.default.contentActions.getReadingContainerSelector(),m.default.init(),m.default.initTabPanels();var e=$(".l-panel--button-container .btn--rounded");e.click((function(){e.blur()})),$(C).on("click",F),$(".l-panel--button-container [data-trigger]").on("click",(function(e){var t="leftPanelbtn"===e.target.id,n=$(this),a="active";if(n.tooltip("hide"),!n.hasClass(a)){n.addClass(a),n.siblings().removeClass("active"),S.hasClass("info-visible")||F(t);var i=n.data("trigger");"#notes"===i&&EREADER.emit(_.default.NOTES_TAB_CLICKED),$(u.default.menudrawer_info.drawer).find(i).trigger("click")}})),i.default.setup(),L=$(u.default.reader_info.reading_area).height(),M=$(u.default.reader_info.reading_area).width(),c.default.init();var t=o.debounce((function(){N(),d.default.check()}),150);$(window).resize((function(e){EREADER.printButtonClicked?EREADER.printButtonClicked=!1:(P=!0,t())}));var n=0;$(document).on("mousewheel DOMMouseScroll scroll",(function(){if(!R){var e=$(A)[0]?$(A)[0].scrollTop:void 0;x(n<e),n=e}})),EREADER.on(_.default.TOC_RETRIEVED,h.default.loadToc)},loadPanel:function(){var e=s.default.returnButtonOrder(),t=s.default.returnButtonList(),i=s.default.returnSuppressedArray(),o=$(T);o.empty();var d=[],u=[];l.default._manageSuppressed(e,d,t,i),l.default._updateObjectList(d,t,u);var f={strings:n.default,keyboard:Keyboard,customConfig:a.default.customConfig,tabConfig:r.default,recommendationEnabled:E.default.enabled,materialTabs:a.default.customConfig.materialTabs,tabsSuppressionConfig:a.default.customConfig.profileConfig,type:a.default.customConfig.publicationType,tocSuppressed:a.default.customConfig.tabsSuppressionConfig.tocSuppressed,buttons:u};o.append((0,v.default)(f))},updatePanel:function(){R&&$(u.default.activetoc_info.toc).isVisible()&&c.default.updateToc()},isPanelOpen:R};t.default=B}.apply(t,a))||(e.exports=i)},69473:function(e,t,n){var a,i;n(69826),n(32564),a=[t,n(69411),n(88450),n(42954),n(4325)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);var s=!1,l=a.default.right_panel_info.panel_class,d=a.default.right_panel_info.id,u=a.default.right_panel_info.close_btn,f=$("body"),c=function(e,t){e.length>0&&setTimeout((function(){e.data("originalText",e[0].innerHTML),n.default.init(e,t||2,!0)}),30)},p=function(e,t){if(e){var a=$(".user_id.logged .name");a.hasClass("truncated")?(setTimeout((function(){n.default.destroy(a)}),30),c(a)):c(a)}if(t){var i=$(".user_id.logged .email");i.hasClass("truncated")?(setTimeout((function(){n.default.destroy(i)}),30),c(i,1)):c(i,1)}},g=function(){f.removeClass(l),o.default.resetStates(d),EREADER.utils.isIosDevice()&&EREADER.utils.forceStyleRecalculation($("#app-container"))},m=function(e){e.preventDefault();var t,n,i,o=f.hasClass(l),r=$(e.currentTarget);o?(g(),s=!1):(t=$(".user_id.logged"),n=t.find(".name"),i=t.find(".email"),p(!n.hasClass("truncated"),!i.hasClass("truncated")),f.addClass(l),setTimeout((function(){$(a.default.menudrawer_info.user_panel)[0].focus()}),100),r.attr("aria-expanded",!0),s=!0)},v=function(){f.hasClass(l)&&g()},h={closePanel:v,initPanel:function(){$(u).on("click",(function(e){m(e)})),$(d).on("keydown",(function(e){9===e.keyCode&&$(d).addClass("tab-focus")})),$(d).on("click",(function(){$(d).removeClass("tab-focus")})),window.addEventListener("orientationchange",(function(){document.body.classList.contains(a.default.fullscreen_mode)||v()}),!1),$(window).resize((function(){p(!0,!0)}));var e=$('input[name="download-format"]');e.length>0&&e.first().prop("checked",!0)},loadPanel:function(){i.default.init()},isPanelOpen:s};t.default=h}.apply(t,a))||(e.exports=i)},43548:function(e,t,n){var a,i;n(69826),n(89554),n(82772),n(21249),n(68309),n(47941),n(54747),a=[t,n(88450),n(30086),n(96007),n(77803),n(75190),n(8617),n(94405),n(55099)],void 0===(i=function(e,n,a,i,o,r,s,l,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=u(n),a=u(a),i=u(i),o=u(o),r=u(r),s=u(s),l=u(l),d=u(d);var f={externalConfig:{},doi:void 0,current:{},multiple:!1,available:[],elements:{navbarContainer:null,panelContainer:null},init:function(e,t){if(!e||!e.enabled)return!1;this.externalConfig=e,this.doi=t,this.elements.navbarContainer=document.querySelector(n.default.switch_formats_info.navbar_dropdown_class),this.elements.panelContainer=document.querySelector(n.default.switch_formats_info.rpanel_button_class),this.prepareData().done((function(){f.render()}))},prepareData:function(){var e=this.externalConfig;return e.available?this._prepareDataForMultiFormat(e):this._prepareDataForSingleFormat(e),a.default.isOffline()?this._disableUnavailableOfflineFormats():$.Deferred().resolve()},render:function(){var e={current:this.current,multiple:this.multiple,available:this.available};this._renderInNavbar(e),this._renderInRightPanel(e),a.default.isOffline()&&this._afterOfflineRender()},_renderInNavbar:function(e){this.elements.navbarContainer&&(this.elements.navbarContainer.innerHTML=(0,s.default)(e),i.default.initDropdown($(this.elements.navbarContainer)))},_renderInRightPanel:function(e){for(var t=[],n=0;n<e.available.length;n++)if(!e.available[n].active&&!0===e.available[n].availableOffline){var a=e.available[n];a.className=a.name.toLowerCase(),a.isEPUB="epub"===a.className,t.push(a)}this.elements.panelContainer&&t.length&&(this.elements.panelContainer.outerHTML=(0,l.default)({availableFormats:t}))},_afterOfflineRender:function(){if(this.elements.navbarContainer){var e=$(this.elements.navbarContainer).find("a.not-available-offline");$(e).on("click",(function(e){e.preventDefault(),o.default.toast("OFFLINE","","",r.default.format_not_saved_offline)}))}},_prepareDataForMultiFormat:function(e){var t=[];this.current=e.available[e.current],Object.keys(e.available).forEach((function(n){if(e.available.hasOwnProperty(n)){var a=e.available[n];a.active=e.current===n,a.name=a.name.toUpperCase(),a.availableOffline=!0,t.push(a)}})),this.available=t,this.multiple=this.available.length>1},_prepareDataForSingleFormat:function(e){this.current={name:e.current.toUpperCase()},this.multiple=!1},_disableUnavailableOfflineFormats:function(){var e=this,t=$.Deferred();return d.default.getOfflineFormats(this.doi).done((function(n){var a=n.map((function(e){return e.toLowerCase()}));e.available.forEach((function(t,n){-1===a.indexOf(t.name.toLowerCase())&&(e.available[n].availableOffline=!1)})),e.multiple=e.available.length>1,t.resolve()})),t}},c=f;t.default=c}.apply(t,a))||(e.exports=i)},93274:function(e,t,n){var a,i;n(57327),n(69826),a=[t,n(88450),n(31924),n(55765),n(30086),n(28478),n(17991)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var d="OFFLINE",u="DOWNLOAD",f="PRINT",c="NA",p={OFFLINE:!1,SHARE:!1,DOWNLOAD:!1,PRINT:!1},g={PRINT:!1,DOWNLOAD:!1,OFFLINE:!1,SHARE:!1},m="type",v="usageType",h="reqType",_="GET",b="POST",E=void 0,y=!1,A={},R={fetchPermissions:function(e,t,i){var r,l=$.Deferred();e:if(o.default.isOffline())e?l.reject({message:"permission is disabled, because reader is in offline mode"}):(S(),O(null,$(n.default.menudrawer_info.offline_library),null,!0),O(null,$(n.default.menudrawer_info.offline_btn),null,!0),l.resolve((r=!1,p.OFFLINE=r,p.SHARE=r,p.PRINT=r,p.DOWNLOAD=r,p)));else{var d=a.default.customConfig.doi;if(a.default.customConfig.doiMappingConfig.enabled){if(!s.default.contentActions.doiMappingModeActions.isInitialized())break e;d=s.default.contentActions.doiMappingModeActions.getDoiList()}var u={doi:d,format:t||a.default.customConfig.format};e&&(u.reqType=e.reqType),w({data:u,path:a.default.customConfig.permissionsUrl,displayLoader:u.reqType,method:_},(function(t){t?l.resolve(M(t,e,i)):(e||(C(n.default.menudrawer_info.offline_library),C(n.default.menudrawer_info.offline_btn),C(n.default.menudrawer_info.download_list),C(n.default.printing_info.print_btn),C(n.default.navbar_info.navbarDownload)),l.reject({message:"Error fetching JSON, server didn't respond"}))}))}return l.promise()},consumePermissions:function(e){var t=$.Deferred();return w({data:{doi:void 0!==e.doi?e.doi:a.default.customConfig.doi,format:a.default.customConfig.format,usageType:e.usageType,usageAmount:e.usageAmount},path:a.default.customConfig.consumePermissionsUrl,displayLoader:!0,method:b},(function(n){n?t.resolve(M(n,e)):t.reject({message:"Error consuming JSON, server didn't respond"})})),t.promise()},enableControls:function(){S()},canUsePermissions:function(e,t){var n,a=$.Deferred(),i={message:"you can't use the "+e.type+" permission",availableUsage:e.availableUsage};return t?(n=e,e.type,n.availableUsage!==c&&0!==n.availableUsage?a.resolve(e.availableUsage):a.reject(i)):T(e,e.type)?a.resolve(e.availableUsage):a.reject(i),a.promise()},checkCopyPermissions:function(e){for(var t=!1,n=e.usageRights.filter((function(e){return e.type===R.PERMISSION_DOWNLOAD||e.type===R.PERMISSION_PRINT})),a=0;a<n.length&&!(t=0!==n[a].availableUsage&&n[a].availableUsage!==c);a++);return t},isCopyingAllowed:function(){var e=$.Deferred();return E?e.resolve(R.checkCopyPermissions(E)):R.fetchPermissions().done((function(t){return e.resolve(R.checkCopyPermissions(t))})).fail((function(){e.resolve(!1)})),e.promise()},accessPermissionConfig:function(e,t){var n=a.default.customConfig,i=n.freeToReadConfig,o=n.previewConfig,r={};return i.isFreeToRead?r={isNoAccess:!0,accessUrl:i.accessUrl,isButtonVisible:i.isGetAccessButtonVisible,freeToRead:!0}:n.epubActions.preview&&o&&(r={isNoAccess:!0,accessUrl:o.accessUrl,isButtonVisible:o.isGetAccessButtonVisible}),t&&(r.arrowClasses=t),e&&(r.appendTarget=e),r},checkPermissionUsage:function(e){return p[e]},checkPermissionUsageByDoi:function(e){return A[e]},PERMISSION_OFFLINE:d,PERMISSION_DOWNLOAD:u,PERMISSION_SHARE:"SHARE",PERMISSION_PRINT:f,NO_USAGE:0,UNLIMITED_USAGE:-1,PERMISSION_NOT_AVAILABLE:c,UNLIMITED_PERMISSIONS:g};function w(e,t){$.ajax({url:e.path,method:e.method,dataType:"json",data:{doi:e.data.doi,format:e.data.format,reqType:e.data.reqType,usageType:e.data.usageType,usageAmount:e.data.usageAmount},timeout:6e3,success:function(e){t(e)},error:function(e,n,a){"timeout"===n&&console.error("Connection with server timed out! Actions will be disabled"),console.error("Failed with status code: "+e.status+", text status: "+n+", error: "+a),t()},beforeSend:function(){e.displayLoader&&(0===$(".atyLoader").length&&(y=!0,$(n.default.reader_info.reading_area).append((0,r.default)({strings:{loaderText:"processing"}}))))},complete:function(){var e=$(".atyLoader").first();0!==e.length&&y&&(y=!1,e.fadeOut().remove())}})}function T(e,t){return!1===p[t]&&(e.availableUsage===c||0===e.availableUsage?p[t]=!1:p[t]=e.availableUsage>=-1),p[t]}function C(e){$(e).removeClass(n.default.menudrawer_info.not_resolved_yet).addClass(n.default.menudrawer_info.could_not_resolve)}function S(){D(n.default.menudrawer_info.offline_library),D(n.default.menudrawer_info.offline_btn),D(n.default.menudrawer_info.download_list),D(n.default.printing_info.print_btn),D(n.default.navbar_info.navbarDownload)}function D(e){$(e).removeClass(n.default.menudrawer_info.not_resolved_yet)}function P(e){e.remove()}function O(e,t,o,r){if(o)P(t);else if(void 0!==t&&(t.removeClass(n.default.menudrawer_info.not_resolved_yet),T(e=e||{},e.type)||r)){t.removeClass(n.default.menudrawer_info.permissionDisabled);var s=e.limited,l=e.availableUsage>0||-1===e.availableUsage,d=s&&!l;i.default.WaiAria.setState(t,"aria-disabled",d),t.find("button, .button").attr("tabindex","0"),-1!==e.availableUsage||a.default.customConfig.doiMappingConfig.enabled||(g[e.type]=!0)}}function M(e,t,n){return e.permissions&&$.each(e.permissions,(function(e,t){A[t.doi]=t})),t?void 0!==n&&A.hasOwnProperty(n)?M(A[n],t):e.usageRights?k(e,t,m,h):e.consumptionDefaults?k(e,t,v,v):e:(E=e,e)}function k(e,t,n,a){for(var i=e.usageRights||e.consumptionDefaults,o=0;o<i.length;o++){var r=i[o];if(r[n]===t[a])return r}}var L=R;t.default=L}.apply(t,a))||(e.exports=i)},33068:function(e,t,n){var a,i,o=n(41999);n(57327),n(82772),n(66992),n(3843),n(83710),n(41539),n(88674),n(39714),n(78783),n(33948),a=[t,n(75190),n(31924),n(70371),n(93274),n(77803),n(88450),n(57820),n(28478),n(94603),n(17991)],void 0===(i=function(e,n,a,i,r,s,l,d,u,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=p(n),a=p(a),i=p(i),r=p(r),s=p(s),l=p(l),d=p(d),u=p(u),f=p(f),c=p(c);var g,m,v={};function h(e,t){t.then((function(){return document.querySelector(l.default.reader_info.reading_area).insertAdjacentHTML("beforeend",(0,u.default)()),v.isValidPrint=!0,c.default.contentActions.printingActions.previewPrint(e)})).catch((function(e){_(e)}))}function _(e){A(),"USER_UNAUTHORIZED"===e.message?s.default.toast(e.message,"printed"):"SERVER_UNAVAILABLE"===e.message?s.default.toast(e.message):(s.default.toast("TEMPORARY_ERROR","Printing"),console.error(e))}function b(e){var t=$(l.default.printing_info.reading_area);if(v.isValidPrint)c.default.contentActions.printingActions.beforePrint();else{if($("#"+l.default.printing_info.print_page).length)return;var n='<div id="'+l.default.printing_info.print_page+'" class="'+l.default.printing_info.enable_printing+'">'+m.PRINTING_DISABLED_MESSAGE+"</div>";t[0].insertAdjacentHTML("afterbegin",n),$("body").addClass("print-not-allowed"),$(l.default.reader_info.app_container).addClass("print-not-allowed"),$(l.default.printing_info.reading_area).addClass("print-not-allowed")}}function E(){A(),$("body").removeClass("print-not-allowed"),$(l.default.reader_info.app_container).removeClass("print-not-allowed"),$(l.default.printing_info.reading_area).removeClass("print-not-allowed"),v.isValidPrint?(v.isValidPrint=!1,c.default.contentActions.printingActions.afterPrint(),i.default.trigger(i.default.eventTypes.PRINT,{customProperties:{eventTime:Date.now(),printedPages:g?g.toString():0}})):$("#"+l.default.printing_info.print_page).remove()}v.init=function(){m=a.default.customConfig.alertPopupMsg,function(){window.onbeforeprint=b,window.onafterprint=function(e){EREADER.utils.isRealMobileOrTablet()?y():E()};var e=$(document);e.on("click.printingPopup",l.default.printing_info.print_btn,o.debounce((function(){var e=r.default.accessPermissionConfig($(l.default.printing_info.print_btn),"left extra-move");window.READER_OFFLINE?s.default.toast("OFFLINE",n.default.printing_offline):a.default.customConfig.readOnlyMode?s.default.toast("READ_ONLY_MODE","Print","",""):e.isNoAccess?EREADER.utils.isMobile()||EREADER.utils.isMobileHeight()?s.default.toast("FREE_ACCESS","print","","",e):s.default.tip("FREE_ACCESS_TIP","print","",e):$(this).hasClass(l.default.menudrawer_info.not_resolved_yet)?s.default.popup("TEMPORARY_ERROR_ALTER","Printing"):$(this).hasClass(l.default.menudrawer_info.could_not_resolve)?s.default.popup("SERIOUS_ERROR","Printing"):$(this).hasClass(l.default.menudrawer_info.disable_by_default)?(s.default.toast("TEMPORARY_ERROR","Printing"),$(l.default.printing_info.print_btn).addClass("hidden")):a.default.customConfig.isPrintSupportedForBrowser?a.default.customConfig.epubActions.print?r.default.UNLIMITED_PERMISSIONS.PRINT?v.presentPrintPopup(r.default.UNLIMITED_USAGE):r.default.fetchPermissions({reqType:r.default.PERMISSION_PRINT}).done((function(e){r.default.canUsePermissions(e).done((function(e){v.presentPrintPopup(e)})).fail((function(e){v.presentPrintPopup(e.availableUsage),LIT.Reader.LogEnabled&&console.log(e.message)}))})).fail((function(e){s.default.popup("SERIOUS_ERROR","Printing"),console.error("Error fetching PRINT permission, "+e.message)})):s.default.toast("USER_UNAUTHORIZED","printed"):s.default.toast("UNSUPPORTED","Printing")}),200,{leading:!1,trailing:!0})),e.on("click.printingDuplicate","#duplicatePages_proceed",(function(){v.previewPrint(d.default.getSelectedPages())})),e.on("click.printingRemoveDuplicate","#duplicatePages_remove",(function(){var e=d.default.getSelectedPages().filter((function(e,t,n){return n.indexOf(e)===t}));v.previewPrint(e)})),e.on("change.printing",'.printPopup [type="radio"]',(function(e){d.default.validateInput(!1)})),e.on("click.printingPreview",".printPreview",(function(e){var t=d.default.validateInput(!0);t.entireDoc?v.previewPrint(o.range(1,c.default.contentActions.getEntireContentPagesLength()+1)):t.range&&v.previewPrint(t.range)})),window.addEventListener("CloneAdd",(function(e){d.default.validateInput(!1)}),!1),window.addEventListener("CloneRemove",(function(e){d.default.validateInput(!1)}),!1),e.on("input.printing",".printPageInput",(function(e){var t=e.target.dataset.associatedRadio;t&&(document.querySelector("#"+t).checked=!0),d.default.validateInput(!1)})),e.on("click.printingPreview",".select-content .choice",(function(e){d.default.validateInput(!1)}))}(),c.default.contentActions.printingActions.init(b,E)},v.isValidPrint=!1,v.presentPrintPopup=function(e){if(e===r.default.PERMISSION_NOT_AVAILABLE)$(l.default.printing_info.print_btn).addClass(l.default.menudrawer_info.permissionDisabled),s.default.toast("USER_UNAUTHORIZED","printed",void 0,m.USER_UNAUTHORIZED);else if(e===r.default.NO_USAGE)$(l.default.printing_info.print_btn).addClass(l.default.menudrawer_info.permissionDisabled),s.default.toast("PERMISSIONS_DEPLETED","printing","The publication cannot be printed");else{var t=c.default.contentActions.printingActions.getSinglePrintableItem();if(t.isSingleItem)v.previewPrint([t.singlePageToPrint]);else{var n=c.default.contentActions.printingActions.getPrintingPopupData();if(n){var a=(0,f.default)(n);s.default.customPopup({position:"popup",preset:"",customClasses:"printPopup",primaryBtn:!0,primaryBtnClasses:"printPreview",primaryBtnText:"PRINT",secondaryBtn:!0},a),d.default.validateInput(!1)}else console.error("MAXIMUM PAGE 0"),s.default.popup("SERIOUS_ERROR","Printing")}}},v.previewPrint=function(e){g=e;var t=!0;s.default.closeAlert();var n=document.querySelector(l.default.right_panel_info.close_btn);if(n&&"true"===n.getAttribute("aria-expanded")&&n.click(),c.default.contentActions.doiMappingModeActions.isInitialized()){for(var a=0;a<e.length;a++){var i=e[a];if(!c.default.contentActions.doiMappingModeActions.hasAccessToPage(i)){t=!1;break}}t?function(){for(var t=[],n=[],a=!0,i=function(i){var o=c.default.contentActions.doiMappingModeActions.getDoiByPageNumber(e[i]);void 0!==o&&n.push(r.default.fetchPermissions({reqType:r.default.PERMISSION_PRINT},null,o).done((function(e){r.default.canUsePermissions(e,!0).done((function(e){t.push(o)})).fail((function(){s.default.toast("USER_UNAUTHORIZED","printed"),a=!1}))})).fail((function(){s.default.toast("SERVER_UNAVAILABLE","printed"),a=!1})))},o=0;o<e.length;o++)i(o);n.length>0?Promise.all(n).then((function(){if(a){for(var n=[],i=0;i<t.length;i++)n.push(R(t[i]));n.length>0?Promise.all(n).then((function(){h(e,$.Deferred().resolve())})).catch((function(e){_(e)})):0===n.length&&h(e,$.Deferred().resolve())}})):h(e,$.Deferred().resolve())}():(A(),s.default.toast("USER_UNAUTHORIZED","printed"))}else h(e,R())};var y=o.debounce((function(){E()}),2e3);function A(){var e=document.querySelector(".atyLoader");null!=e&&e.parentNode.removeChild(e)}function R(e){return new Promise((function(t,n){a.default.customConfig.usageRightsEnabled?r.default.consumePermissions({usageType:r.default.PERMISSION_PRINT,usageAmount:1,doi:e}).done((function(e){e.success?(LIT.Reader.LogEnabled&&console.log("You have "+e.remainingUsages+" usages left."),t()):n(new Error("USER_UNAUTHORIZED"))})).fail((function(){n(new Error("SERVER_UNAVAILABLE"))})):t()}))}var w=v;t.default=w}.apply(t,a))||(e.exports=i)},57820:function(e,t,n){var a,i;n(89554),n(54747),a=[t,n(6818),n(27120),n(17991)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r={errors:{empty:!1,notSelected:!1,duplicate:!1,limitReached:!1,outOfRange:!1,invalidRange:!1,singlePageAndCampaign:!1},inputs:{pageNumInputs:void 0,selectedRadio:void 0,submit:void 0,ids:{entireDoc:"entire-doc-radio",currentNode:"current-node-radio",selectRange:"select-range-radio",currentPageSection:"current-section-radio",pageSectionRange:"select-section-radio"}},result:{entireDoc:!1,range:!1},validate:function(e){r.inputs.pageNumInputs=document.querySelectorAll(".printPageInput"),r.inputs.selectedRadio=document.querySelector("input[type='radio']:checked"),r.inputs.submit=document.querySelector(".printPreview"),r.errors={empty:!1,duplicate:!1,limitReached:!1,outOfRange:!1,invalidRange:!1},r.result={entireDoc:!1,range:!1},n.default.error.reset($(".printPreview")),n.default.submit.disable($(r.inputs.submit)),$("#popup_inline_form").remove();var t=i.default.contentActions.printingActions.validate(r,e);return t.length>0&&t.forEach((function(e){switch(e.errorType){case"emptyInput":!function(e){n.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .emptyInputError")&&n.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"optionNotSelected":!function(e){n.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .notSelectedError")&&n.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"outOfRange":!function(e){var t=e.inputs[0];t.addClass("outOfRangeInput"),n.default.error.addClass(t),null==document.querySelector("div.printPopup .outOfRangeError")&&n.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"invalidRange":!function(e){var t=e.inputs;n.default.error.addClass(t[0]),n.default.error.addClass(t[1]),null==document.querySelector("div.printPopup .wrongInputs")&&n.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"limitReached":!function(e){n.default.error.addClass(e.inputs[0]),null==document.querySelector("div.printPopup .pageLimitReached")&&n.default.error.appendErrorMsg(e.errorMsg)}(e);break;case"duplicatePages":!function(e){r.inputs.submit.blur(),n.default.submit.disable($(r.inputs.submit));var t=(0,a.default)(e.errorMsg);document.querySelector("div.printPopup .formError").insertAdjacentHTML("beforebegin",t),document.querySelector("div.printPopup #popup_inline_form").focus()}(e);break;case"singlePageAndCampaign":!function(e){r.inputs.selectedRadio.id!==r.inputs.ids.currentNode&&n.default.error.addClass(e.inputs[0]);null==document.querySelector("div.printPopup .printingCampaign")&&n.default.error.appendErrorMsg(e.errorMsg)}(e)}})),e||r.errors.outOfRange||r.errors.invalidRange||r.errors.limitReached||n.default.submit.enable($(r.inputs.submit)),r.result},getSelectedPages:function(){return i.default.contentActions.printingActions.getSelectedPages(r.inputs.pageNumInputs)}};var s={getSelectedPages:r.getSelectedPages,validateInput:r.validate};t.default=s}.apply(t,a))||(e.exports=i)},9928:function(e,t,n){var a,i,o=n(41999);a=[t,n(75190),n(31924),n(87194),n(87958),n(17991)],void 0===(i=function(e,n,a,i,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),r=l(r),s=l(s);var d=a.default.customConfig,u={init:function(){d.locationHistoryEnabled&&($("#reading-area").append((0,i.default)({strings:n.default})),$("#returnPreviousLocation").on("click",(function(){u.returnPreviousLocation()})),$(".closeHistoryDialog").on("click",o.debounce((function(){u.closeHistoryDialog()}))),EREADER.on(r.default.SHOW_LOCATION_HISTORY_MSG,(function(){u.showMsg()})))},closeHistoryDialog:function(){s.default.navigationActions.clearLocationHistory(),this.hideMsg()},returnPreviousLocation:function(){s.default.navigationActions.returnPreviousLocation()&&this.hideMsg()},showMsg:function(){$("#location-history").attr("aria-hidden","false")},hideMsg:function(){$("#location-history").attr("aria-hidden","true")}},f=u;t.default=f}.apply(t,a))||(e.exports=i)},46103:function(e,t,n){var a,i;n(69826),n(3843),n(83710),n(41539),n(88674),a=[t,n(30086),n(31924),n(65723),n(87958),n(70371),n(17991)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var d={PROGRESS_OBJ_VERSION:"1.1",getProgressStorageKey:function(){var e=a.default.customConfig;if(e){var t=e.doi,n=e.format;if(void 0!==t&&t&&void 0!==n&&n)return encodeURIComponent(t)+"_"+n}},getProgressStorageJsonStr:function(e){if(void 0!==e){var t={};return"string"==typeof e?t=JSON.parse(e):t.location=e,t.version||(t.version=this.PROGRESS_OBJ_VERSION,t.date=new Date),JSON.stringify(t)}return e},syncProgress:function(e){if(!$.isEmptyObject(e)&&!n.default.isOffline()){var t=a.default.customConfig;if(t&&t.readingProgress){var i=a.default.customConfig.readingProgress,o=t.format,r=i.syncUrl;if(r&&0!==r.length&&i.syncProgress){var l;s.default.contentActions.doiMappingModeActions.isInitialized()&&(l=s.default.contentActions.doiMappingModeActions.getCurrentDoi()),void 0===l&&(l=a.default.customConfig.doi);var d={doi:l,location:e,format:o};$.ajax({data:d,type:"POST",url:r,async:!0,onSuccess:function(){LIT.Reader.LogEnabled&&console.log("successfully synced progress data with server")},onError:function(){LIT.Reader.LogEnabled&&console.log("oops..failed to sync progress with server")}})}}}},shouldOverrideLocalProgress:function(e,t){var n=!1;if(e&&!0===e.syncProgress&&!$.isEmptyObject(e.serverReadingProgress)&&!$.isEmptyObject(e.location))try{if(void 0===t)n=!0;else{var a=JSON.parse(e.serverReadingProgress),i=JSON.parse(a.location).date,o=t.date;n=void 0===o&&"undefined"!==i||void 0!==i&&Date.parse(o)-Date.parse(i)<=0}}catch(e){LIT.Reader.LogEnabled&&console.log("Failed to parse progress from server."+e)}return n},retrieveProgressFromServer:function(){return new Promise((function(e){var t,n=a.default.customConfig,i=n.readingProgress,o=n.format;if(!(o&&i&&i.syncProgress))return e();s.default.contentActions.doiMappingModeActions.isInitialized()&&(t=s.default.contentActions.doiMappingModeActions.getCurrentDoi()),void 0===t&&(t=a.default.customConfig.doi),$.ajax({url:i.retrieveUrl,data:{doi:t,format:o},dataType:"json"}).done((function(t){return e(t)})).fail((function(t){return console.error(t),e()}))}))},getLocalProgress:function(){var e=d.getProgressStorageKey();return i.default.getSync(e)},defineProgressChangedEvent:function(){var e=this;EREADER.on(o.default.PROGRESS_CHANGED,(function(t,n,a){var i,o=t;a||(o=e.getProgressStorageJsonStr(t),d.updateLocalProgress(o),d.syncProgress(o)),r.default.trigger(r.default.eventTypes.READ,{customProperties:{eventTime:Date.now(),location:n,locationType:a?"campaign":"normal",tocEntry:(i=$("#reader-toc-body"),i.find('a[tabindex="60"]')[0]?i.find('a[tabindex="60"]')[0].text:""),readDuration:Date.now(),subSection:o,spineIndex:n}})}))},updateLocalProgress:function(e){var t=d.getProgressStorageKey(),n=this.getProgressStorageJsonStr(e);i.default.put(t,n,$.noop)}},u=d;t.default=u}.apply(t,a))||(e.exports=i)},99731:function(e,t,n){var a,i;n(69826),n(91058),n(74916),n(64765),n(32564),a=[t,n(75190),n(17475),n(69411),n(77803),n(88450),n(96007),n(55765),n(92275),n(17991),n(31924)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}var p,g,m,v,h,_,b,E,y,A,R;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=c(n),a=c(a),i=c(i),o=c(o),r=c(r),s=c(s),l=c(l),d=c(d),u=c(u),f=c(f);var w=0,T=0,C={init:function(){p=$(r.default.navbar_info.id).find(r.default.search_info.search_class),g=p.find("form"),v=g.find(".search-field"),m=p.find(".results"),s.default.initDropdown(p),g.on("submit",(function(e){e.preventDefault(),C.onSubmit()})),p.find(r.default.dropdown_info.trigger).on("click",(function(){var e=p.find(r.default.dropdown_info.content+" "+r.default.dropdown_info.trigger);l.default.WaiAria.toggleState(e,"aria-expanded")})),p.find(r.default.dropdown_info.trigger).on("dropdown:opened",(function(){v.focus()})),p.find(r.default.dropdown_info.trigger).on("dropdown:closed",(function(){v.blur()})),this.handleAdditionalPopupBindings(p)},observeCurrent:function(){var e=$(".current")[0],t=new MutationObserver((function(){C.result.setCurrentCountFromSearchRes(b.text()),C.buttons.disable(),C.buttons.enable()}));e&&t.observe(e,{attributes:!0,childList:!0,subtree:!0})},repeatedInit:function(){var e="true"===p.find(".search-trigger").attr("aria-expanded");if(C.init(),e){var t=!1;w>0&&(t=!0),C.commonInit({success:t}),p.find(".search-trigger").attr("aria-expanded","true")}},handleAdditionalPopupBindings:function(e){e.on("click",r.default.dropdown_info.trigger+"."+r.default.dropdown_info.disabled_class,(function(){o.default.toast("UNSUPPORTED","","",n.default.search_disabled)}))},onSubmit:function(){""===v.val()?v.focus():(p.addClass("show-results"),C.inaccessibleItems.check(),C.doSearch())},inaccessibleItems:{isEnabled:!1,check:function(){p.find("#hide-checkbox").is(":checked")?C.inaccessibleItems.isEnabled=!0:C.inaccessibleItems.isEnabled=!1}},doSearch:function(){u.default.contentActions.search.doSearch(this.getSearchTerm(),".current",C.renderTemplate)},getSearchTerm:function(){return v.val()},initCounters:function(e){(T=this.result.getTotalCountFromSearchRes(e))>0&&(w=1)},updateCounters:function(e,t){T=e,w=t},initPagination:function(e){this.initCounters(e)},initSearchInfo:function(e){this.resetCounters(),this.initPagination(e)},resetCounters:function(){T=0,w=0},renderTemplate:function(e,t){if(t.hasOwnProperty("results")&&f.default.customConfig.doiMappingConfig.enabled){for(var a=t.results,i=[],r=0,s=0;s<a.length;s++){var l=a[s],c=u.default.contentActions.doiMappingModeActions.getDoiTitle(l.href,"href");l.title=void 0===c?"Untitled":c;var p=u.default.contentActions.doiMappingModeActions.hasAccessToDoi(l.href,"byFilePath");p&&(l.hasAccess=p,i.push(l),r+=l.count)}C.inaccessibleItems.isEnabled&&(t.results=i,t.count=r)}if(EREADER.utils.isMobile()&&e.error)C.clear(),o.default.customPopup({customClasses:"search",position:"top",preset:"fail"},n.default.searchError);else{var g={};if(t.results&&(t.results[0].active=!0,g={title:t.results[0].title,count:t.results[0].count,hasAccess:t.results[0].hasAccess}),t&&t.update)return b.text(t.current),E.text(t.count),C.updateCounters(t.count,t.current),C.buttons.disable(),void C.buttons.enable();m.html((0,d.default)({strings:n.default,response:e,res:t,query:C.getSearchTerm(),sectionSearch:f.default.customConfig.doiMappingConfig.enabled,firstResult:g,hideInaccessibleItems:C.inaccessibleItems.isEnabled})),C.commonInit(e,t)}},commonInit:function(e,t){e.success&&(C.needsTruncation(),b=m.find(".current"),y=m.find(".section-top-total"),A=m.find(".section-top-title"),m.find(".results-section__items .active"),m.find(".results-section__items .active").next(),E=m.find(".total"),h=m.find(".next"),_=m.find(".previous"),C.buttons.disable(),h.on("click",C.result.next),_.on("click",C.result.previous),t&&C.renderSearchResults(t),0===$(".atyLoader").length&&C.buttons.enable(),$(".searchOutlines").on("click",(function(){for(var e=$(this),n=e.attr("href"),a=0,i=0;i<t.results.length;i++){var o=t.results[i];if(o.href===n){var r=A.siblings(".section-start-number");b.text(a+1),r.text(a+1),y.text(a+o.count),A.text(e.find(".item-title").text()),m.find(".results-section__items .active").removeClass("active"),e.addClass("active"),C.buttons.disable(),C.buttons.enable();break}a+=o.count}return u.default.navigationActions.goToPageFile(n,"href"),!1})),a.default.search_notification_shown||(o.default.customPopup({position:"toast",autoFade:!1,primaryBtn:!0,primaryBtnClasses:"js__close"},n.default.search_from_term),a.default.search_notification_shown=!0),this.observeCurrent()),p.data("persist",!0),$("#"+r.default.dropdown_info.overlay_id).fadeOut(),m.find(".clear").on("click",C.clear),m.find(".view-all").on("click",C.dropdownToggleExpanded)},renderSearchResults:function(e){C.initSearchInfo(e),C.result.changeText()},clear:function(){v.val(""),m[0].innerHTML="",p.removeClass("show-results"),C.resetCounters(),u.default.contentActions.search.clear()},dropdownToggleExpanded:function(){var e=$(".results-section .dropdown-content__")[0],t=$(".results-section__top .animated_arrow_down")[0];e.classList.toggle("open"),t.classList.toggle("downArrow")},buttons:{enable:function(){w<T&&h.removeAttr("disabled"),w>1&&_.removeAttr("disabled")},disable:function(){h.attr("disabled","disabled"),_.attr("disabled","disabled")}},result:{next:function(){C.result.setCurrentCountFromSearchRes(b.text()),w++,C.buttons.disable(),C.buttons.enable(),C.result.changeCurrentTermCounter(),u.default.contentActions.search.next(),"activeNextTitle"===C.result.isNextPrevTitle()&&(C.result.switchSection(),C.result.replaceTopSectionTitle(),C.result.updateTopSectionTotal())},previous:function(){C.result.setCurrentCountFromSearchRes(b.text()),w--,C.buttons.disable(),C.buttons.enable(),C.result.changeCurrentTermCounter(),u.default.contentActions.search.previous(),"activePrevTitle"===C.result.isNextPrevTitle(!0)&&(C.result.switchSection(!0),C.result.replaceTopSectionTitle(),C.result.updateTopSectionTotal(!0))},changeText:function(){this.changeCurrentTermCounter()},changeCurrentTermCounter:function(){b.text(this.getCurrentCountFromSearchRes())},getCurrentCountFromSearchRes:function(){return w},getTotalCountFromSearchRes:function(e){return e.count},setCurrentCountFromSearchRes:function(e){w=e},switchSection:function(e){e?m.find(".results-section__items .active").removeClass("active").parent("li").prev("li").children("a").addClass("active"):m.find(".results-section__items .active").removeClass("active").parent("li").next("li").children("a").addClass("active")},replaceTopSectionTitle:function(){A.text(m.find(".results-section__items .active").find(".item-title").text())},updateTopSectionTotal:function(e){var t=A.siblings(".section-start-number"),n=m.find(".results-section__items .active"),a=parseInt(n.parent("li").next("li").find(".item-count").text());e?(t.text(parseInt(b.text())),y.text(parseInt(y.text())-a)):(t.text(parseInt(y.text())+1),y.text(parseInt(n.find(".item-count").text())+parseInt(y.text())))},isNextPrevTitle:function(e){var t,n=A.siblings(".section-start-number"),a=parseInt(m.find(".results-section__items .active").find(".item-count").text());return e?(1!==a&&(R=!0),R&&parseInt(y.text())-parseInt(n.text())+1!==a?n.text(parseInt(b.text())):(R=!1,t="activePrevTitle")):parseInt(b.text())>parseInt(y.text())?t="activeNextTitle":(R=!0,n.text(parseInt(b.text()))),t}},needsTruncation:function(){var e=$(".resultText .term");$(window).on("orientationchange",(function(t){e.text(e.attr("title")),setTimeout((function(){i.default.init(e,1)}),50)}))}},S=C;t.default=S}.apply(t,a))||(e.exports=i)},70119:function(e,t,n){var a,i;n(69826),n(68309),a=[t,n(75190),n(31924),n(64142),n(88450),n(42954),n(69414),n(30086),n(54416),n(17991),n(15712),n(22231),n(19137),n(36301),n(63318),n(32033)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=h(n),a=h(a),i=h(i),o=h(o),r=h(r),s=h(s),l=h(l),d=h(d),u=h(u),f=h(f),c=h(c),p=h(p),g=h(g),m=h(m),v=h(v);var _=[c.default.tips,g.default.tips,p.default.tips,m.default.tips],b=function(e){for(var t=0;t<_.length;t++)if(_[t].name===e)return t},E={useDoiMapping:!1,mathJaxInjected:!1,fetchFiguresFromContent:!1,init:function(){var e=this;e.useDoiMapping=u.default.contentActions.doiMappingModeActions.isInitialized(),a.default.customConfig.profileConfig.materialsSuppressed||(e.fetchFiguresFromContent=u.default.contentActions.shouldGetFiguresFromContent(),e.manageTabSuppression(),e.loadMaterialTab(),$(document).one("click","#filesDesktop, #figures",(function(){$("#"+c.default.pane).find(".figure__image").loadInview()})))},getSubTabPane:function(e){return _[b(e)].pane},getAllMaterials:function(){for(var e=0;e<_.length;e++){var t=_[e].name;this.onMaterialsShow(t)}},getMaterialsTab:function(){return $("#"+i.default.panes.data)},onMaterialsShow:function(e){var t=$("#"+this.getSubTabPane(e)).data("loaded");void 0!==t&&t||(this.loadFiles(e),this.useDoiMapping&&$(o.default.left_panel_info.id+" [data-figures-panel-mobile='figures-panel']").parent().addClass("figures-panel"))},manageTabSuppression:function(){var e=[],t=a.default.customConfig.materialTabs;t.figuresSuppressed&&e.push(b("figures")),t.tablesSuppressed&&e.push(b("tables")),t.mediaSuppressed&&e.push(b("media")),t.supplementsSuppressed&&e.push(b("supplements"));var n=$.grep(_,(function(t,n){return-1==$.inArray(n,e)}));_=n,f.default.isSingleTab=1===_.length},loadMaterialTab:function(){var e=this,t=e.getMaterialsTab(),u=a.default.customConfig.materialTabs,c=(0,d.default)({title:f.default.isSingleTab?_[0].title:n.default.data_title,isSingleTab:f.default.isSingleTab,tabs:_,tabsSuffix:i.default.suffix,isDoiMapping:e.useDoiMapping});e.getMaterialsTab().html($(c));var p=e.fetchFiguresFromContent;if(l.default.isOffline()&&!p)v.default.handleErrorLoadingData(t,n.default.data_offline,"wifi","","offline",n.default.data_title);else if(a.default.customConfig.epubActions.preview)v.default.handleErrorLoadingData(t,n.default.data_preview,"visibility","","",n.default.data_title);else if(u.figuresSuppressed&&u.mediaSuppressed&&u.tablesSuppressed&&u.supplementsSuppressed)v.default.handleErrorLoadingData(t,n.default.data_error,"remove_from_queue","","display",n.default.data_title);else{if($('[data-panel-desktop="materials"]').length>0)return;s.default.initTabItems(t.find(o.default.tabs_info.tablist)),r.default.init()}},loadFiles:function(e){switch(e){case"figures":c.default.loadTab();break;case"tables":g.default.loadTab();break;case"media":p.default.loadTab();break;case"supplements":m.default.loadTab()}}};t.default=E}.apply(t,a))||(e.exports=i)},49481:function(e,t,n){var a,i;n(69826),n(73210),a=[t,n(42954),n(69414),n(31924),n(64142),n(30086),n(81152),n(75190),n(77691),n(17991),n(4105),n(75466),n(93950),n(32033),n(88450),n(53880),n(91710)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=_(n),a=_(a),i=_(i),o=_(o),r=_(r),s=_(s),l=_(l),d=_(d),u=_(u),f=_(f),c=_(c),p=_(p),g=_(g),m=_(m),v=_(v),h=_(h);var b={selectedTab:void 0,useDoiMapping:!1,init:function(){if(!i.default.customConfig.profileConfig.linksSuppressed){var e=this;e.useDoiMapping=u.default.contentActions.doiMappingModeActions.isInitialized(),e.populateData({},e.getEl()),e.useDoiMapping&&r.default.isOffline()&&!EREADER.utils.isMobile()?g.default.handleErrorLoadingData(e.getEl(),l.default.links_offline,"wifi","","offline",l.default.links_title):(v.default.isGetFTREnabled()&&v.default.loadMoreItems(e.getEl().find(".paddedPane")[0]),$(document).one("click",p.default.selector,(function(){e.useDoiMapping||!v.default.isGetFTREnabled()||r.default.isOffline()?(p.default.init(),e.selectedTab=p.default,e.onShow()):(e.selectedTab=p.default,v.default.fetchReferencesLinks())})),$(document).one("click",f.default.selector,(function(){e.useDoiMapping||!v.default.isGetFTREnabled()||r.default.isOffline()?(f.default.init(),e.selectedTab=f.default,e.onShow()):(f.default.init(),e.selectedTab=f.default,EREADER.utils.displaySpinner(e.selectedTab.$el),v.default.fetchCitedByItems().then((function(){v.default.fetchCitedByLinks()})))})),$(document).one("click",c.default.selector,(function(){c.default.init(),e.selectedTab=c.default,e.onShow()})))}},getEl:function(){return $("#"+o.default.panes.links)},onShow:function(){var e=this,t=e.getEl(),n=t.data(e.selectedTab.tab+"-data-loaded");if(void 0===n||!n){if(e.useDoiMapping)return EREADER.utils.isMobile()&&r.default.isOffline()?void g.default.handleErrorLoadingData(e.selectedTab.$el,e.selectedTab.offlineString,"wifi","","offline"):($(m.default.left_panel_info.id+" [data-links-panel-mobile='links-panel']").parent().addClass("links-panel"),void e.loadAccordionTabs(e.selectedTab));v.default.isGetFTREnabled()&&"references"===e.selectedTab.dataRes||e.loadTabContent(e.selectedTab.tab,t)}},loadAccordionTabs:function(e){var t=this,a=e.getAccordionLinksData();void 0!==a&&a.length>0?(n.default.init(),t.appendResponse(e.$el,e.getAccordionTabTemplate(a)),$(e.getAccordionListenerClass()).on("click",(function(){t.accordionLinksListener($(this),e)}))):g.default.handleErrorLoadingData(e.$el,e.emptyString,e.icon,"","display")},accordionLinksListener:function(e,t){var n=t.errorString,a=t.emptyString,o=t.previewString,r=e.find(".accordion-body"),s=t.getResponseKey();if(r.length>0&&(0===r.html().trim().length||r.find(".skeleton").length)){var l=e.data(t.getDataUrlAttr()),d=e.data("doi");if(void 0!==l)if(i.default.customConfig.epubActions.preview)g.default.handleErrorLoadingData(t.$el,o,"visibility","","preview");else{var u=t===p.default||t===f.default;v.default.isGetFTREnabled()&&u?t===p.default?v.default.fetchReferencesForDoiMapping(d,r):t===f.default&&v.default.fetchCitedByForDoiMapping(d,r):EREADER.utils.getData(l).done((function(e){e?(e.hasOwnProperty(s)&&r.html(e[s]),e.error&&g.default.handleErrorLoadingData(r,a,t.icon,"",t.type)):g.default.handleErrorLoadingData(r,n,"remove_from_queue","","display")})).fail((function(e){404===e.status?g.default.handleErrorLoadingData(r,a,t.icon,"",t.type):g.default.handleErrorLoadingData(r,n,"remove_from_queue","","display")}))}}},loadTabContent:function(e,t){var a=this,o=a.selectedTab.url,l=a.selectedTab.errorString,d=a.selectedTab.previewString,f=a.selectedTab.emptyString,c=a.selectedTab.offlineString,m=a.selectedTab.tabClass,h=a.selectedTab.icon,_=a.selectedTab.type,b=a.selectedTab.$el,E=a.selectedTab.dataRes;if(void 0!==o){EREADER.utils.displaySpinner(b);var y=function(i){var o=i[E];i?r.default.isOffline()&&v.default.isGetFTREnabled()&&"references"===E?v.default.appendReferencesItems(i):o?(a.appendResponse(b,o),e===p.default.tab&&n.default.init(),$(m).find("a").attr("target","_blank")):i.error&&g.default.handleErrorLoadingData(b,f,h,"",_):g.default.handleErrorLoadingData(b,l,"remove_from_queue","","display"),t.data(e+"-data-loaded",!0)};r.default.isOffline()?e===p.default.tab?s.default.getReferences().then((function(e){y(e)})).catch((function(e){var t=u.default.contentActions.getReferencesFromContent();$.isEmptyObject(t)||$.isEmptyObject(t.references)?g.default.handleErrorLoadingData(b,l,"remove_from_queue","","display"):y(t)})):g.default.handleErrorLoadingData(b,c,"wifi","","offline"):i.default.customConfig.epubActions.preview?g.default.handleErrorLoadingData(b,d,"visibility","","preview"):EREADER.utils.getData(o).done((function(t){if(e===p.default.tab&&t.error){var n=u.default.contentActions.getReferencesFromContent();$.isEmptyObject(n)||$.isEmptyObject(n.references)?y(t):y(n)}else y(t)})).fail((function(e){404===e.status?g.default.handleErrorLoadingData(b,f,h,"",_):g.default.handleErrorLoadingData(b,l,"remove_from_queue","","display")}))}else console.error("Error linking "+e+" : url is not defined"),g.default.handleErrorLoadingData(b,l,"remove_from_queue","","display")},appendResponse:function(e,t){e.html('<div class="tabbedPane"></div>'),e.find("div").html(t),a.default.scrollingTab(e),h.default.init()},populateData:function(e,t){if(!($('[data-panel-desktop="links"]').length>0)){var n=(0,d.default)({data:e,strings:l.default,recommendationEnabled:c.default.enabled,tabConfig:o.default,isDoiMapping:b.useDoiMapping});t.html($(n)),a.default.init()}}},E=b;t.default=E}.apply(t,a))||(e.exports=i)},56647:function(e,t,n){var a,i;n(69826),n(41539),n(88674),n(32564),a=[t,n(35666),n(31924),n(64142),n(34575),n(30086),n(81152),n(31276),n(75190),n(25574),n(13142),n(9073),n(54396),n(17991),n(32033),n(53986),n(91710)],i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g,m,v,h){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=_(a),i=_(i),o=_(o),r=_(r),s=_(s),l=_(l),d=_(d),u=_(u),f=_(f),c=_(c),p=_(p),g=_(g),m=_(m),v=_(v),h=_(h);var E={getEl:function(){return $("#"+i.default.panes.info)},init:function(){this.getEl().on("show",(function(){E.onShow(),E.styleMetadata()})),$("body").on("click",".authorsContainer",(function(){$(".authorsContainer").toggleClass("expanded")})),this.appendLogoForMobile()},onShow:function(){var e=this.getEl(),t=e.data("loaded");void 0!==t&&t||this.loadMetadata(e)},styleMetadata:function(){var e=$("#info-tab-pane .authors");if(e.height()>44){if(e.hasClass("truncate"))return;e.addClass("truncate"),e.before('<div class="authorsContainer"></div>'),(t=$(".authorsContainer")).append(e.detach()),t.append('<span class="authorsAction"><span class="ellipsis">...</span><button class="btn--action__text expand">See all authors</button><button class="btn--action__text collapse">Hide</button></span>')}else{if(!e.hasClass("truncate"))return;var t;e.removeClass("truncate"),(t=$(".authorsContainer")).before(e.detach()),t.remove()}},loadMetadata:function(e){var t=this,n=a.default.customConfig.metadataUrl;function i(){!a.default.customConfig.openLeftMenu||EREADER.utils.isMobile()||EREADER.utils.isMobileHeight()||$("#leftPanelbtn").trigger("click")}var o=function(n){t.populateMetadata(n,e),e.data("loaded",!0),i(),h.default.init()},l=function(){e.data("loaded",!0),m.default.handleErrorLoadingData(e,d.default.info_error,"remove_from_queue","","display"),i(),h.default.init()};void 0!==n?r.default.isOffline()?s.default.getMetadata(a.default.customConfig.doi).then((function(e){o(e)})).catch((function(e){l()})):EREADER.utils.getData(a.default.customConfig.metadataUrl).done(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=7;break}return e.next=3,g.default.contentActions.getMetadataFromContent();case 3:void 0===(n=e.sent)||""===n.groupInfo?l():(n.groupInfo.metadata=(0,u.default)(n.groupInfo.metadata),o(n)),e.next=8;break;case 7:o(t);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){b(o,a,i,r,s,"next",e)}function s(e){b(o,a,i,r,s,"throw",e)}r(void 0)}))});return function(e){return t.apply(this,arguments)}}()).fail((function(e){l()})):(console.error("Error loading metadata references: url is not defined"),l())},appendLogoForMobile:function(){$("#logoMobile").append((0,v.default)({ariaLabel:"Home Page",classlist:"logo btn btn--light",href:"/",target:"_blank"}))},populateMetadata:function(e,t){var n=(0,f.default)({tabTitle:"Details",data:e});t.html($(n));var i=$("#info-tab-pane .authors");i.first().after((0,c.default)({strings:d.default,keyboard:Keyboard,customConfig:a.default.customConfig,runtimeConfig:EREADER.utils.getRunTimeReaderConfig()}));var r=$("#info-tab-pane .citation_btn");r.length>0?r.first().after((0,p.default)({customConfig:a.default.customConfig})):i.first().after((0,p.default)({customConfig:a.default.customConfig}));var s=$("#info-tab-pane .crossmark-button");s.on("keypress",(function(e){13==e.which&&s.find("img").trigger("click")}));document.addEventListener("keydown",(function(e){"Escape"===e.key&&$(".crossmark-popup__btn-close:visible").click()})),$(".crossmark-button").find("a").on("click",(function(){setTimeout((function(){!function(){var e,t,n=document.activeElement,a=$("#crossmark-widget"),i=$(".crossmark-popup__btn-close:visible");$("body > *:not(#crossmark-widget)").prop("inert",!0),i.attr("aria-label","close"),null===(e=a.find(".crossmark-popup__header a"))||void 0===e||e.focus();var o=function(){$("body > *:not(#crossmark-widget)").prop("inert",!1),$("#crossmark-widget").remove(),$(n).focus()};i.on("click",o),null===(t=a.find(".crossmark-popup"))||void 0===t||t.on("click",(function(){"none"===getComputedStyle(a[0]).display&&o()}))}()}),0)})),l.default.offline(),o.default.init(t)}},y=E;t.default=y}.apply(t,a),void 0===i||(e.exports=i)},73447:function(e,t,n){var a,i;n(69826),n(32564),a=[t,n(75190),n(88450),n(75977),n(45380),n(17991)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={loadToc:function(){var e=$(a.default.activetoc_info.toc),t=r.default.contentActions.tocActions.getToc();if(t.error)e.html((0,o.default)({title:n.default.outline_title,settings:{icon:"list",errorType:"content",text:n.default.outline_empty}}));else{var s=r.default.contentActions.tocActions.isRTL();!function(e){var t=$(a.default.activetoc_info.toc),o=e.is("ol, ul, nav");t.append((0,i.default)({tabTitle:n.default.outline_title}));var r=t.find(".paddedPane");o||(r.append("<ol></ol>"),r=r.find("ol")),r.append(e)}(t),s&&(t[0].setAttributeNS("http://www.w3.org/1999/xhtml","dir","rtl"),t[0].style.direction="rtl"),e.find("li > a").each((function(){$(this).attr("tabindex","-1"),$(this).on("focus",(function(t){var n=e.find('a[tabindex="60"]');n.length>0&&n[0]!==t.target&&n.attr("tabindex","-1"),t.target.setAttribute("tabindex","60")}))})),e.on("click","a",(function(e){try{var t=$(this).attr("href");r.default.contentActions.tocActions.tocElementClicked(t)}catch(e){console.error(e)}finally{var n=$(this);return setTimeout((function(){n.blur()}),500),!1}}))}}};t.default=l}.apply(t,a))||(e.exports=i)},4105:function(e,t,n){var a,i;n(74916),n(15306),a=[t,n(64142),n(31924),n(75190),n(17991),n(53261)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={tab:"citedBy",selector:"."+n.default.tabs.cit+",#"+n.default.tabs.cit,url:a.default.customConfig.citedByUrl,errorString:i.default.citedBy_error,previewString:i.default.citedBy_preview,emptyString:i.default.citedBy_empty,offlineString:i.default.citedBy_offline,dataRes:"citedBy",icon:"format_quote",type:"citations",tabClass:".citedby-list",$el:void 0,init:function(){this.$el=$("#"+n.default.panes.cit)},getAccordionLinksData:function(){var e=[],t=a.default.customConfig.citedByUrl;return $.each(o.default.contentActions.doiMappingModeActions.getDoiMappingItems(),(function(n,a){var i=o.default.contentActions.doiMappingModeActions.getDoiTitle(a.href,"href");if(void 0!==i){var r={title:i,citedByUrl:t.replace(/10\..*/g,a.doi),doi:a.doi};e.push(r)}})),e},getAccordionTabTemplate:function(e){return(0,r.default)({data:e})},getAccordionListenerClass:function(){return".citedBy-list"},getDataUrlAttr:function(){return"citedby-url"},getResponseKey:function(){return"citedBy"}};t.default=l}.apply(t,a))||(e.exports=i)},75466:function(e,t,n){var a,i;n(74916),n(15306),a=[t,n(64142),n(31924),n(75190),n(17991),n(88618)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={tab:"recommendations",selector:"."+n.default.tabs.recommended+",#"+n.default.tabs.recommended,url:a.default.customConfig.recommendationsUrl,errorString:i.default.recommendations_error,previewString:i.default.recommendations_preview,emptyString:i.default.recommendations_empty,offlineString:i.default.recommendations_offline,dataRes:"recommendations",icon:"thumb_up",type:"recommendation",tabClass:".recommendation",enabled:a.default.customConfig.recommendedEnabled,$el:void 0,init:function(){this.$el=$("#"+n.default.panes.recommended)},getAccordionLinksData:function(){var e=[],t=a.default.customConfig.recommendationsUrl;return $.each(o.default.contentActions.doiMappingModeActions.getDoiMappingItems(),(function(n,a){var i=o.default.contentActions.doiMappingModeActions.getDoiTitle(a.href,"href");if(void 0!==i){var r={recommendationsUrl:t.replace(/10\..*/g,a.doi),title:i};e.push(r)}})),e},getAccordionTabTemplate:function(e){return(0,r.default)({data:e})},getAccordionListenerClass:function(){return".recommendations-list"},getDataUrlAttr:function(){return"recommendations-url"},getResponseKey:function(){return"recommendations"}};t.default=l}.apply(t,a))||(e.exports=i)},93950:function(e,t,n){var a,i;n(74916),n(15306),a=[t,n(64142),n(31924),n(75190),n(17991),n(2298)],void 0===(i=function(e,n,a,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=s(n),a=s(a),i=s(i),o=s(o),r=s(r);var l={tab:"ref",selector:"."+n.default.tabs.ref+",#"+n.default.tabs.ref,url:a.default.customConfig.referencesUrl,errorString:i.default.references_error,previewString:i.default.references_preview,emptyString:i.default.references_empty,offlineString:i.default.references_offline,dataRes:"references",icon:"remove_from_queue",type:"display",tabClass:".references-list",$el:void 0,init:function(){this.$el=$("#"+n.default.panes.ref)},getAccordionLinksData:function(){var e=[],t=a.default.customConfig.referencesUrl;return $.each(o.default.contentActions.doiMappingModeActions.getDoiMappingItems(),(function(n,a){if(a.hasAccess){var i=o.default.contentActions.doiMappingModeActions.getDoiTitle(a.href,"href");if(void 0!==i){var r={title:i,referencesUrl:t.replace(/10\..*/g,a.doi),doi:a.doi};e.push(r)}}})),e},getAccordionTabTemplate:function(e){return(0,r.default)({data:e})},getAccordionListenerClass:function(){return".references-list"},getDataUrlAttr:function(){return"references-url"},getResponseKey:function(){return"references"}};t.default=l}.apply(t,a))||(e.exports=i)},22231:function(e,t,n){var a,i;n(69826),n(26699),n(74916),n(32023),n(15306),n(73210),a=[t,n(64142),n(17991),n(30086),n(60588),n(15712),n(75190),n(31924),n(32033),n(74486)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=f(n),a=f(a),i=f(i),o=f(o),r=f(r),s=f(s),l=f(l),d=f(d),u=f(u);var c={tab:n.default.tabs.fig,pane:n.default.panes.fig,tips:{name:"figures",text:s.default.figures,title:s.default.figures_title,tab:n.default.tabs.fig,pane:n.default.panes.fig},loadTab:function(){var e=this,t=a.default.contentActions.shouldGetFiguresFromContent(),n=$("#"+e.pane);if(EREADER.utils.displaySpinner(n),l.default.customConfig.epubActions.preview)d.default.handleErrorLoadingData(n,s.default.data_preview,"visibility","","",s.default.data_title);else if(t)a.default.contentActions.getFiguresFromContent().then((function(t){var a=!1;if(t.media&&0===t.media.length){if(i.default.isOffline())return void d.default.handleErrorLoadingData(n,s.default.figures_offline,"wifi","","offline");l.default.customConfig.doiMappingConfig.enabled?(e.fetchFiguresFromServerDoiMappingMode(e,n),a=!0):e.fetchFiguresFromServer(e,n)}a||c.populateData(t),n.data("loaded",!0),r.default.renderMath(n)})).catch((function(e){console.error("Error fetching all figures from Content File.",e)}));else{if(i.default.isOffline())return void d.default.handleErrorLoadingData(n,s.default.figures_offline,"wifi","","offline");l.default.customConfig.doiMappingConfig.enabled?e.fetchFiguresFromServerDoiMappingMode(e,n):e.fetchFiguresFromServer(e,n,e.pane)}},fetchFiguresFromServerDoiMappingMode:function(e,t){var n=[];$.each(a.default.contentActions.doiMappingModeActions.getDoiMappingItems(),(function(e,t){if(t.hasAccess){var i=a.default.contentActions.doiMappingModeActions.getDoiTitleByDoi(t.doi);void 0!==i&&n.push({title:i,figuresUrl:l.default.customConfig.figuresUrl.replace(/10\..*/g,t.doi),fileName:t.href})}})),n.length>0?(t.html((0,u.default)({data:n})),$(".figures-list").on("click",(function(){var n=$(this),a=n.find(".accordion-body");if(a.length>0&&0===a.html().trim().length||a.find(".skeleton").length){var i=n.data("figures-url");if(void 0!==i){var o=n.data("file-name");EREADER.utils.getData(i).done((function(n){n.error?e.fetchFiguresFromEpubDoiMappingMode(e,o,a,t,"remove_from_queue"):(a.html(""),n=e.splitSubFigures(n),c.populateData(n,a),t.data("loaded",!0),r.default.renderMath(t))})).fail((function(n){404===n.status?e.fetchFiguresFromEpubDoiMappingMode(e,o,a,t,"image"):e.fetchFiguresFromEpubDoiMappingMode(e,o,a,t,"remove_from_queue")}))}}}))):d.default.handleErrorLoadingData(t,s.default.figures_empty,"image","","content")},fetchFiguresFromEpubDoiMappingMode:function(e,t,n,i,o){t?a.default.contentActions.getFiguresFromContent(t).then((function(t){n.html(""),t=e.splitSubFigures(t),c.populateData(t,n),i.data("loaded",!0),r.default.renderMath(i)})).catch((function(e){LIT.Reader.LogEnabled&&console.log(e),n.html(""),d.default.handleErrorLoadingData(n,s.default.figures_error,o,"","display")})):(n.html(""),d.default.handleErrorLoadingData(n,s.default.figures_error,"remove_from_queue","","display"))},fetchFiguresFromServer:function(e,t){var n=a.default.contentActions.shouldGetFiguresFromContent();EREADER.utils.getData(l.default.customConfig.figuresUrl).done((function(i){i.error&&!n?a.default.contentActions.getFiguresFromContent().then((function(e){c.populateData(e),t.data("loaded",!0)})).catch((function(){d.default.handleErrorLoadingData(t,s.default.figures_error,"remove_from_queue","","display")})):(i=e.splitSubFigures(i),c.populateData(i),t.data("loaded",!0))})).fail((function(e){404===e.status?d.default.handleErrorLoadingData(t,s.default.figures_empty,"photo","","content"):d.default.handleErrorLoadingData(t,s.default.figures_error,"remove_from_queue","","display")}))},splitSubFigures:function(e){var t=e.media||e.figures;if(!0===e.error)return e;if(void 0!==t){for(var n=t.length,a=[],i=[],o=0;o<n;o++){var r=t[o];if(void 0!==r.graphic){var s=r.graphic.length;if(s>0)for(var l=0;l<s;l++){var d={};d.alt=r.alt,d.caption=r.caption,d.subCaption=r["sub-caption"],d.id=r.id,d.graphic=r.graphic[l],d.desc=r.desc,d.bookmark=r.bookmark,d.removeDownload="do-not-distribute"===r.graphic[l].usage,d.figureFile=r.figureFile,d.text=r.text,d.fullLink=r.fullLink,d.useLink=r.useLink,a.push(d)}}else a.push(r)}return i.media=a,i}},emptyError:{text:s.default.figures_empty,icon:"photo"},populateData:function(e,t){r.default.populateData(e,this.pane,this.emptyError,null,t),$(document).off("click",".figure__caption figcaption a",this.figureLinkListener),$(document).on("click",".figure__caption figcaption a",this.figureLinkListener),$(document).off("click",".figure-no-image__figcaption a",this.figureLinkListener),$(document).on("click",".figure-no-image__figcaption a",this.figureLinkListener)},figureLinkListener:function(e){e.preventDefault(),e.stopPropagation();var t=this.href.includes(window.location.origin),n=this.getAttribute("href");if(t){var a=$(this).closest("figcaption").data("file-name");a&&a.length&&(n=a),o.default.openContentUsingUrl(n)}else window.open(this.attributes.href.value,"_blank")}},p=c;t.default=p}.apply(t,a))||(e.exports=i)},19137:function(e,t,n){var a,i;a=[t,n(64142),n(30086),n(92161),n(15712),n(75190),n(31924),n(32033)],void 0===(i=function(e,n,a,i,o,r,s,l){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=d(n),a=d(a),i=d(i),o=d(o),r=d(r),s=d(s),l=d(l);var u={tab:n.default.tabs.media,pane:n.default.panes.media,tips:{name:"media",text:r.default.media,title:r.default.media_title,tab:n.default.tabs.media,pane:n.default.panes.media},loadTab:function(){var e=$("#"+this.pane);a.default.isOffline()?l.default.handleErrorLoadingData(e,r.default.media_offline,"wifi","","offline"):s.default.customConfig.epubActions.preview?l.default.handleErrorLoadingData(e,r.default.data_preview,"visibility","","",r.default.data_title):s.default.customConfig.doiMappingConfig.enabled?l.default.handleErrorLoadingData(e,r.default.media_error,"remove_from_queue","","display"):(EREADER.utils.displaySpinner(e),EREADER.utils.getData(s.default.customConfig.mediaUrl).done((function(t){t=o.default.checkAndModifyMedia(t),u.populateData(t),e.data("loaded",!0),o.default.addWaveForms(),i.default.isPlayerInstalled()?i.default.addVideoPlayer(t):i.default.setup(t)})).fail((function(t){404===t.status?l.default.handleErrorLoadingData(e,r.default.media_empty,"video_library","","content"):l.default.handleErrorLoadingData(e,r.default.media_error,"remove_from_queue","","display")})))},emptyError:{text:r.default.media_empty,icon:"video_library"},populateData:function(e){o.default.populateData(e,this.pane,this.emptyError)}},f=u;t.default=f}.apply(t,a))||(e.exports=i)},63318:function(e,t,n){var a,i;a=[t,n(64142),n(30086),n(15712),n(75190),n(16031),n(31924),n(32033),n(92161)],void 0===(i=function(e,n,a,i,o,r,s,l,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=u(n),a=u(a),i=u(i),o=u(o),r=u(r),s=u(s),l=u(l),d=u(d);var f={tab:n.default.tabs.suppl,pane:n.default.panes.suppl,tips:{name:"supplements",text:o.default.supplements,title:o.default.supplements_title,tab:n.default.tabs.suppl,pane:n.default.panes.suppl},loadTab:function(){var e=$("#"+this.pane),t=s.default.customConfig.materialTabs;a.default.isOffline()?l.default.handleErrorLoadingData(e,o.default.supplements_offline,"wifi","","offline"):s.default.customConfig.epubActions.preview?l.default.handleErrorLoadingData(e,o.default.data_preview,"visibility","","",o.default.data_title):s.default.customConfig.doiMappingConfig.enabled?l.default.handleErrorLoadingData(e,o.default.supplements_error,"perm_media","","content"):s.default.customConfig.sharedAccessConfig.isShared&&s.default.customConfig.sharedAccessConfig.displaySupplementsMessage?l.default.handleErrorLoadingData(e,o.default.supplements_shared_access,"supervisor_account","","",!1):t.supplementsLinkOut&&t.linkOutUrl?(e.html((0,r.default)({settings:{linkOutUrl:t.linkOutUrl}})),$("a#supplements-link-out").on("click",(function(e){e.stopPropagation()}))):(EREADER.utils.displaySpinner(e),EREADER.utils.getData(s.default.customConfig.supplementsUrl).done((function(t){t=i.default.checkAndModifyMedia(t),f.populateData(t),i.default.addWaveForms(),e.data("loaded",!0),d.default.isPlayerInstalled()?d.default.addVideoPlayer(t):d.default.setup(t)})).fail((function(t){404===t.status?l.default.handleErrorLoadingData(e,o.default.supplements_empty,"perm_media","","content"):l.default.handleErrorLoadingData(e,o.default.supplements_error,"remove_from_queue","","display")})))},emptyError:{text:o.default.supplements_empty,icon:"perm_media"},populateData:function(e){i.default.populateData(e,this.pane,this.emptyError)}},c=f;t.default=c}.apply(t,a))||(e.exports=i)},36301:function(e,t,n){var a,i;n(69826),n(74916),n(27852),n(15306),n(73210),a=[t,n(64142),n(30086),n(15712),n(75190),n(31924),n(32033)],void 0===(i=function(e,n,a,i,o,r,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=l(n),a=l(a),i=l(i),o=l(o),r=l(r),s=l(s);var d={tab:n.default.tabs.tables,pane:n.default.panes.tables,tips:{name:"tables",text:o.default.tables,title:o.default.tables_title,tab:n.default.tabs.tables,pane:n.default.panes.tables},loadTab:function(){var e=this,t=$("#"+e.pane);a.default.isOffline()?s.default.handleErrorLoadingData(t,o.default.tables_offline,"wifi","","offline"):r.default.customConfig.epubActions.preview&&s.default.handleErrorLoadingData(t,o.default.data_preview,"visibility","","",o.default.data_title),r.default.customConfig.doiMappingConfig.enabled?s.default.handleErrorLoadingData(t,o.default.tables_error,"remove_from_queue","","display"):(EREADER.utils.displaySpinner(t),EREADER.utils.getData(r.default.customConfig.tablesUrl).done((function(n){n=e.splitSubTables(n),d.populateData(n),t.data("loaded",!0),i.default.renderMath(t)})).fail((function(e){404===e.status?s.default.handleErrorLoadingData(t,o.default.tables_empty,"subtitles","","content"):s.default.handleErrorLoadingData(t,o.default.tables_error,"remove_from_queue","","display")})))},splitSubTables:function(e){if(!0===e.error)return e;if(void 0!==e.media){for(var t=e.media.length,n=[],a={},i=0;i<t;i++){var o,r=e.media[i],s="table",l=r.title.endsWith(".")?"":".";if(void 0!==r.tables?o=r.tables:void 0!==r.graphic&&(o=r.graphic,s="graphic"),o){var d=o.length;if(d>0)for(var u=0;u<d;u++){var f={};f.caption=r.caption,f.id=r.id,f.title=1!==d?r.title+l+(u+1):r.title,f.footnotes=r.footnotes,f[s]=o[u],n.push(f)}}else n.push(r)}return a.media=n,a}},downloadLinks:function(){var e=$("#"+this.pane);i.default.downloadLinks(e,this.pane),$("#"+this.pane+" .article__tabFigure").each((function(){var e=$(this),t=e.find(".figure__table");e.find(".table__download").on("click",(function(n){n.preventDefault();var a=$(t[0].outerHTML);$.each(a.find("img"),(function(e,t){$(t).attr("src",t.src)}));var i=a[0].outerHTML,o=document.createElement("a"),r=e.find(".figure__title span").text().replace(/\s\s+/g," ").trim()+".html";if(window.navigator.msSaveBlob){var s=new Blob([i],{type:"text/plain;charset=utf-8;"});window.navigator.msSaveOrOpenBlob(s,r)}else o.setAttribute("download",r),o.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(i)),o.click()}))}))},emptyError:{text:o.default.tables_empty,icon:"subtitles"},populateData:function(e){var t=this.pane;e.isTable=!0,i.default.populateData(e,t,this.emptyError,(function(){d.downloadLinks(this,t)}))}},u=d;t.default=u}.apply(t,a))||(e.exports=i)},15712:function(e,t,n){var a,i;n(69826),n(89554),n(68309),n(74916),n(64765),a=[t,n(75190),n(31924),n(64142),n(34575),n(69414),n(25732),n(72288),n(83464),n(88450),n(32033),n(91710)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=p(n),a=p(a),i=p(i),o=p(o),r=p(r),s=p(s),l=p(l),d=p(d),u=p(u),f=p(f),c=p(c);var g={tablePane:i.default.panes.tables,isSingleTab:!1,renderMath:function(e){if(e.html().search(/<(\w+:|)(?=math)/)>=0)if(window.MathJax)MathJax.Hub.Queue(["Typeset",MathJax.Hub]);else if(!self.mathJaxInjected){var t=document.createElement("script");t.type="text/javascript",t.src=a.default.mathJaxUrl,t.onload=function(){MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0}),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},document.head.appendChild(t),self.mathJaxInjected=!0}},addWaveForms:function(){var e={width:"100%"};e.soundWaveUrl=a.default.soundwave,e.soundWaveWhiteUrl=a.default.soundwave_white,$.justwave(e),$(".justwave").addClass("waveform").removeClass("justwave")},checkAndModifyMedia:function(e){var t=e.media;if(t){for(var n=document.createElement("audio"),a=0;a<t.length;a++)t[a].audio&&!n.canPlayType(t[a].type)&&(t[a].streamed=!1),t[a].streamUrl=!t[a].streamUrl&&t[a].streamed?t[a].downloadUrl:t[a].streamUrl;$(n).remove(),e.media=t}return e},populateData:function(e,t,p,m,v){var h=v||$("#"+t),_=e.media||e.figures;if(_&&0===_.length||e&&e.error)f.default.handleErrorLoadingData(h,p.text,p.icon,"","content");else{var b=a.default.customConfig.mediaPlayersConfig,E=b.player,y={data:e,tabConfig:i.default,isMaterialDownloadable:a.default.customConfig.isMaterialDownloadable,isFlowPlayerEnabled:b.enabled&&E.enabled&&"flowplayer"===E.name,isJWPlayerEnabled:b.enabled&&E.enabled&&"jwplayer"===E.name,strings:n.default};t===g.tablePane&&(_.tableImage=function(){return this.large||this.medium||this.tif},_.tableMediumImage=function(){return this.medium||this.large||this.tif},_.downloadTableImage=function(){return this.tif||this.large||this.medium});var A=(0,l.default)(y);h.html($((0,d.default)({settings:y,figureEntry:A}))),g.isSingleTab&&h.addClass(u.default.tabs_info.active_class),o.default.init(h),m?m():g.downloadLinks(h,t);var R=h.find(".truncatable");s.default.truncate(R),r.default.scrollingTab(h),h.find(".figure__image").loadInview(),$(document).on("click",".call_for_figures",(function(e){var t=$(this),n=t.next("dd"),a=t.attr("data-url");EREADER.utils.getData(a).done((function(e){n.html((0,l.default)({data:e})),t.removeClass("call_for_figures")}))}));var w=document.querySelectorAll("figcaption .title, figcaption p");[].forEach.call(w,(function(e){for(var t=!1,n=e.childNodes,a=0;a<n.length;a++)if(n[a].nodeType===n[a].TEXT_NODE){t=!0;break}t&&e.classList.add("hasText")})),c.default.init()}},downloadLinks:function(e,t){e.find(".media__download").on("click",(function(e){var n=$(this);a.default.customConfig.materialTabs.openDownloadLinkInNewTab&&t===i.default.panes.media&&n.removeAttr("download"),e.stopPropagation()}))}},m=g;t.default=m}.apply(t,a))||(e.exports=i)},32033:function(e,t,n){var a,i;n(69826),a=[t,n(45380),n(91710)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={handleErrorLoadingData:function(e,t,i,o,r,s){var l={settings:{icon:i,class:o,errorType:r,text:t}};s&&(l.title=s),e.find(".panel-error").length||(e.addClass("has-error"),e.html((0,n.default)(l))),a.default.init()}};t.default=o}.apply(t,a))||(e.exports=i)},55765:function(e,t,n){var a;n(69826),void 0===(a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n={getState:function(e,t){return"true"===e.attr(t)},setState:function(e,t,n){e.attr(t,n)},toggleState:function(e,t){var a=!n.getState(e,t);n.setState(e,t,a)}},a={selector:"a, button, iframe",enablePanelFocus:function(e){a.disableAll(),e.focus(),e.find(a.selector).each((function(){a.enableElementFocus($(this))}))},disablePanelFocus:function(e){a.enableAll(),e.find(a.selector).each((function(){a.disableElementFocus($(this))}))},enableElementFocus:function(e){"true"===e.attr("aria-disabled")||n.setState(e,"tabindex","0")},disableElementFocus:function(e){n.setState(e,"tabindex","-1")},enableAll:function(){$(a.selector).each((function(){a.enableElementFocus($(this))}))},disableAll:function(){$(a.selector).each((function(){a.disableElementFocus($(this))}))}},i={WaiAria:n,KeyboardFocus:a};t.default=i}.apply(t,[t]))||(e.exports=a)},26188:function(e,t,n){var a;n(82526),n(41817),n(32165),n(66992),n(41539),n(78783),n(33948),void 0===(a=function(e){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var a={searchInArray:function(e,t,n){for(var a=0;a<e.length;a++){if((void 0===n?e[a]:e[a][n])===t)return a}},pushInToArray:function(e,t,a,i){var o=i||t[a];void 0!==n(o)&&e.push(o)},_manageSuppressed:function(e,t,n,i){var o=$.grep(e,(function(e,t){return-1==$.inArray(e,i)}));a._pushTempArray(t,o,n)},_updateObjectList:function(e,t,n){for(var i in e)n.push(t[a.searchInArray(t,e[i])])},_returnSuppressedArray:function(e,t){return $.grep(e,(function(e,n){return-1==$.inArray(e,t)}))},_pushTempArray:function(e,t,n){for(var i in t){a.searchInArray(n,t[i],"name")>=0&&e.push(n[a.searchInArray(n,t[i],"name")])}}},i=a;t.default=i}.apply(t,[t]))||(e.exports=a)},60039:function(e,t,n){var a,i;n(69826),n(89554),n(82772),n(66992),n(65069),n(47042),n(83710),n(41539),n(74916),n(39714),n(78783),n(4723),n(15306),n(64765),n(23123),n(54747),n(33948),n(60285),a=[t,n(31924),n(17991)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var o=$(window),r={getURLQueryParams:function(){var e={},t=window.location.search;if(t&&t.length)for(var n=(t=t.substring(1)).split("&"),a=0;a<n.length;a++){var i=n[a].split("=");i.length>1&&(e[i[0]]=decodeURIComponent(i[1]))}return e},getEbookUrl:function(e){var t=n.default.customConfig;if(t){var a=t.epubConfig;if(a){var i=a.overrideEpubUrlParam,o=a.epubUrl;if(!0===i&&o&&0!==o.length)return o}}return e},getData:function(e,t,n){return $.ajax({url:e,type:t||"GET",async:n||!0})},isIE11:function(){return navigator.userAgent.indexOf("Trident/7")>-1},isIosDevice:function(){return!!navigator.platform.match(/iPhone|iPod|iPad/)},isSafari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},isEdge:function(){return navigator.userAgent.indexOf("Edge")>-1},isEdgePrivateMode:function(){return!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent)},isFirefox:function(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1},displaySpinner:function(e){e.html('<div style="height: 100vh"><p class="content-loader"></p></div>')},forceStyleRecalculation:function(e){e.hide(),e.height(),e.show()},isReaderStandaloneMode:function(){return void 0!==n.default.customConfig.standaloneMode&&n.default.customConfig.standaloneMode},isTouchDevice:function(){var e=!1;return("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(e=!0),e},ltTablet:function(){return o.width()<1024},isMobile:function(){return o.width()<768},isRealMobileOrTablet:function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)||/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)},isMobileHeight:function(){return o.height()<481},isTablet:function(){return o.width()>767&&o.width()<1025},gtTablet:function(){return o.width()>1024},isLargeDesktop:function(){return o.width()>1440},getRunTimeReaderConfig:function(){return{offline:window.READER_OFFLINE}},fetchFileContentsText:function(e,t){$.ajax({url:e,dataType:"text",async:!1,success:function(e){t(e)}})},getEpisodeType:function(){return n.default.customConfig.sharedAccessConfig.isShared?"share":n.default.customConfig.epubActions.preview?"preview":"full"},generateUID:function(){this.length=32,this.timestamp=+new Date;for(var e,t,a=this.timestamp.toString().split("").reverse(),i="",o=0;o<this.length;++o){i+=a[(e=0,t=a.length-1,Math.floor(Math.random()*(t-e+1))+e)]}return n.default.customConfig.doi+"_"+i},isOffline:function(){return window.READER_OFFLINE},setAttributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},chunkArray:function(e,t){for(var n,a=e.length,i=[],o=0;o<a;o+=t)n=e.slice(o,o+t),i.push(n);return i},isMaterialViewerOpen:function(){return $(document).find(".material-viewer").hasClass("open")},isFullScreen:function(){return void 0!==document.webkitIsFullScreen&&!0===document.webkitIsFullScreen||void 0!==document.mozFullScreen&&!0===document.mozFullScreen||void 0!==document.msFullscreenElement&&null!==document.msFullscreenElement},isAd:function(e){return"CustomReaderCamp-DYNAMIC"===e||"CustomReaderCamp-TOP"===e||"CustomReaderCamp-BOTTOM"===e},setIfPropertyNotPresent:function(e,t,n){void 0===e[t]&&(e[t]=n)},fixPositionAfterResizing:function(e,t){var n=t[0].offsetTop/e.offsetTop,i=e.relativeOffsetTop*n;$(a.default.contentActions.getReadingContainerSelector())[0].scrollTop=t[0].offsetTop+i},scrolledContentFocus:function(){var e;EREADER.utils.isTouchDevice()||(e=$("#reader-right-panel")[0])&&e.contains(document.activeElement)||!EREADER.shouldFocusContent||$(a.default.displayActions.getScrollFocusSelector()).focus()},getMathJaxUrl:function(){var e=n.default.mathJaxUrl;try{if(EREADER.utils.isOffline())if(LIT.Reader.MathJaxUrl)e=LIT.Reader.MathJaxUrl;else{var t=new XMLHttpRequest;t.open("GET",e,!1),t.onload=function(){200===t.status?e=window.URL.createObjectURL(new Blob([t.response],{type:"text/javascript"})):console.error("Failed to load MathJax in offline mode")},t.onerror=function(){console.error("Failed to load MathJax in offline mode")},t.send()}}catch(e){console.error("Failed to load MathJax in offline mode")}return e},escapeMarkupEntities:function(e){return e.replace(/&(?!amp;|lt;|gt;|quot;|apos;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};t.default=r}.apply(t,a))||(e.exports=i)},74584:function(e,t,n){var a,i;n(69826),n(29253),a=[t,n(17991),n(88450)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={isPDF:function(){return n.default.displayActions.isPDF()},isZoomButtonsDisplayed:function(){return"none"!==$(".zoom-wrapper").css("display")},shouldUseLoader:function(){return n.default.displayActions.shouldUseLoader()},isScrolling:function(){return n.default.displayActions.isScrolling()},isFacingPages:function(){return n.default.displayActions.isFacingPages()},isBookViewScrollable:function(e){return n.default.displayActions.isBookViewScrollable()},toggleDisplayFormat:function(){var e=n.default.displayActions.toggleDisplayFormat();$("#option-columns").find("input").prop("disabled",e)},reset:function(){var e=$(a.default.checklayout_info.reading_area),t=$(a.default.navbar_info.id);e.removeClass(a.default.checklayout_info.facing),e.removeClass(a.default.checklayout_info.fixed),e.removeClass(a.default.checklayout_info.scroll),t.removeClass(a.default.checklayout_info.fixed)},check:function(){var e=$(a.default.checklayout_info.reading_area);if(o.reset(),o.isPDF()&&(e.addClass(a.default.checklayout_info.fixed),$(a.default.navbar_info.id).addClass(a.default.checklayout_info.fixed)),$(a.default.navbar_info.id).find(".flex-container").removeClass("hidden"),$(a.default.dropdown_info.trigger).each((function(){"none"===$(this).css("display")&&($(this).hasClass("reflow")||$(this).hasClass("fxl"))&&$(this).remove()})),!o.isPDF()){var t=$(".js__paging-select");t.attr("title",t.data("alt-title"))}o.isScrolling()?e.addClass(a.default.checklayout_info.scroll):o.isFacingPages()&&e.addClass(a.default.checklayout_info.facing)}},r=o;t.default=r}.apply(t,a))||(e.exports=i)},69411:function(e,t,n){var a;n(74916),n(15306),void 0===(a=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0;var n={init:function(e,t,n,a,i,o,r){var s=2;void 0===a&&(a=!1),void 0===i&&(i=""),void 0===r&&(r=!1),n&&(s=1);var l=e.css("line-height").replace("px","")*t;e.height()>s*l&&($clamp(e[0],{clamp:l+"px",useNativeClamp:!1,truncationChar:i,truncationHTML:o,animate:r}),e.addClass("truncated"),e.css({"max-height":l,overflow:"hidden"}))},destroy:function(e){e.html(e.data("originalText")),e.removeClass("truncated"),e.css({"max-height":"",overflow:"unset"})}};t.default=n}.apply(t,[t]))||(e.exports=a)},92161:function(e,t,n){var a,i;n(3843),n(83710),n(68309),a=[t,n(88450),n(31924),n(30086),n(70371)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=r(n),a=r(a),i=r(i),o=r(o);function s(e){$("video, audio").not(this).each((function(){this.pause()})),l.pauseJWPlayer(l.jWPlayerEnabled()),"audio"===this.tagName.toLowerCase()&&o.default.trigger(o.default.eventTypes.MATERIAL_ITEM_ACTION,{customProperties:{eventTime:Date.now(),materialAction:"Play Audio"}})}var l={isPlayerInstalled:function(){return"undefined"!=typeof flowplayer||"undefined"!=typeof jwplayer},setup:function(e){$(window).on("mediaPlayerLoaded",(function(){l.addVideoPlayer(e)}));var t=a.default.customConfig.mediaPlayersConfig;i.default.isOffline()||t&&t.enabled&&this.setupPlayer(t)},setupPlayer:function(e){var t=e.player;void 0!==t&&t.enabled&&("flowplayer"===t.name?this.setupFlowPlayer(t):"jwplayer"===t.name&&this.setupJWPlayer())},setupFlowPlayer:function(e){var t=this.getScriptEl(e.playerScript),n=this.getCssLinkEl(e.css),a=this.getScriptEl("//releases.flowplayer.org/hlsjs/flowplayer.hlsjs.min.js");a.onload=function(){$(window).trigger("mediaPlayerLoaded")},document.getElementsByTagName("head")[0].appendChild(n),document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(a)},setupJWPlayer:function(){a.default.customConfig.standaloneMode;var e=a.default.jwplayer,t=this.getScriptEl(e);t.onload=function(){$(window).trigger("mediaPlayerLoaded")},document.getElementsByTagName("head")[0].appendChild(t)},getCssLinkEl:function(e){var t=document.createElement("link");return t.href=e,t.rel="stylesheet",t},getScriptEl:function(e){var t=document.createElement("script");return t.src=e,t.type="text/javascript",t.async=!0,t},jWPlayerEnabled:function(){var e=a.default.customConfig.mediaPlayersConfig,t=e.player;return e.enabled&&t.enabled&&"jwplayer"===t.name},addVideoPlayer:function(e){var t=a.default.customConfig.mediaPlayersConfig,n=t.player,i=t.enabled&&n.enabled&&"flowplayer"===n.name,o=t.enabled&&n.enabled&&"jwplayer"===n.name;if(!0===e.error)return e;if(void 0!==e.media){for(var r=e.media,s=0;s<r.length;s++)r[s].video&&(i&&"undefined"!=typeof flowplayer?l.initFlowPlayer("#player_container-"+r[s].id,n.key):o&&"undefined"!=typeof jwplayer&&jwplayer("player_container_jw-"+r[s].id).setup({file:r[s].streamUrl,key:n.key,width:"100%",height:"210px"}));l.pauseMediaWhenPlayAnother(i,o),l.pauseMediaWhenLeftMenuIsClosed(i,o),l.pauseMediaWhenMaterialViewerIsOpened(i,o)}},initFlowPlayer:function(e,t){$(e).flowplayer({swf:"//releases.flowplayer.org/6.0.5/flowplayer.swf",swfHls:"//releases.flowplayer.org/6.0.5/flowplayerhls.swf",script:"//releases.flowplayer.org/6.0.5/embed.min.js",key:t,tooltip:!1,wmode:"opaque",embed:!1}).on("error",(function(){$(e+" .fp-message").html("An error has occurred trying to display this video. Please reload the page. If reloading the page doesn't work then please contact the support administrator.")})).on("resume",(function(){for(var e=$(this).data("flowplayer-instance-id"),t=$(".flowplayer"),n=0;n<t.length;n++)n!==e&&flowplayer(n).pause();l.pauseAudioPlayer(),o.default.trigger(o.default.eventTypes.MATERIAL_ITEM_ACTION,{customProperties:{eventTime:Date.now(),materialAction:"Play Video"}})}))},pauseMediaWhenMaterialViewerIsOpened:function(e,t){var n=this;$(document).on("show.material-viewer hide.material-viewer",(function(){$("video, audio").each((function(){this.pause()})),n.pauseJWPlayer(t)}))},pauseMediaWhenLeftMenuIsClosed:function(e,t){var a=this;$(n.default.left_panel_info.close_btn).on("click",(function(){$("body").hasClass("info-visible")||($("video, audio").each((function(){this.pause()})),a.pauseJWPlayer(t))}))},pauseMediaWhenPlayAnother:function(e,t){$("video, audio").each((function(){var e=$(this);e.off("play",s),e.on("play",s)})),this.pauseJWPlayerWhenPlayAnother(t)},pauseJWPlayerWhenPlayAnother:function(e){if(e){var t=$(".jwplayer, object"),n=[];t.each((function(e,t){n.push(t.id)})),$.each(n,(function(e,t){jwplayer(t).on("play",(function(){$.each(n,(function(e,n){if(t===n)return!0;jwplayer(n).pause(!0)})),l.pauseAudioPlayer(),o.default.trigger(o.default.eventTypes.MATERIAL_ITEM_ACTION,{customProperties:{eventTime:Date.now(),materialAction:"Play Video"}})}))}))}},pauseJWPlayer:function(e){e&&$(".jwplayer, object").each((function(){"PLAYING"!==jwplayer(this).getState().toUpperCase()&&"BUFFERING"!==jwplayer(this).getState()||jwplayer(this).pause(!0)}))},pauseFlowPlayer:function(e){if(e)for(var t=$(this).data("flowplayer-instance-id"),n=$(".flowplayer"),a=0;a<n.length;a++)a!==t&&flowplayer(a).pause()},pauseAudioPlayer:function(){$("audio").each((function(){this.pause()}))},pauseAllPlayers:function(e,t){l.pauseJWPlayer(t),l.pauseFlowPlayer(e),l.pauseAudioPlayer()}},d=l;t.default=d}.apply(t,a))||(e.exports=i)},42954:function(e,t,n){var a,i;n(69826),a=[t,n(88450),n(55765)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={headerClickHandlerAdded:!1,init:function(){var e=$(n.default.accordion_info.accordion);e.length&&e.each((function(){void 0===$(this).attr("role")&&($(this).attr({role:"tablist","aria-multiselectable":"true"}),o.initStates($(this).find(n.default.accordion_info.accordion_head)),$(this).find(n.default.accordion_info.accordion_body).attr({role:"tabpanel"}))})),this.headerClickHandlerAdded||($(document).on("click",n.default.accordion_info.accordion_head,(function(){o.toggle($(this))})),this.headerClickHandlerAdded=!0)},initStates:function(e){e.attr({role:"tab","aria-selected":"false","aria-expanded":"false","aria-disabled":"false"}),e.attr("tabindex","0"),e.hasClass(n.default.accordion_info.disabled)&&(a.default.WaiAria.toggleState(e,"aria-disabled"),e.attr("tabindex","-1"))},close:function(e){$(n.default.accordion_info.accordion).hasClass(n.default.accordion_info.expandable_class)||$(n.default.accordion_info.accordion_head+'[aria-expanded="true"]').each((function(){$(this).is(e)||(a.default.WaiAria.toggleState($(this),"aria-expanded"),a.default.WaiAria.toggleState($(this),"aria-selected"),$(this).next(n.default.accordion_info.accordion_body).slideToggle())}))},toggle:function(e){var t=e.hasClass(n.default.accordion_info.disabled);o.close(e);var i=e.closest("div.paddedPane.links-panel")[0],r=e.closest("div.paddedPane.figures-panel")[0];i&&(i.scrollTop=0),r&&(r.scrollTop=0),t||(a.default.WaiAria.toggleState(e,"aria-expanded"),a.default.WaiAria.toggleState(e,"aria-selected"),e.next(n.default.accordion_info.accordion_body).slideToggle((function(){var t=$('.accordion-header[aria-expanded="true"]');if(t.length>0&&(e.offset().top<0||!EREADER.utils.isMobile())&&t[0].scrollIntoView(!1),t.length>0){var n,a,i=t.parent().offset().top-t.parent().parent().offset().top;null===(n=t.closest("div.paddedPane.links-panel")[0])||void 0===n||n.scrollTo(0,i),null===(a=t.closest("div.paddedPane.figures-panel")[0])||void 0===a||a.scrollTo(0,i)}e.attr("aria-expanded")&&e.parent(".help-tip")[0]&&e.parent(".help-tip")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})})))}},r=o;t.default=r}.apply(t,a))||(e.exports=i)},43549:function(e,t,n){var a,i;n(69826),a=[t,n(88450),n(17991)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o,r=-1,s=!1,l={init:function(){(o=$(n.default.activetoc_info.toc)).on("click","a",(function(){var e=$(this);o.find("a").removeClass(n.default.activetoc_info.active),e.addClass("clicked "+n.default.activetoc_info.active),s=!0})),(EREADER.utils.isMobile()||EREADER.utils.isMobileHeight())&&$("#chapters").on("click",(function(){l.scrollTocIntoView(!0)}))},updateToc:function(){var e=a.default.contentActions.tocActions.getToMakeActive(o,s),t=o.find("a.clicked");t.length>0&&(e=t,t.removeClass("clicked")),e&&1===e.length?this.changeActive(e,a.default.contentActions.tocActions.getIndex()):-1===r&&(e=o.find("[href]").first(),l.changeActive(e,0)),s=!1},changeActive:function(e,t){var a=o.find("."+n.default.activetoc_info.active);void 0!==a&&(a.removeClass(n.default.activetoc_info.active),a.attr("tabindex","-1")),void 0!==e&&(e.addClass(n.default.activetoc_info.active),e.attr("tabindex","60"),l.scrollTocIntoView()),void 0!==t&&(r=t)},scrollTocIntoView:function(e){var t=o.find("."+n.default.activetoc_info.active);if(1===t.length)try{t[0].scrollIntoView({behavior:e?"instant":"smooth",block:"center",inline:"nearest"})}catch(e){t[0].scrollIntoView(!0)}}},d=l;t.default=d}.apply(t,a))||(e.exports=i)},96007:function(e,t,n){var a,i;n(69826),n(68309),n(32564),a=[t,n(88450),n(55765),n(7999)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var r={timeout:null,events:{open:{name:"dropdown:open",config:{cancelable:!0}},opened:{name:"dropdown:opened"},close:{name:"dropdown:close",config:{cancelable:!0}},closed:{name:"dropdown:closed"}},init:function(){$(n.default.dropdown_info.widget).length>0&&$(n.default.dropdown_info.widget).each((function(){var e=$(this);e.data("dropdown")||(r.initDropdown(e),e.data("dropdown",!0))}))},initDropdown:function(e){var t=e.find(n.default.dropdown_info.trigger);0!==t.length&&(t.data("initialized")||(a.default.WaiAria.setState(t,"aria-haspopup","true"),a.default.WaiAria.setState(t,"aria-expanded","false"),t.data("initialized",!0),t.off("click.initDropdown",r.dropdownClicked).on("click.initDropdown",r.dropdownClicked)),(t.hasClass(n.default.dropdown_info.disabled_class)||t.hasClass("js__disabled__permissions"))&&(a.default.WaiAria.setState(t,"aria-disabled",!0),t.attr("tabindex","-1")))},dropdownClicked:function(e){var t=$(e.currentTarget),a=t.hasClass("disabled");if(EREADER.utils.scrolledContentFocus(),t.is(n.default.right_panel_info.close_btn)||$("body").removeClass(n.default.right_panel_info.panel_class),!a){r.toggleDropdown(t,e);var o=$("#"+n.default.alertpopups_info.alert_id);o&&o.hasClass("access-tip")&&i.default.removePopup()}},toggleDropdown:function(e,t){var i=!a.default.WaiAria.getState(e,"aria-expanded"),o=i?r.events.open:r.events.close;if(e[0].dispatchEvent(new CustomEvent(o.name,o.config))){if(r.reset(!i),i&&($("body .tooltip").remove(),$("body").attr("data-dropdown","active"),a.default.WaiAria.setState(e,"aria-expanded",i),e.next().one("transitionend",(function(){e[0].dispatchEvent(new CustomEvent(r.events.opened.name))})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.addClass("fadeIn")}),1),$(".scrollToTop").scrollTop(0)),e.removeClass("updated"),i){if(EREADER.utils.ltTablet())$(n.default.var_container).hasClass(n.default.left_panel_info.panel_class)&&!e.closest(".getFTR").length&&$(n.default.left_panel_info.mobile_btn).trigger("click");var s=e.is(n.default.save_offline_info.save_offline_btn)?e.closest(".navbar-right"):e.parent(),l=s.data("persist")?' style="display: none;"':"",d='<div id="'+n.default.dropdown_info.overlay_id+'"'+l+"></div>";s.append(d),$("#"+n.default.dropdown_info.overlay_id).off("click.toggleDropdown",r.reset).on("click.toggleDropdown",r.reset),e.focus()}t.preventDefault()}},reset:function(e,t){var i=n.default.dropdown_info.trigger+'[aria-expanded="true"]';i+=t?":not("+n.default.right_panel_info.close_btn+")":"";var o=$(i);0!==o.length||e?o.each((function(){var e=$(this),t=e.is(n.default.save_offline_info.save_offline_btn)?e.closest(".navbar-right"):e.parent();if(e.next().one("transitionend",(function(){a.default.WaiAria.setState(e,"aria-expanded",!1),e[0].dispatchEvent(new CustomEvent(r.events.closed.name))})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.removeClass("fadeIn"),$("body").removeAttr("data-dropdown")}),1),t.find("#"+n.default.dropdown_info.overlay_id).remove(),t.hasClass("pagination")){var i=$(n.default.pagination_info.page_input);i.val(""),i.attr("value","")}})):$("body").removeAttr("data-dropdown")}},s=r;t.default=s}.apply(t,a))||(e.exports=i)},6818:function(e,t,n){var a,i;n(69826),a=[t,n(75190),n(74584),n(86370)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var r={cloneContainer:".printRanges",cloneEl:".cloned",errorContainer:".print_errors",cloneError:"error",cloneSuccess:"success",tagsViewOnly:"viewOnly",tagInputContainer:".tagsInput",tagInputs:'[data-role="tagsinput"]',init:function(){var e=$(document);$("body").off("input.formInput","input").on("input.formInput","input",(function(e){$(e.currentTarget).attr("data-empty",!e.currentTarget.value),$(e.currentTarget).parents(".fieldWithButton").attr("data-empty",!e.currentTarget.value)}));var t=r.cloneContainer+" .add";e.off("click.formClone",t).on("click",t,(function(e){r.clone.add($(this)),window.dispatchEvent(new Event("CloneAdd"))}));var n=r.cloneContainer+" .remove";e.off("click.formRemoveCloned",n).on("click.formRemoveCloned",n,(function(e){r.clone.remove($(this)),window.dispatchEvent(new Event("CloneRemove"))}));var a="input[type=number]";e.off("keydown.form paste.form",a).on("keydown paste",a,(function(e){return Keyboard.comparePressedKey(e,["0","1","2","3","4","5","6","7","8","9","Enter","Backspace","Delete","Tab","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"])})),r.tags.init()},clone:{add:function(e){e.parents(r.cloneEl).clone().appendTo(r.cloneContainer);var t=$(r.cloneEl).last().find("input");r.error.removeClass(t),t.val("")},remove:function(e){var t=!1;e.parents(".printPopup ").length>0&&(r.error.reset($(".printPreview")),t=!0),e.parents(".cloned").remove(),t&&r.emptyFieldsTest($(".printPreview"))}},emptyFieldsTest:function(e){var t,i=!0;a.default.isPDF()?t=$(".printPageInput"):t=$('input[type="radio"]:checked').next("label").find(".printPageInput");return t.length>0&&t.each((function(t){var a=$(this);if(""===a.val()){i=!1,r.error.addClass(a);var o="";0===$(".emptyInputError").length&&(o='<span class="emptyInputError">'+n.default.printing_error_empty_input+"</span>"),r.error.test(a,e,!0,o)}})),!i},submit:{enable:function(e){e.prop("disabled",!1)},disable:function(e){e.prop("disabled",!0)}},error:{addClass:function(e){e.addClass(r.cloneError)},removeClass:function(e){e.removeClass(r.cloneError)},appendErrorMsg:function(e){$(r.errorContainer).append((0,i.default)({msg:e}))},test:function(e,t,n,a){n?(r.error.addClass(e),r.submit.disable(t),r.error.appendErrorMsg(a)):(r.error.removeClass(e),0===$("input.error").length&&($(r.errorContainer).empty(),r.submit.enable(t)))},reset:function(e){r.error.removeClass($("."+r.cloneError)),$(r.errorContainer).empty(),r.submit.enable(e)}},tags:{init:function(){$(r.tagInputs).tagsinput({tagClass:"",focusClass:"",confirmKeys:[13,44,188],onTagExists:function(e,t){t.hide().fadeIn()}})},mode:{edit:function(){$(r.tagInputContainer).removeClass(r.tagsViewOnly),$(r.tagInputContainer).append('<input type="text"/>')},viewOnly:function(){$(r.tagInputContainer).addClass(r.tagsViewOnly),$(r.tagInputContainer).find("input").remove()}},destroyAll:function(){$(r.tagInputs).tagsinput("destroy")}}},s=r;t.default=s}.apply(t,a))||(e.exports=i)},34575:function(e,t,n){var a,i;n(57327),n(69826),n(26699),n(66992),n(47042),n(3843),n(83710),n(68309),n(41539),n(74916),n(32023),n(78783),n(15306),n(73210),n(33948),n(60285),a=[t,n(31924),n(25732),n(69411),n(55765),n(88450),n(92161),n(69414),n(96007),n(4325),n(75190),n(68822),n(45380),n(70371)],void 0===(i=function(e,n,a,i,o,r,s,l,d,u,f,c,p,g){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=m(n),a=m(a),i=m(i),o=m(o),r=m(r),s=m(s),l=m(l),d=m(d),u=m(u),f=m(f),c=m(c),p=m(p),g=m(g);var v,h,_,b,E,y,A,R,w,T,C,S,D,P,O,M,k,L,I,x,N,F,U,B,j,V,H,K,z,W,G,q=!0,Y=0,Z=!1,J=$(window),X=$(document),Q=X.find(".material-viewer"),ee=X.find("figure:not(.holder), .figure:not(.holder)"),te="",ne=null,ae="is-hidden",ie="js-open",oe=!1,re=window.pageYOffset,se=".download-toggle-hidden",le={init:function(e){if(le.append(),de.expand(e),!EREADER.utils.isMobile()){var t=w.find(".icon");C.addClass(ie),R.addClass(ie),t.addClass("flip-horizontal")}q&&(q=!1,de.control(),EREADER.transpileContent(),J.on("resize.materialViewer",(function(){EREADER.transpileContent(),F.hasClass(ie)&&!EREADER.utils.isMobile()&&F.removeClass(ie),de.truncate()})))},append:function(){if(0===$(".material-viewer").length){var e={isMaterialDownloadable:n.default.customConfig.isMaterialDownloadable,strings:f.default};$("body").append((0,c.default)(e));var t=X.find(".material-viewer").find(r.default.menudrawer_info.drawer);u.default.initWaiRoles(t),u.default.initTriggers(t)}},destroy:function(){Q.remove()}},de={variablesInit:function(){Q=X.find(".material-viewer"),ee=X.find("#reader-left-panel figure.material-fig"),E=Q.find(".material-viewer_hold_fig"),y=Q.find(".material-viewer_hold_list"),A=Q.find(".material-viewer_figCaption .js__caption"),te=Q.find(".material-viewer_title_text"),v=n.default.customConfig.mediaPlayersConfig,h=v.player,_=v.enabled&&h.enabled&&"flowplayer"===h.name,b=v.enabled&&h.enabled&&"jwplayer"===h.name,R=Q.find(".material-viewer_cent_left"),w=R.find(".material-viewer_ctrl_caption"),T=Q.find(".material-viewer_top_left .material-viewer_ctrl_caption"),F=Q.find(".material-viewer_cent_right"),C=Q.find(".material-viewer_cent_center"),S=Q.find(".material-viewer_ctrl_next, .material-viewer_ctrl_prev"),D=Q.find(".material-viewer_navigation"),P=Q.find(".material-viewer_zoom"),O=Q.find(".zoom-in"),M=Q.find(".zoom-out"),k=Q.find(".zoom-fit"),L=Q.find("figure"),I=$(".material-viewer_ctrl_browse").parent(),x=$(".grid-view"),N=Q.find(".dropdown-trigger"),U=Q.find(".media__download"),B=$(".sorting-list"),j=$(".sorting_title_selection")},control:function(){y.empty(),Q.find("a, button").not(".media__download").each((function(){var e=$(this);e.on({click:function(t){if(t.preventDefault(),t.stopPropagation(),e.blur(),e.hasClass("material-viewer_ctrl_close"))de.on.hide(),de.sortingMenu.reset();else if(e.hasClass("material-viewer_ctrl_next"))de.navigation.next();else if(e.hasClass("material-viewer_ctrl_prev"))de.navigation.prev();else if(e.hasClass("material-viewer_ctrl_caption")){var n=w.find(".icon");n.removeClass("flip-horizontal"),EREADER.utils.isMobile()&&$("video, audio").each((function(){this.pause()})),R.hasClass(ie)||n.toggleClass("flip-horizontal"),T.toggleClass("active"),C.toggleClass(ie),R.toggleClass(ie)}else e.hasClass("material-viewer_ctrl_browse")?de.gridView($(this)):e.hasClass("material-viewer_ctrl_return")?(de.figureView($(this)),de.sortingMenu.reset()):e.hasClass("material-viewer_ctrl_sorting")&&(F.find("[data-panel-mobile]").removeClass("hidden"),F.toggleClass(ie))}})})),X.keydown((function(e){Q.hasClass("open")&&(Keyboard.comparePressedKey(e,["ArrowLeft"])?de.navigation.prev():Keyboard.comparePressedKey(e,["ArrowRight"])?de.navigation.next():Keyboard.comparePressedKey(e,["Escape"])&&de.on.hide())})),k.on("click",(function(){var e=$(this);e.hasClass("width")?de.zoom.fitWidth():e.hasClass("height")&&de.zoom.fitHeight()})),l.default.init(),d.default.init();var e=$(".figure__image-btn");e.on("keyup.popup",(function(e){Keyboard.comparePressedKey(e,["Enter"])&&$(this).find(".figure__image").trigger("click")})),e.on("click",(function(e){$(this).find(".figure__image").trigger("click")}))},expand:function(e){de.variablesInit(),e.find("figure").each((function(){var e=$(this);function t(t,n,a,i){t.preventDefault(),de.sortingMenu.reset(),e.hasClass("ui-disabled")||0===Q.length||0===!E.length||(de.updateCenterPanels(!1),ne=a,de.on.show(n,a,i)),g.default.trigger(g.default.eventTypes.MATERIAL_ITEM_ACTION,{customProperties:{eventTime:Date.now(),materialAction:"open "+i}})}e.data("graphical-abstract-image")||e.data("number",Y++),EREADER.utils.isIE11()&&e.find(".figure__image-btn").on("click",(function(t){e.find(".figure__image").trigger("click")})),e.find(".figure__image").on({click:function(n){n.stopPropagation();var a=e.data("number");t(n,e,a,"figure")}}),e.find(".figure__title, .figure__details-title").on({click:function(n){var a=e.data("type"),i=e.data("number"),o=e.data("streamed");"supplement"!==a&&("video"!==a&&"audio"!==a||o)&&t(n,e,i,a)}}),e.find(".table-internal-link").on({click:function(e){var n=$("#"+tabConfig.panes.tables).find("[data-id='"+e.target.id+"']"),a=n.data("number");t(e,n,a,"table")}});var n=e.find("figcaption"),a=0===n.children().length&&!n.text(),i=0===e.find(".html, .desc, .figure__details").length;a&&i||e.find(".figure__caption").addClass("hasDescription")}))},replace:function(e,t){de.load.publicationTitle(e),Z=e.data("graphical-abstract-image");var n=de.load.material(e);n.data("removeDownload")?(U.removeAttr("href").addClass("hidden"),$(se).prev().addClass("no-border")):(U.removeClass("hidden"),$(se).prev().removeClass("no-border"),de.load.downloadLinks(e,n,t)),de.load.details(e,t),de.zoom.check(),de.navigation.setStatus(),de.truncate()},toggleViewModes:function(e){y.empty(),e?(E.addClass(ae),D.addClass(ae),I.addClass(ae),x.removeClass(ae),te.parent().parent().addClass(ae),P.addClass(ae),de.zoom.reset(),de.updateCenterPanels(!0),$(".material-viewer_top_left .element-view").addClass(ae),$(se).addClass(ae),y.removeClass(ae),ee.each((function(){var e=$(this).data("type"),t=$(this).data("id"),n=$(this).data("link"),i="grid-container-"+t;if($(this).hasClass("article__tabFigure")){var o=$(this).clone(!0);a.default.destroy(o.find(".html, .desc, figcaption"));var r=o.find(".label");if(2===r.length&&r.eq(0).text(r.eq(0).text()+" - "+r.eq(1).text()),y.append(o),"video"===e&&n){b?(o.find(".jwplayer").replaceWith("<div class='jwplayer' id='"+i+"'></div>"),jwplayer(i).setup({file:n,key:h.key,width:"100%",height:"100%"}),s.default.pauseJWPlayerWhenPlayAnother(b)):_&&(o.find(".flowplayer").replaceWith("<div class='flowPlayer' id='"+i+"'><video><source type='application/x-mpegurl' src='"+n+"'></video></div>"),s.default.initFlowPlayer("#"+i,h.key))}}})),y.find(".figure__image").loadInview(y),de.sortingMenu.init()):Z?(D.addClass(ae),I.parent().addClass(ae),x.addClass(ae)):(E.removeClass(ae),I.removeClass(ae),I.parent().removeClass(ae),$(".material-viewer_top_left .element-view").removeClass(ae),te.parent().parent().removeClass(ae),D.removeClass(ae),x.addClass(ae),de.updateCenterPanels(!1),y.addClass(ae),$(se).removeClass(ae),de.getCurrentFig().has("img").length&&P.removeClass(ae))},updateCenterPanels:function(e){var t=w.find(".icon");e?(R.addClass(ae),F.removeClass(ae),C.removeClass(ie),F.removeClass(ie)):(R.removeClass(ae),F.addClass(ae),t.addClass("flip-horizontal"),EREADER.utils.isMobile()?(R.removeClass(ie),C.removeClass(ie)):(R.addClass(ie),C.addClass(ie)))},gridView:function(){de.toggleViewModes(!0);var e={};e.soundWaveUrl=n.default.soundwave,e.soundWaveWhiteUrl=n.default.soundwave_white,$(document).trigger("show.material-viewer"),W.length>0&&(W.find(".justwave_wrapper").remove(),W.find("audio").addClass("justwave-gridView").removeClass("waveform"),$.justwave(e,"justwave-gridView"),$(".-gridView").addClass("waveform").removeClass("justwave-gridView"))},figureView:function(){de.toggleViewModes(!1)},on:{show:function(e,t,n){var a=$("body .tooltip");a.length>0&&a.remove(),re=window.pageYOffset,X.attr("data-active","materialViewer"),oe=!0,ne=t,de.replace(e,n),Q.addClass("open"),de.zoom.check(),de.toggleViewModes(!1),de.truncate(),o.default.KeyboardFocus.enablePanelFocus(Q),$(document).trigger("show.material-viewer")},hide:function(){oe?X.removeAttr("data-active"):X.removeClass("lock-screen").removeAttr("data-active"),de.zoom.reset(),Q.removeClass("open"),J.scrollTop(re),o.default.KeyboardFocus.disablePanelFocus(Q),$(document).trigger("hide.material-viewer")}},zoom:{reset:function(){L.panzoom("reset",[{silent:!0}]),L.removeClass("zoomed"),de.zoom.changeButtonVisibility("width")},check:function(){void 0!==L?de.zoom.panzoom.init():LIT.Reader.LogEnabled&&console.debug("Undefined element for zooming",L)},panzoom:{init:function(){void 0!==$.fn.panzoom&&(L.panzoom({$zoomIn:O,$zoomOut:M,panOnlyWhenZoomed:!1,minScale:1}),M.attr("disabled",!0),L.on("panzoomzoom",(function(){var e=L.panzoom("getMatrix"),t=!0;$.each(e,(function(e,n){0!==e&&3!==e||("1"!==n&&(t=!1),"6"===n?O.attr("disabled",!0):O.removeAttr("disabled"))})),t?(de.zoom.reset(),M.attr("disabled",!0)):(M.removeAttr("disabled"),$(this).addClass("zoomed"))})))}},fitWidth:function(){var e=E.width()/L.find("img, table").width();L.panzoom("zoom",e),de.zoom.changeButtonVisibility("height")},fitHeight:function(){var e=E.height()/L.find("img, table").height();L.panzoom("zoom",e),de.zoom.changeButtonVisibility("width")},changeButtonVisibility:function(e){k.addClass("d-none"),k.filter("."+e).removeClass("d-none")}},sortingMenu:{init:function(){var e=B.find('[type="radio"]');N.find(".counter").text(ee.length),de.sortingMenu.types(),de.sortingMenu.counters(e),de.sortingMenu.selectOption(e)},reset:function(){var e=$("#dropdownSort");e.attr("aria-expanded",!1),e.removeClass("fadeIn"),B.find("#all-radio").click()},types:function(){V=y.find('figure[data-type="figure"]:not(.tableImage)'),H=y.find('figure[data-type="table"], figure[data-type="figure"].tableImage'),K=y.find('figure[data-type="code"]'),z=y.find('figure[data-type="video"]'),W=y.find('figure[data-type="audio"]'),G=y.find('figure[data-type="supplement"]')},counters:function(e){e.each((function(e,t){var n=$(this),a=n.next().find(".counter"),i=n.val(),o=0;o="figure"===i?V.length:"table"===i?H.length:"code"===i?K.length:"video"===i?z.length:"audio"===i?W.length:"supplement"===i?G.length:ee.length,a.text(o),0===o?n.prop("disabled",!0):n.prop("disabled",!1)}))},selectOption:function(e){e.on("change",(function(){var e=$(this),t=e.val(),n=e.next(),a=n.find(".text").text(),i=n.find(".counter").text();s.default.pauseAllPlayers(_,b),j.find(".text").text(a),j.find(".counter").text(i),F.removeClass(ie),y.find("figure").removeClass(ae),"all"!==t&&("figure"==t?y.find('figure:not([data-type="'+t+'"]:not(.tableImage))').addClass(ae):"table"==t?y.find("figure").not(H).addClass(ae):y.find('figure:not([data-type="'+t+'"])').addClass(ae))}))}},load:{publicationTitle:function(e){var t=e.parents("dl").find("dt").text();""===t&&(t=$("#app-navbar").find(".js__book-title").text()),$(".material-viewer_title_chapter").text(t).attr("title",t)},details:function(e,t){var n=e.find(".figure__caption").clone();a.default.destroy(n.find(".truncatable")),n.hasClass("hasDescription")||n.html((0,p.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:f.default.figures_viewer_desc_empty}}));var i=".label, .heading, .figlabel",o=n.find(i).length?n.find(i):e.find(".figure__title span"),r=o.eq(0).text();if(o.length||(r=(t=e.hasClass("tableImage")?"Table":t).charAt(0).toUpperCase()+t.slice(1),"graphical-abstract"===t&&(r="Graphical Abstract")),A.empty(),A.append(n),A.find(".figure__desc").text(A.find(".figure__desc").attr("title")),A.find(i).not(".sub-caption .label").first().remove(),""===r||void 0===r){var s=n.find("figcaption").find(":first-child").eq(0);r=s.text(),s.not(".sub-caption .label").remove()}$(te[0]).attr("data-original-title",r),te.text(r),n.find(".figure__actions").remove(),2===o.length&&(r+=" - "+o.eq(1).text(),te.filter(".material-viewer_title").text(r))},downloadLinks:function(e,t,a){var i=e.find(".media__download").attr("href");if(U.off("click"),"table"===a)de.load.downloadTableActions(U,t);else{if(!t.attr("data-lg-src")&&!i)return void U.addClass("disabled");U.removeClass("disabled"),U.attr("href",t.attr("data-lg-src")||i),n.default.customConfig.materialTabs.openDownloadLinkInNewTab&&"figure"!==a&&U.removeAttr("download")}},downloadTableActions:function(e,t){var n=t.closest("figure")[0].outerHTML.trim();""!==n?(e.removeClass("disabled"),e.on("click",(function(e){e.preventDefault();var a=$(n);$.each(a.find("img"),(function(e,t){$(t).attr("src",t.src)}));var i=a[0].outerHTML,o=document.createElement("a"),r=t.closest(".material-viewer_reg_center").find(".material-viewer_title_text").text().replace(/\s\s+/g," ").trim()+".html";if(window.navigator.msSaveBlob){var s=new Blob([i],{type:"text/plain;charset=utf-8;"});window.navigator.msSaveOrOpenBlob(s,r)}else o.setAttribute("download",r),o.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(i)),o.click()}))):e.addClass("disabled")},material:function(e){var t,a=e.data("type"),i=e.data("id"),o=e.data("link"),r=E.find("figure");if(r.html("").scrollTop(0),r.css("overflow","unset"),"figure"!==a&&"graphical-abstract"!==a||!e.has("img").length)if("supplement"===a)t=e.find("supplement").clone(),P.addClass(ae),r.append((0,p.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:"There is no available preview for this file"}}));else if("code"===a)t=e.find("code").clone(),r.append((0,p.default)({settings:{icon:"sentiment_very_dissatisfied",errorType:"content",text:"There is no available preview for code snippets"}}));else if("audio"===a){var l={width:EREADER.utils.isMobile()?"90%":"100%"};l.soundWaveUrl=n.default.soundwave,l.soundWaveWhiteUrl=n.default.soundwave_white,t=e.find("audio").clone();var d=e.find(".figure__title").clone();r.prepend(d),r.append(t),P.addClass(ae),t.addClass("justwave-viewer").removeClass("waveform"),$.justwave(l,"justwave-viewer"),$(".justwave-viewer").addClass("waveform").removeClass("justwave-viewer")}else if("video"===a){var u="material-container-"+i;_&&"undefined"!=typeof flowplayer?(t=$("<div class='flowPlayer' id='"+u+"'><video><source type='application/x-mpegurl' src='"+o+"'></video></div>"),r.append(t),s.default.initFlowPlayer("#"+u,h.key)):b&&"undefined"!=typeof jwplayer&&(t=$("<div class='jwplayer' id='"+u+"'></div>"),r.append(t),jwplayer(u).setup({file:o,key:h.key,width:"100%",height:"100%"})),P.addClass(ae)}else t=e.find("table, supplement").clone(),r.append(t),"table"!==a?P.addClass(ae):P.removeClass(ae);else t=e.find(".figure__media img").clone(),de.load.image(t),P.removeClass(ae);return t},image:function(e){var t=E.find("figure"),a=$('<div class="content-loader"></div>').appendTo(t),i=function(){if(a.remove(),EREADER.utils.isIE11()?o.show():o.fadeIn(),!n.default.customConfig.isMaterialDownloadable||n.default.customConfig.restrictContent){var e=$(this).attr("src");e.includes("blob:http")&&window.URL.revokeObjectURL(e)}};if(1!==e.length)e.each((function(){var e;(e=$("<img/>",{class:$(this).attr("class"),id:$(this).attr("id"),src:window.READER_OFFLINE?$(this).attr("src"):$(this).attr("data-lg-src"),alt:$(this).attr("alt")})).attr("data-lg-src",$(this).attr("data-lg-src")),t.append(e),e.on("load",i)}));else{var o=$("<img />");n.default.customConfig.isMaterialDownloadable&&!n.default.customConfig.restrictContent||window.READER_OFFLINE?o.attr("src",window.READER_OFFLINE?e.attr("src"):e.attr("data-lg-src")):de.restrictImage(o,e.attr("data-lg-src")),t.append(o),o.hide(),o.on("load",i)}}},restrictImage:function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.open("GET",t,!0),n.onload=function(){200===n.status?e.attr("src",window.URL.createObjectURL(n.response)):e.attr("src",t)},n.onerror=function(){e.attr("src",t)},n.send(),e.on("copy cut dragstart",(function(e){e.preventDefault()})),e.on("contextmenu",(function(e){e.preventDefault()}))},truncate:function(){var e=$(".material-viewer_reg_top .material-viewer_title_chapter"),t=$(".material-viewer_reg_top .material-viewer_title_text");i.default.init(e,1,!0),i.default.init(t,1,!0)},navigation:{setStatus:function(){ee.filter('[data-type!="supplement"] [data-streamed!="false"]').length<2?(S.attr("disabled",!0),S.css("cursor","not-allowed")):S.attr("disabled",!1)},next:function(){if($(".material-viewer.open").length>0){var e=this.getTargetFig(!0);de.replace(e,e.data("type")),de.zoom.reset()}},prev:function(){if($(".material-viewer.open").length>0){var e=this.getTargetFig(!1);de.replace(e,e.data("type")),de.zoom.reset()}},getTargetFig:function(e){e&&++ne===ee.length&&(ne=0),!e&&ne--<=0&&(ne=ee.length-1);var t=ee.filter((function(e,t){return $(t).data("number")===ne})),n=t.data("type"),a=t.data("streamed");return"supplement"!==n&&("video"!==n&&"audio"!==n||a)?t:this.getTargetFig(e)}},getCurrentFig:function(){return ee.eq(ne)}},ue=le;t.default=ue}.apply(t,a))||(e.exports=i)},4325:function(e,t,n){var a,i,o=n(41999);n(69826),n(3843),n(83710),n(32564),a=[t,n(31924),n(55765),n(77803),n(88450),n(41259),n(81152),n(66419),n(64142),n(70371)],void 0===(i=function(e,n,a,i,r,s,l,d,u,f){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=$(r.default.menudrawer_info.offline_library),n=$(r.default.menudrawer_info.offline_btn);e?(t.addClass("success"),n.data("inDevice",!0),$(r.default.menudrawer_info.offline_btn).attr("data-disable-offline",!1)):(t.addClass("general"),n.data("inDevice",!1),$(r.default.menudrawer_info.offline_btn).attr("data-disable-offline",!0))}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=c(n),a=c(a),i=c(i),r=c(r),s=c(s),l=c(l),d=c(d),u=c(u),f=c(f);var g={init:function(){var e=$(r.default.menudrawer_info.drawer),t=r.default.menudrawer_info.download_btn+", "+r.default.menudrawer_info.download_list+", "+r.default.navbar_info.navbarDownload;e.length>0?(e.each((function(){var e=$(this);e.attr("role")||g.initWaiRoles(e)})),g.initTriggers(),g.specificButtons()):t.length>0&&g.specificButtons()},initWaiRoles:function(e){e.attr("role","menu"),e.find("li").each((function(){var e=$(this);e.attr("role")||g.initStates(e)}))},initTriggers:function(e){var t=$('[role="menuitem"]:not('+r.default.menudrawer_info.disabled+")");if(e&&(t=e),t.find(r.default.menudrawer_info.submenu_btn).length>0){var n=r.default.menudrawer_info.submenu_btn;t.find(n).off("click",g.submenuClick),t.find(n).on("click",g.submenuClick)}if(t.find(r.default.menudrawer_info.checkbox_btn).length>0){var a=r.default.menudrawer_info.checkbox_btn;t.find(a).off("click",g.checkboxClick),t.find(a).on("click",g.checkboxClick)}},initStates:function(e){e.attr({role:"menuitem","aria-haspopup":"false","aria-expanded":"false","aria-disabled":"false"}),e.find("button, .button").attr("tabindex","0"),e.find(r.default.menudrawer_info.submenu_panel)&&a.default.WaiAria.toggleState(e,"aria-haspopup")},resetStates:function(e){var t=$(e);t.find(r.default.menudrawer_info.submenu_open_class).each((function(e){$(this).removeClass(r.default.menudrawer_info.submenu_open)})),t.find('[role="menuitem"]').each((function(e){a.default.WaiAria.setState($(this),"aria-expanded","false")})),t.find(".overflow-container").removeClass(r.default.menudrawer_info.submenu_open)},openSubMenu:function(e,t){e.addClass(r.default.menudrawer_info.submenu_open),a.default.WaiAria.setState(t,"aria-expanded",!0),t.parents(".overflow-container").addClass(r.default.menudrawer_info.submenu_open),$("#info-tab-pane").trigger("show")},closeSubMenu:function(e,t){e.removeClass(r.default.menudrawer_info.submenu_open),a.default.WaiAria.setState(t,"aria-expanded",!1),$(".overflow-container").removeClass(r.default.menudrawer_info.submenu_open)},submenuClick:function(){var e=$(this),t=e.parents("li"),n=t.parent("ul"),i=a.default.WaiAria.getState(t,"aria-disabled");switch(e[0].id){case"downloadDoc":if(window.READER_OFFLINE||e.parents(r.default.navbar_info.download_list).hasClass(r.default.menudrawer_info.not_resolved_yet)||e.parents(r.default.navbar_info.download_list).hasClass(r.default.menudrawer_info.could_not_resolve))return n.hasClass(r.default.menudrawer_info.submenu_open)&&g.toggleSubMenu(n,t),!0;break;case u.default.tabs.links:EREADER.utils.gtTablet()&&$("#"+u.default.panes.links).find("a."+u.default.tabs.ref).trigger("click");break;case u.default.tabs.data:var o;if(EREADER.utils.gtTablet())null===(o=$("#"+u.default.panes.data).find("a[role='tab']").first())||void 0===o||o.trigger("click")}i||g.toggleSubMenu(n,t)},toggleSubMenu:function(e,t){var n=a.default.WaiAria.getState(t,"aria-expanded"),i=e.hasClass(r.default.menudrawer_info.submenu_open);n?g.closeSubMenu(e,t):(i?(a.default.WaiAria.setState(t.siblings(),"aria-expanded",!1),a.default.WaiAria.setState(t,"aria-expanded",!0)):g.openSubMenu(e,t),setTimeout((function(){t[0].focus()}),100),f.default.trigger(f.default.eventTypes.OPEN_LEFT_MENU,{customProperties:{eventTime:Date.now(),openedMenuItem:t.find(".list-button")[0].id}})),$(r.default.right_panel_info.id+" > div").scrollTop(0)},checkboxClick:function(){var e=$(this);a.default.WaiAria.toggleState(e,"aria-checked"),Narration.setNarrator(a.default.WaiAria.getState(e,"aria-checked"))},specificButtons:function(){$(document);var e=r.default.menudrawer_info.download_btn+", "+r.default.menudrawer_info.download_list+", "+r.default.navbar_info.navbarDownload;$(e).on("click",o.debounce((function(e){e.stopPropagation(),e.target.id!==r.default.free_to_read_info.access_button_id&&s.default.manageDownload($(this),e)}),200,{leading:!1,trailing:!0})),$(r.default.menudrawer_info.download_list).find("input").one("change input",(function(){0!==$(r.default.menudrawer_info.download_list).find("#"+r.default.alertpopups_info.alert_id).length&&i.default.closeAlert()})),LIT.Reader.isSecureConnection?l.default.isThisAvailableOffline().done(p):p(!1),$(r.default.menudrawer_info.offline_btn).length>0&&$(r.default.menudrawer_info.offline_btn).find("button").on("click",d.default),$(r.default.menudrawer_info.offline_documents).length>0&&$(r.default.menudrawer_info.offline_documents).on("click",(function(e){n.default.customConfig.isOfflineSupportedForBrowser&&!EREADER.utils.isEdgePrivateMode()||(e.preventDefault(),i.default.toast("UNSUPPORTED","Offline reading"))}))}},m=g;t.default=m}.apply(t,a))||(e.exports=i)},12700:function(e,t,n){var a,i;a=[t,n(88450),n(17991)],void 0===(i=function(e,n,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=i(n),a=i(a);var o={init:function(){var e=$(n.default.progressbar_info.bar);$(document).on("mousewheel DOMMouseScroll scroll",(function(e){$(n.default.progressbar_info.scroll_frame).length&&o.progress()})),e.length>0&&e.each((function(){$(this).attr("role","progressbar"),$(this).attr("aria-valuenow","1"),$(this).attr("aria-valuemin","1"),$(this).attr("aria-valuemax","100")}))},progress:function(){var e=$(n.default.progressbar_info.bar),t=$(document).width(),i=a.default.navigationActions.getPaginationProgress(),o=i/t;e.attr("aria-valuenow",o),e.css("width",i+"%")}},r=o;t.default=r}.apply(t,a))||(e.exports=i)},89333:function(e,t,n){var a,i;n(69826),n(89554),n(24603),n(74916),n(39714),n(4723),n(15306),n(64765),n(54747),a=[t,n(55765)],void 0===(i=function(e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=(a=n)&&a.__esModule?a:{default:a};var i={container:".select-widget",trigger:".select-toggle",content:".select-content ",choice:".choice",input:'[name^="dropdown-"]',expanded:"expanded",disabled:"disabled",activeChoice:"selected",isMobile:!1,init:function(){i.initializeStates(),i.control()},control:function(){var e=$("body");e.on("click",(function(e){0===$(e.target).parents(i.container).length&&i.on.reset()})),e.on("click",i.trigger,(function(e){e.preventDefault();var t=e.target.dataset.associatedRadio;t&&(document.querySelector("#"+t).checked=!0),i.on.clicked($(this))}));var t=i.content+" "+i.choice;e.on("click",t,(function(e){e.preventDefault(),i.on.optionSelect($(this))})),e.on("input.printing",i.trigger,(function(){var e=$(this),t=e.parents(i.container).find(i.content);e.removeData("index"),"false"===e.attr("aria-expanded")&&i.on.open(t,e),e.hasClass("filtered-input")&&i.search()}))},search:function(){document.querySelectorAll(i.choice).forEach((function(e){var t=e.querySelector(".select-item__text"),n=t.innerText,a=document.querySelector(i.trigger),o=a?a.value:"",r=new RegExp(o,"ig");n.match(r)?(e.classList.remove("d-none"),(o=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).length>0?(t.innerHTML=n.replace(/(<mark>|<\/mark>)/gim,""),t.innerHTML=t.innerHTML.replace(r,"<mark>$&</mark>")):($(i.choice).removeClass("first-visible-element"),t.innerHTML=n.replace(/(<mark>|<\/mark>)/gim,""))):(e.classList.add("d-none"),$(i.choice).removeClass("first-visible-element"),$(i.choice+":visible:first").addClass("first-visible-element"))}))},initializeStates:function(){$(i.content).each((function(){$(this).slideUp()})),$(i.trigger).each((function(){var e=$(this);n.default.WaiAria.setState(e,"aria-haspopup",!0),n.default.WaiAria.setState(e,"aria-expanded",!1),e.hasClass(i.disabled)&&(n.default.WaiAria.setState(e,"aria-disabled",!0),n.default.WaiAria.setState(e,"tabindex","-1"))}))},dropdownPosition:function(e,t){var n,a,i=e.outerHeight(),o=t.offset().top,r=t.outerHeight(),s=t.outerWidth(),l=$(window).height()-o-r;l<i&&o>i?(n="auto",a=l+r):l<i&&o<i?(n=16,a=16):(n=o+r,a="auto"),e.css({top:n,left:t.offset().left,width:s,bottom:a})},on:{clicked:function(e){var t=e.hasClass(i.disabled),a=e.parents(i.container).find(i.content);if(!t){var o=!("true"===e.attr("aria-expanded"));i.on.reset(),n.default.WaiAria.setState(e,"aria-expanded",o),o?i.on.open(a,e):i.on.close(a)}},open:function(e,t){e.addClass("open"),e.closest(i.container).addClass("js--active"),i.isMobile=EREADER.utils.isMobile()||EREADER.utils.isMobileHeight(),i.isMobile||i.dropdownPosition(e,t)},close:function(e){e.removeClass("open"),e.closest(i.container).removeClass("js--active")},optionSelect:function(e){i.on.reset();var t=$(i.input),n=e.parents(i.container).find(i.trigger),a=e.parents(i.container).find(i.content);a.find("."+i.activeChoice).removeClass(i.activeChoice),e.parent().addClass(i.activeChoice),t.val(e[0].innerHTML),t.attr("value",e[0].innerHTML),n.is("input")?(n.val(e.find(".select-item__text")[0].innerText),n.data("index",e.data("index"))):n.find("span")[0].innerHTML=e[0].innerHTML,i.on.close(a)},reset:function(){var e=$(i.trigger+'[aria-expanded="true"]');0!==e.length&&n.default.WaiAria.setState(e,"aria-expanded",!1),$(i.content).each((function(){i.on.close($(this))}))}}},o=i;t.default=o}.apply(t,a))||(e.exports=i)},69414:function(e,t,n){var a,i;n(69826),n(82772),n(66992),n(3843),n(83710),n(51532),n(41539),n(74916),n(78783),n(23123),n(33948),a=[t,n(88450),n(55765),n(70371)],void 0===(i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r,s;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=o(n),a=o(a),i=o(i);var l=void 0;function d(e){return void 0===l&&((l=new Map).set("#figures-tab-pane","Figures Tab"),l.set("#tables-tab-pane","Tables Tab"),l.set("#media-tab-pane","Media Tab"),l.set("#supplementary-tab-pane","Supplements Tab"),l.set("#references-tab-pane","References Tab"),l.set("#citations-tab-pane","CitedBy Tab"),l.set("#recommended-tab-pane","Recommended Tab")),l.get(e)}var u={init:function(){r=!EREADER.utils.gtTablet(),s=r;var e=$(n.default.tabs_info.tablist).find(n.default.tabs_info.tab);e.length&&e.each((function(){u._initializeTabItem($(this))})),$(n.default.tabs_info.back_btn).on("click",(function(e){u.statesReset(!0,$(this))})),$(window).on("resize.tabsWidget",(function(){(r=!EREADER.utils.gtTablet())!==s&&(s=r,u.statesReset(),EREADER.transpileContent(),r||$(n.default.tabs_info.tablist).each((function(e,t){var a=$(this).find(n.default.tabs_info.tab).first();u.activeTab(a)})))}))},initTabItems:function(e){var t=e.find(n.default.tabs_info.tab);0!==t.length&&t.each((function(){u._initializeTabItem($(this))}))},initTabItem:function(e){u._initializeTabItem(e)},_initializeTabItem:function(e){e.attr("role")||(u.initStates(e),u.initTabs(e))},initStates:function(e){var t=e.attr("href");t&&e.attr({role:"tab","aria-controls":t.split("#")[1]||"","aria-disabled":"false","aria-selected":"false",tabindex:0}),e.find(n.default.tabs_info.icon).each((function(){$(this).attr({"aria-hidden":"true","aria-labelledby":e.attr("id")||""})})),$(t).attr({role:"tabpanel","aria-label":e.attr("title")||"","aria-hidden":"true",tabindex:0}),e.hasClass(n.default.tabs_info.disabled_class)&&(a.default.WaiAria.setState(e,"aria-disabled",!0),e.attr("tabindex","-1"))},initTabs:function(e){e.off("click").on("click",(function(e){e.preventDefault(),u.tabClicked(e)})),u.activeTab(e)},activeTab:function(e){var t=e.closest(n.default.tabs_info.tablist),i=a.default.WaiAria.getState(e,"aria-disabled"),o=t.find(n.default.tabs_info.tab),s=[];o.each((function(){if($(this).hasClass(n.default.tabs_info.active_class))return s=$(this),!1})),0!==s.length||i||(s=e),r||u.tabClicked(s,!0)},initTabPanels:function(){$(n.default.tabs_info.tabpanel).each((function(){EREADER.utils.displaySpinner($(this))}))},tabClicked:function(e,t){var o=0!==$(e.delegateTarget).length?$(e.delegateTarget):e,s=o.attr("href")||"",l=$(s);if(t||i.default.trigger(i.default.eventTypes.OPEN_LEFT_MENU,{customProperties:{eventTime:Date.now(),openedMenuItem:d(s)}}),0===s.indexOf("#")){var f=a.default.WaiAria.getState(o,"aria-disabled"),c=o.hasClass(n.default.tabs_info.active_class);if(!f&&!c){u.statesReset(!0,o),l.closest(n.default.tabs_info.tabcontent).find(n.default.tabs_info.mobile_title).text(o.find(n.default.tabs_info.tab_title).text()),o.addClass(n.default.tabs_info.active_class),a.default.WaiAria.toggleState(o,"aria-selected"),l.trigger("show"),l.addClass(n.default.tabs_info.active_class),a.default.WaiAria.toggleState(l,"aria-hidden");var p=o.closest(n.default.tabs_info.tablist);if(l=p.next(n.default.tabs_info.tabcontent),p.addClass(n.default.tabs_info.active_class),l.addClass(n.default.tabs_info.active_class),!r){var g=$(o.attr("href"));if(g.find(n.default.tabs_info.tabpanel).length>0){var m=g.find('[role="tab"].active');$(m.attr("href")).addClass(n.default.tabs_info.active_class)}}$(".scrollToTop").scrollTop(0)}}},scrollingTab:function(e){e.find(n.default.tabs_info.inner_tabContent).scroll((function(e){var t=$(this),n="scrollingTabContent";t.scrollTop()>0?t.addClass(n):t.removeClass(n)}))},statesReset:function(e,t){var i=$(n.default.tabs_info.tablist),o=$(n.default.tabs_info.tabcontent),r=i.find("a"),s=$(n.default.tabs_info.tabpanel);if(t){var l=t.parents(n.default.tabs_info.tabpanel);l.length>0&&(i=l.find(n.default.tabs_info.tablist),r=l.find(n.default.tabs_info.tablist).find("a"),s=l.find(n.default.tabs_info.tabpanel))}else o.removeClass(n.default.tabs_info.active_class);if(e)t.parentsUntil("body").last();r.removeClass(n.default.tabs_info.active_class),a.default.WaiAria.setState(r,"aria-selected","false"),s.removeClass(n.default.tabs_info.active_class),a.default.WaiAria.setState(s,"aria-hidden","true")}},f=u;t.default=f}.apply(t,a))||(e.exports=i)},38749:function(e,t,n){var a,i;n(69826),a=[t,n(17991)],void 0===(i=function(e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,n=(a=n)&&a.__esModule?a:{default:a};var i={$ZoomWrapper:null,buttons:{$ZoomButtons:null,$ZoomIn:null,$ZoomOut:null,$FitHeight:null,$FitWidth:null},init:function(){i.$ZoomWrapper=$(".zoom-wrapper"),i.buttons.$ZoomButtons=i.$ZoomWrapper.find(".zoom-btn"),i.buttons.$ZoomInBtn=i.$ZoomWrapper.find(".zoom-btn.out"),i.buttons.$ZoomOutBtn=i.$ZoomWrapper.find(".zoom-btn.in"),i.buttons.$FitHeight=i.$ZoomWrapper.find(".zoom-btn.height"),i.buttons.$FitWidth=i.$ZoomWrapper.find(".zoom-btn.width"),i.buttons.$ZoomButtons.on("click",(function(){var e=$(this);e.hasClass("in")?i.zoomIn():e.hasClass("out")?i.zoomOut():e.hasClass("height")?i.fitHeight():e.hasClass("width")&&i.fitWidth(),EREADER.utils.scrolledContentFocus()}))},initKeyboardEvents:function(){Keyboard.on(Keyboard.ZoomOut,"reader",(function(){void 0===i.buttons.$ZoomOutBtn.attr("disabled")&&i.zoomOut()})),Keyboard.on(Keyboard.ZoomIn,"reader",(function(){void 0===i.buttons.$ZoomInBtn.attr("disabled")&&i.zoomIn()})),Keyboard.on(Keyboard.ZoomScreenToggle,"reader",(function(){i.buttons.$FitHeight.isVisible()?i.fitHeight():i.buttons.$FitWidth.isVisible()&&i.fitWidth()}))},updateZoomButtons:function(){var e=$(".zoom-wrapper .zoom-btn.out"),t=$(".zoom-wrapper .zoom-btn.in");n.default.displayActions.zoomActions.canZoomOut()?(e.removeClass("js__limitsReached"),e.removeAttr("disabled")):(e.addClass("js__limitsReached"),e.attr("disabled","true")),n.default.displayActions.zoomActions.canZoomIn()?(t.removeClass("js__limitsReached"),t.removeAttr("disabled")):(t.addClass("js__limitsReached"),t.attr("disabled","true"))},changeButtonVisibility:function(){"fit-width"===i.getPreset()?($(".zoom-btn.width").addClass("d-none"),$(".zoom-btn.height").removeClass("d-none")):($(".zoom-btn.height").addClass("d-none"),$(".zoom-btn.width").removeClass("d-none"))},zoomIn:function(){n.default.displayActions.zoomActions.zoomIn(),this.updateZoomButtons(),this.changeButtonVisibility()},zoomOut:function(){n.default.displayActions.zoomActions.zoomOut(),this.updateZoomButtons(),this.changeButtonVisibility()},fitWidth:function(){n.default.displayActions.zoomActions.fitWidth(),this.changeButtonVisibility(),$(".zoom-btn.height").focus()},fitHeight:function(){n.default.displayActions.zoomActions.fitHeight(),this.changeButtonVisibility(),$(".zoom-btn.width").focus()},customScale:function(e){n.default.displayActions.zoomActions.customScale(e)},disableZoom:function(){i.buttons.$ZoomButtons.attr("disabled",!0)},enableZoom:function(){$(".zoom-wrapper .zoom-btn:not(.js__limitsReached)").removeAttr("disabled")},getPreset:function(){return n.default.displayActions.zoomActions.getPreset()},getPageWidth:function(){return n.default.displayActions.zoomActions.getPageWidth()},isZoomed:function(){return n.default.displayActions.zoomActions.isZoomed()},fixPositionNeeded:function(){return n.default.displayActions.zoomActions.fixPositionNeeded()}},o=i;t.default=o}.apply(t,a))||(e.exports=i)},54376:function(e,t,n){var a,i;n(41539),n(88674),a=[t,n(35666),n(36968),n(31924)],i=function(e,n,a,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=o(a),i=o(i);var l=a.default.tables.CONTENT_TABLE;function d(){return(d=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={sourceFormat:i.default.customConfig.format,title:i.default.customConfig.title,rootUrl:window.location.pathname,doi:i.default.customConfig.doi},e.next=3,u(t,t.doi,t.sourceFormat);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,n){return f.apply(this,arguments)}function f(){return(f=s(regeneratorRuntime.mark((function e(t,n,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.add(l,{metadata:t,doi:n+"_"+i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.delete(l,i.default.customConfig.doi+"_"+i.default.customConfig.format);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.getAll(l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={getOfflineContents:function(){var e=$.Deferred();return function(){return p.apply(this,arguments)}().then((function(t){e.resolve(t)})).catch((function(t){e.reject(t)})),e.promise()},add:function(){var e=$.Deferred();return function(){return d.apply(this,arguments)}().then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()},addWithMetadata:function(e){var t=$.Deferred();return u(e,e.doi,e.sourceFormat).then((function(){t.resolve()})).catch((function(e){t.reject()})),t.promise()},remove:function(){var e=$.Deferred();return function(){return c.apply(this,arguments)}().then((function(){e.resolve()})).catch((function(t){e.reject()})),e.promise()}},m=g;t.default=m}.apply(t,a),void 0===i||(e.exports=i)},17991:function(e,t,n){var a,i;n(69070),n(41539),n(88674),n(74916),n(64765),a=[t,n(35666),n(31924)],void 0===(i=function(e,n,a){"use strict";var i;function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=(i=a)&&i.__esModule?i:{default:i};var r=function(e,t,n,a){return new(n||(n=Promise))((function(i,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navigationActions={canGoLeft:function(){return e.renderer.navigationActions.canGoLeft()},canGoRight:function(){return e.renderer.navigationActions.canGoRight()},returnPreviousLocation:function(){return e.renderer.navigationActions.returnPreviousLocation()},clearLocationHistory:function(){e.renderer.navigationActions.clearLocationHistory()},getPaginationProgress:function(){return e.renderer.navigationActions.getPaginationProgress()},getCurrentPageElement:function(){return e.renderer.navigationActions.getCurrentPageElement()},openContentUsingUrl:function(t){e.renderer.navigationActions.openContentUsingUrl(t)},openContentByProgressLocation:function(t){e.renderer.navigationActions.openContentByProgressLocation(t)},getHtmlData:function(){return e.renderer.navigationActions.getHtmlData()},isFirstPage:function(t){return e.renderer.navigationActions.isFirstPage(t)},isLastPage:function(t){return e.renderer.navigationActions.isLastPage(t)},init:function(){e.renderer.navigationActions.init()},getCurrent:function(){return e.renderer.navigationActions.getCurrent()},getTotal:function(){return e.renderer.navigationActions.getTotal()},downArrowKey:function(){e.renderer.navigationActions.downArrowKey()},leftArrowKey:function(){e.renderer.navigationActions.leftArrowKey()},rightArrowKey:function(){e.renderer.navigationActions.rightArrowKey()},upArrowKey:function(){e.renderer.navigationActions.upArrowKey()},isValidPageNumber:function(t){return e.renderer.navigationActions.isValidPageNumber(t)},goToEndPage:function(){e.renderer.navigationActions.goToEndPage()},goToPage:function(t){e.renderer.navigationActions.goToPage(t)},goToStartPage:function(){e.renderer.navigationActions.goToStartPage()},nextPage:function(){e.renderer.navigationActions.nextPage()},previousPage:function(){e.renderer.navigationActions.previousPage()},isBookFirstPage:function(){return e.renderer.navigationActions.isBookFirstPage()},isBookLastPage:function(){return e.renderer.navigationActions.isBookLastPage()},goToPageFile:function(t,n){e.renderer.navigationActions.goToPageFile(t,n)}},this.offline={isPartialSaved:function(){return e.renderer.contentActions.offlineStorage.isPartialSaved()},getOldData:function(){return e.renderer.contentActions.offlineStorage.getOldData()},onOffline:function(){e.renderer.contentActions.offlineStorage.onOffline()},onOnline:function(){e.renderer.contentActions.offlineStorage.onOnline()},isThisAvailableOffline:function(){return e.renderer.contentActions.offlineStorage.isThisAvailableOffline()},isDeleting:function(){return e.renderer.contentActions.offlineStorage.isDeleting()},isRetrieving:function(){return e.renderer.contentActions.offlineStorage.isRetrieving()},remove:function(){return e.renderer.contentActions.offlineStorage.remove()},save:function(){return e.renderer.contentActions.offlineStorage.save()},stop:function(){return e.renderer.contentActions.offlineStorage.stop()}},this.printingActions={init:function(t,n){e.renderer.contentActions.printingActions.init(t,n)},validate:function(t,n){return e.renderer.contentActions.printingActions.validate(t,n)},getSelectedPages:function(t){return e.renderer.contentActions.printingActions.getSelectedPages(t)},afterPrint:function(){return e.renderer.contentActions.printingActions.afterPrint()},beforePrint:function(){return e.renderer.contentActions.printingActions.beforePrint()},getPrintingPopupData:function(){return e.renderer.contentActions.printingActions.getPrintingPopupData()},getSinglePrintableItem:function(){return e.renderer.contentActions.printingActions.getSinglePrintableItem()},previewPrint:function(t){return e.renderer.contentActions.printingActions.previewPrint(t)}},this.search={clear:function(){e.renderer.contentActions.search.clear()},doSearch:function(t,n,a){e.renderer.contentActions.search.doSearch(t,n,a)},next:function(){e.renderer.contentActions.search.next()},previous:function(){e.renderer.contentActions.search.previous()}},this.toc={tocNotFound:!1,getIndex:function(){return e.renderer.contentActions.tocActions.getIndex()},getToMakeActive:function(t,n){return e.renderer.contentActions.tocActions.getToMakeActive(t,n)},getToc:function(){return e.renderer.contentActions.tocActions.getToc()},isRTL:function(){return e.renderer.contentActions.tocActions.isRTL()},tocElementClicked:function(t){return e.renderer.contentActions.tocActions.tocElementClicked(t)}},this.zoomActions={canZoomIn:function(){return e.renderer.displayActions.zoomActions.canZoomIn()},canZoomOut:function(){return e.renderer.displayActions.zoomActions.canZoomOut()},resizeReadingArea:function(t,n,a){e.renderer.displayActions.zoomActions.resizeReadingArea(t,n,a)},customScale:function(t){e.renderer.displayActions.zoomActions.customScale(t)},fitHeight:function(){e.renderer.displayActions.zoomActions.fitHeight()},fitWidth:function(){e.renderer.displayActions.zoomActions.fitWidth()},getPageWidth:function(){return e.renderer.displayActions.zoomActions.getPageWidth()},getPreset:function(){return e.renderer.displayActions.zoomActions.getPreset()},isZoomed:function(){return e.renderer.displayActions.zoomActions.isZoomed()},zoomIn:function(){e.renderer.displayActions.zoomActions.zoomIn()},zoomOut:function(){e.renderer.displayActions.zoomActions.zoomOut()},fixPositionNeeded:function(){return e.renderer.displayActions.zoomActions.fixPositionNeeded()}},this.doiMappingModeActions={getGetFTRConfigByDoi:function(t){return e.renderer.contentActions.doiMappingModeActions.getGetFTRConfigByDoi(t)},hasAccessToDoi:function(t,n){return e.renderer.contentActions.doiMappingModeActions.hasAccessToDoi(t,n)},hasAccessToPage:function(t){return e.renderer.contentActions.doiMappingModeActions.hasAccessToPage(t)},isInitialized:function(){return e.renderer.contentActions.doiMappingModeActions.isInitialized()},getDoiList:function(){return e.renderer.contentActions.doiMappingModeActions.getDoiList()},getDoiTitle:function(t,n){return e.renderer.contentActions.doiMappingModeActions.getDoiTitle(t,n)},getDoiTitleByDoi:function(t){return e.renderer.contentActions.doiMappingModeActions.getDoiTitleByDoi(t)},getTimeLimitedDoiConfig:function(){return e.renderer.contentActions.doiMappingModeActions.getTimeLimitedDoiConfig()},getDoiByPageNumber:function(t){return e.renderer.contentActions.doiMappingModeActions.getDoiByPageNumber(t)},getDoiMappingItems:function(){return e.renderer.contentActions.doiMappingModeActions.getDoiMappingItems()},setOfflineDoiList:function(t){return e.renderer.contentActions.doiMappingModeActions.setOfflineDoiList(t)},getOfflineDoiList:function(){return e.renderer.contentActions.doiMappingModeActions.getOfflineDoiList()},getCurrentDoi:function(){return e.renderer.contentActions.doiMappingModeActions.getCurrentDoi()},hasAccessByDoi:function(t){return e.renderer.contentActions.doiMappingModeActions.hasAccessByDoi(t)}},this.contentActions={getCampaignCode:function(t){return e.renderer.contentActions.getCampaignCode(t)},offlineStorage:this.offline,printingActions:this.printingActions,search:this.search,tocActions:this.toc,doiMappingModeActions:this.doiMappingModeActions,shouldGetFiguresFromContent:function(){return e.renderer.contentActions.shouldGetFiguresFromContent()},getEntireContentPagesLength:function(){return e.renderer.contentActions.getEntireContentPagesLength()},getReadingContainerSelector:function(){return e.renderer.contentActions.getReadingContainerSelector()},loadEbook:function(t,n,a,i){return e.renderer.contentActions.loadEbook(t,n,a,i)},addContentEventListener:function(t,n){e.renderer.contentActions.addContentEventListener(t,n)},init:function(){},handleFailedRequest:function(t){return e.renderer.contentActions.handleFailedRequest(t)},getFiguresFromContent:function(t){return e.renderer.contentActions.getFiguresFromContent(t)},getMetadataFromContent:function(){return e.renderer.contentActions.getMetadataFromContent()},getReferencesFromContent:function(){return e.renderer.contentActions.getReferencesFromContent()}},this.displayActions={zoomActions:this.zoomActions,getScrollFocusSelector:function(){return e.renderer.displayActions.getScrollFocusSelector()},getBookScrollContainer:function(){return e.renderer.displayActions.getBookScrollContainer()},shouldAddBookButtons:function(){return e.renderer.displayActions.shouldAddBookButtons()},columnsEnabled:function(){return e.renderer.displayActions.columnsEnabled()},getDisplaySettingsData:function(t,n){return e.renderer.displayActions.getDisplaySettingsData(t,n)},saveDisplaySettings:function(t){e.renderer.displayActions.saveDisplaySettings(t)},initDisplaySettings:function(){e.renderer.displayActions.initDisplaySettings()},updateDisplaySettings:function(t){e.renderer.displayActions.updateDisplaySettings(t)},toggleDisplayFormat:function(){return e.renderer.displayActions.toggleDisplayFormat()},shouldUseLoader:function(){return e.renderer.displayActions.shouldUseLoader()},isPDF:function(){return e.renderer.displayActions.isPDF()},isScrolling:function(){return e.renderer.displayActions.isScrolling()},isBookViewScrollable:function(){return e.renderer.displayActions.isBookViewScrollable()},isFacingPages:function(){return e.renderer.displayActions.isFacingPages()},fixBookPagePosition:function(){e.renderer.displayActions.fixBookPagePosition()},fixedShouldScroll:function(t,n){return e.renderer.displayActions.fixedShouldScroll(t,n)}}}var t,n,i;return t=e,i=[{key:"getActionController",value:function(){return null==e.instance&&(e.instance=new e),e.instance}}],(n=[{key:"init",value:function(){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,import(a.default.customConfig.rendererData.src);case 3:return e.renderer=new RendererAPI,delete window.RendererAPI,t.next=7,e.renderer.Ready;case 7:return t.abrupt("return",e.renderer);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))}}])&&o(t.prototype,n),i&&o(t,i),e}().getActionController();t.default=s}.apply(t,a))||(e.exports=i)},81983:function(e,t,n){var a,i;n(69070),n(41539),n(88674),a=[t,n(35666),n(46103),n(60039),n(26729)],void 0===(i=function(e,n,a,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=r(a),i=r(i),o=r(o);var l=function(e,t,n,a){return new(n||(n=Promise))((function(i,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((a=a.apply(e,t||[])).next())}))},d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"initEreaderMetaData",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return l(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initEreaderGlobalNamespace(),t.abrupt("return",e());case 2:case"end":return t.stop()}}),t,this)})))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}},{key:"initEreaderGlobalNamespace",value:function(){window.EREADER={},$.extend(EREADER,new o.default),this.initEreaderGlobalFunctions(),this.initEreaderGlobalCoreUtils()}},{key:"initEreaderGlobalFunctions",value:function(){a.default.defineProgressChangedEvent()}},{key:"initEreaderGlobalCoreUtils",value:function(){EREADER.utils=i.default}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}();t.default=d}.apply(t,a))||(e.exports=i)},89730:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/getFTR-alternative-version.a2b5c76c16cca33ce1b2512b00cefe16.svg"},18829:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/getFTR-full-text-version.b82028595a0bbe8f561e3607ab7d440f.svg"},21563:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/soundwave.edc4862724cd89dcdf214bcb1e4c8416.svg"},83866:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/soundwave_white.6a5609529967424c478295a103957ca7.svg"},65781:function(e,t,n){"use strict";n.r(t)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=n,t=[],i.O=function(e,n,a,o){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],o=t[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<r&&(r=o));if(s){t.splice(u--,1);var d=a();void 0!==d&&(e=d)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,a,o]},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},i.j=712,function(){var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e}(),function(){var e={712:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],s=n[1],l=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(l)var u=l(i)}for(t&&t(n);d<r.length;d++)o=r[d],i.o(e,o)&&e[o]&&e[o][0](),e[r[d]]=0;return i.O(u)},n=self.webpackChunkereader=self.webpackChunkereader||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=i.O(void 0,[736,3,580],(function(){return i(31985)}));o=i.O(o)}();